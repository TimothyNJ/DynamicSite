/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={56:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},s=[],a=0;a<t.length;a++){var l=t[a],h=i.base?l[0]+i.base:l[0],c=r[h]||0,u="".concat(h," ").concat(c);r[h]=c+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var m=o(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:m,references:1})}s.push(u)}return s}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=i(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=n(r[s]);e[a].references--}for(var l=i(t,o),h=0;h<r.length;h++){var c=n(r[h]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=l}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var h=0;h<t.length;h++){var c=[].concat(t[h]);i&&s[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},494:(t,e,n)=>{"use strict";n.d(e,{w:()=>o});var i=n(922);class o extends i.LoY{constructor(t=new i.eaF,e=new i.Pq0,n=new i.O9p,o=new i.Pq0(1,1,1)){super();const s=[],a=[],l=[],h=new i.Pq0,c=(new i.dwI).getNormalMatrix(t.matrixWorld),u=new i.kn4;u.makeRotationFromEuler(n),u.setPosition(e);const d=new i.kn4;function p(e,n,i=null){n.applyMatrix4(t.matrixWorld),n.applyMatrix4(d),i?(i.applyNormalMatrix(c),e.push(new r(n.clone(),i.clone()))):e.push(new r(n.clone()))}function m(t,e){const n=[],i=.5*Math.abs(o.dot(e));for(let o=0;o<t.length;o+=3){let r,s,a,l,h=0;const c=t[o+0].position.dot(e)-i>0,u=t[o+1].position.dot(e)-i>0,d=t[o+2].position.dot(e)-i>0;switch(h=(c?1:0)+(u?1:0)+(d?1:0),h){case 0:n.push(t[o]),n.push(t[o+1]),n.push(t[o+2]);break;case 1:if(c&&(r=t[o+1],s=t[o+2],a=g(t[o],r,e,i),l=g(t[o],s,e,i)),u){r=t[o],s=t[o+2],a=g(t[o+1],r,e,i),l=g(t[o+1],s,e,i),n.push(a),n.push(s.clone()),n.push(r.clone()),n.push(s.clone()),n.push(a.clone()),n.push(l);break}d&&(r=t[o],s=t[o+1],a=g(t[o+2],r,e,i),l=g(t[o+2],s,e,i)),n.push(r.clone()),n.push(s.clone()),n.push(a),n.push(l),n.push(a.clone()),n.push(s.clone());break;case 2:c||(r=t[o].clone(),s=g(r,t[o+1],e,i),a=g(r,t[o+2],e,i),n.push(r),n.push(s),n.push(a)),u||(r=t[o+1].clone(),s=g(r,t[o+2],e,i),a=g(r,t[o],e,i),n.push(r),n.push(s),n.push(a)),d||(r=t[o+2].clone(),s=g(r,t[o],e,i),a=g(r,t[o+1],e,i),n.push(r),n.push(s),n.push(a))}}return n}function g(t,e,n,o){const s=t.position.dot(n)-o,a=s/(s-(e.position.dot(n)-o)),l=new i.Pq0(t.position.x+a*(e.position.x-t.position.x),t.position.y+a*(e.position.y-t.position.y),t.position.z+a*(e.position.z-t.position.z));let h=null;return null!==t.normal&&null!==e.normal&&(h=new i.Pq0(t.normal.x+a*(e.normal.x-t.normal.x),t.normal.y+a*(e.normal.y-t.normal.y),t.normal.z+a*(e.normal.z-t.normal.z))),new r(l,h)}d.copy(u).invert(),function(){let e=[];const n=new i.Pq0,r=new i.Pq0,c=t.geometry,d=c.attributes.position,g=c.attributes.normal;if(null!==c.index){const t=c.index;for(let i=0;i<t.count;i++)n.fromBufferAttribute(d,t.getX(i)),g?(r.fromBufferAttribute(g,t.getX(i)),p(e,n,r)):p(e,n)}else{if(void 0===d)return;for(let t=0;t<d.count;t++)n.fromBufferAttribute(d,t),g?(r.fromBufferAttribute(g,t),p(e,n,r)):p(e,n)}e=m(e,h.set(1,0,0)),e=m(e,h.set(-1,0,0)),e=m(e,h.set(0,1,0)),e=m(e,h.set(0,-1,0)),e=m(e,h.set(0,0,1)),e=m(e,h.set(0,0,-1));for(let t=0;t<e.length;t++){const n=e[t];l.push(.5+n.position.x/o.x,.5+n.position.y/o.y),n.position.applyMatrix4(u),s.push(n.position.x,n.position.y,n.position.z),null!==n.normal&&a.push(n.normal.x,n.normal.y,n.normal.z)}}(),this.setAttribute("position",new i.qtW(s,3)),this.setAttribute("uv",new i.qtW(l,2)),a.length>0&&this.setAttribute("normal",new i.qtW(a,3))}}class r{constructor(t,e=null){this.position=t,this.normal=e}clone(){const t=this.position.clone(),e=null!==this.normal?this.normal.clone():null;return new this.constructor(t,e)}}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{"use strict";t.exports=function(t){return t[1]}},646:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(601),o=n.n(i),r=n(314),s=n.n(r)()(o());s.push([t.id,':root{--side-buffer-width: clamp(1vw, calc(1vw + ((100vw - 600px) * 0.2)), 30vw);--collapse-breakpoint: 600px;--navbar-height: auto;--component-spacing: 5px;--component-padding: 8px 12px;--component-gap: 4px;--component-border-radius: 9999px;--component-height: auto;--border-thickness: 1px;--component-font-size: clamp(0.5rem, 1.2vw, 2.3rem);--component-font-weight: bold;--component-text-color: #ffffff;--component-container-margin: 5px 0;--component-content-padding: 2px 10px;--3d-canvas-size: 300px;--h1-font-size: clamp(0.7rem, 1.6vw, 2.5rem);--h2-font-size: clamp(0.6rem, 1.4vw, 2.4rem);--h3-font-size: clamp(0.5rem, 1.2vw, 2.3rem);--p-font-size: clamp(0.5rem, 1.2vw, 2.3rem);--font-family-primary: Helvetica, Tahoma, sans-serif;--h1-margin-bottom: 2rem;--h2-margin-bottom: 1.5rem;--text-color-dark: #ffffff;--text-color-light: #ffffff;--text-color-dark-secondary: rgba(255, 255, 255, 0.9);--text-color-light-secondary: rgba(0, 0, 0, 0.9);--light-page-start: #4b5b62;--light-page-end: #ffffff;--dark-page-start: #000000;--dark-page-end: #96b7c4;--light-slider-start: #7c8e94;--light-slider-end: #a0b2b8;--dark-slider-start: #384c59;--dark-slider-end: #6c7f8b;--light-component-start: #7c8e94;--light-component-end: #a0b2b8;--dark-component-start: #384c59;--dark-component-end: #6c7f8b;--light-component-start-rgb: 124, 142, 148;--light-component-end-rgb: 160, 178, 184;--dark-component-start-rgb: 56, 76, 89;--dark-component-end-rgb: 108, 127, 139;--active-button-start: #6a0dad;--active-button-end: #4169e1;--active-element-start: #6a0dad;--active-element-end: #4169e1;--light-slider-start-percent: 34;--light-slider-end-percent: 68;--dark-slider-start-percent: 34;--dark-slider-end-percent: 68;--light-component-start-percent: 34;--light-component-end-percent: 68;--dark-component-start-percent: 34;--dark-component-end-percent: 68;--nav-primary: #007bff;--nav-hover: #0056b3;--text-primary: #4a90e2;--text-secondary: #6c757d;--border-color: #e0e0e0;--focus-color: #0066cc;--error-color: #dc3545;--success-color: #28a745;--spacing-unit: 8px;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--input-border-radius: 5px;--input-safe-padding: calc(var(--input-border-radius) * 0.5)}*{margin:0;padding:0;box-sizing:border-box}html,body{height:100%;width:100%}body{white-space:normal;overflow:visible;text-overflow:clip;max-width:100%;max-height:100%;box-sizing:border-box;position:relative}body::before{content:"";position:fixed;top:0;left:0;width:100vw;height:100vh;background-image:linear-gradient(-25deg, var(--dark-page-start) 0%, var(--dark-page-end) 100%);z-index:-1;pointer-events:none}body[data-theme=dark]::before{background-image:linear-gradient(-25deg, var(--dark-page-start) 0%, var(--dark-page-end) 100%)}body[data-theme=light]::before{background-image:linear-gradient(-25deg, var(--light-page-start) 0%, var(--light-page-end) 100%)}h1,h2,h3,p,button,span,a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;max-height:100%;box-sizing:border-box}h1,h2,h3,p{font-family:var(--font-family-primary);color:var(--text-color-dark);text-align:center}h1{font-size:var(--h1-font-size);margin:calc(.03vw + .03vh);font-weight:bold}h2{font-size:var(--h2-font-size);margin:calc(.03vw + .03vh);font-weight:bold}h3{font-size:var(--h3-font-size);margin:calc(.03vw + .03vh);font-weight:bold}p{font-size:var(--p-font-size);margin:calc(.03vw + .03vh);font-weight:normal}.site-container{font-size:inherit;display:flex;flex-direction:column;width:100%;min-height:100%;border-right:1px solid #4169e1;border-bottom:1px solid #4169e1;border-left:1px solid #4169e1}.site-container.round-bottom{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.dimension-container{margin-top:20px;text-align:center}.content-wrapper{display:flex;flex:1;width:100%;overflow:visible;border:2px solid #b53ae6}.content-buffer{flex:0 0 auto;width:var(--side-buffer-width);top:0;bottom:0;border:2px solid #5eff00;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.content-container{font-size:inherit;flex:1;border:2px solid green;background-color:rgba(0,0,0,0);display:flex;flex-direction:column;overflow:visible;justify-content:center;align-items:center}.virtual-page{display:none}.virtual-page.active{display:flex;flex-direction:column;justify-content:center;align-items:center}.page-content{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%}.bottom-buffer-bar{width:100%;height:var(--navbar-height);background-color:rgba(0,0,0,0);border:2px solid #ff0;display:flex;justify-content:center;align-items:center;text-align:center}.borders-hidden *:not(button):not(.nav-bar button){border-color:rgba(0,0,0,0) !important}.loading-indicator{display:flex;justify-content:center;align-items:center;height:200px;width:100%;font-size:1.2rem;background-color:rgba(0,0,0,0);position:relative}.loading-indicator::after{content:"";width:30px;height:30px;border:3px solid rgba(100,100,100,.2);border-top-color:#4169e1;border-radius:50%;position:absolute;left:calc(50% - 15px);top:calc(50% + 30px);animation:spin .8s linear infinite}.theme-selector{transition:opacity .3s ease}.nav-bar{font-size:inherit;display:flex;justify-content:center;align-items:center;gap:0;background-color:#000;border:2px solid #ff0;color:#fff;position:sticky;top:0;z-index:1000}.nav-bar .nav-container:nth-child(1),.nav-bar .nav-container:nth-child(5){border:2px solid #5eff00}.nav-bar .nav-container:nth-child(2){justify-content:flex-start;flex:0 1 auto;border:2px solid green}.nav-bar .nav-container:nth-child(3){display:flex;justify-content:center;align-items:center;border:2px solid orange;flex:1;min-width:2vw}.nav-bar .nav-container:nth-child(4){font-size:inherit;display:flex;justify-content:flex-end;align-items:center;flex:0 1 auto;border:2px solid purple;position:relative}.nav-bar .nav-container:nth-child(4) button.active{background-color:#4169e1;color:#fff}.nav-bar button{font-size:inherit;flex:0 1 auto;background-color:#000;color:#fff;border:1px solid rgba(51,51,51,.729);padding:2px 2px;border-radius:5px;cursor:pointer;display:flex;justify-content:center;align-items:center}.nav-bar button:hover{background-color:rgba(0,0,0,.8);color:#fff;cursor:pointer;border:1px solid #4169e1}.collapsed-navbar{display:none}.collapsed-navbar h3{font-size:80%;line-height:.9}.collapsed-menu{display:none;flex-direction:column !important;text-align:right;position:absolute;top:100%;right:0;background-color:#000;color:#fff;border:1px solid rgba(51,51,51,.729);border-radius:5px;padding:0;width:fit-content;z-index:9999;overflow:visible;font-size:inherit}.collapsed-menu button{display:flex !important;text-align:right;justify-content:flex-end;align-items:center;width:100%;flex:0 1 auto;padding:2px 2px;background-color:#000;color:#fff;border:1px solid rgba(51,51,51,.729);border-radius:5px;cursor:pointer;white-space:nowrap;overflow:visible !important;font-size:inherit;max-width:none !important;text-overflow:clip !important}.collapsed-menu button:hover{background-color:rgba(0,0,0,.8);color:#fff;cursor:pointer;border:1px solid #4169e1}@media(max-width: 600px){.nav-container:nth-child(4) button:not(.active):not(.collapsed-navbar){display:none}.nav-bar .nav-container:nth-child(4){flex:0 0 auto;width:calc(50vw + 10px);min-width:20px;flex-basis:content}.nav-container:nth-child(4) .collapsed-navbar{display:flex;margin:calc(.03vw + .03vh);padding:0;background-color:#000;color:#fff}.nav-container:nth-child(4) .collapsed-navbar:hover+.collapsed-menu:not(.show),.collapsed-menu:hover:not(.show){display:flex;flex-direction:column}}@media(min-width: 601px){.nav-container:nth-child(4) .collapsed-navbar,.collapsed-menu{display:none !important}}.settings-section{margin-bottom:0px}.settings-section h3{margin-bottom:0px}.slider-container{display:flex;justify-content:center;align-items:center;margin:var(--component-spacing) 0;width:fit-content;max-width:100%;flex:0 1 auto}.slider-selector{display:inline-flex;position:relative;height:auto;border-radius:9999px;background:linear-gradient(-25deg, var(--light-slider-start) 0%, var(--light-slider-end) 100%);overflow:visible;padding:0;gap:4px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}body[data-theme=dark] .slider-selector{background:linear-gradient(-25deg, var(--dark-slider-start) 0%, var(--dark-slider-end) 100%)}.slider-selector .option h3{font-size:var(--component-font-size);position:relative;z-index:3;padding:var(--component-content-padding);white-space:nowrap;overflow:visible;text-overflow:clip;max-width:none}.slider-selector .border-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;clip-path:inset(0 0 0 0 round 9999px)}.border-segment{position:absolute;background:linear-gradient(to right, var(--active-button-start), var(--active-button-end));opacity:1;transition:transform .8s cubic-bezier(0.1, 0.8, 0.2, 1)}.border-top,.border-bottom{height:1px;width:100px}.border-top{top:0}.border-bottom{bottom:0}.option{display:flex;justify-content:center;align-items:center;position:relative;cursor:pointer;z-index:1;transition:color .5s ease;padding:0;border-radius:9999px;overflow:visible}.option-icon{margin-right:5px;display:inline-flex;align-items:center;justify-content:center}.selector-background{position:absolute;top:0;bottom:0;height:100%;border-radius:9999px;background:linear-gradient(145deg, var(--active-button-start), var(--active-button-end));z-index:0}.dynamic-input-wrapper{position:relative;display:inline-flex;max-width:100%;margin:var(--component-spacing) 0;background:linear-gradient(-25deg, var(--light-slider-start) 0%, var(--light-slider-end) 100%);border-radius:var(--input-border-radius)}body[data-theme=dark] .dynamic-input-wrapper{background:linear-gradient(-25deg, var(--dark-slider-start) 0%, var(--dark-slider-end) 100%)}.text-input-inner{padding:2px var(--input-safe-padding);margin:0;width:100%;display:flex;align-items:center}.dynamic-text-input{background:rgba(0,0,0,0) !important;border:none;color:var(--text-color-dark);font-size:var(--component-font-size);font-weight:var(--component-font-weight);font-family:var(--font-family-primary);margin:0;resize:none;overflow:hidden;width:100%;line-height:1.2;text-align:center}.dynamic-text-input:focus{outline:none}.dynamic-text-input::placeholder{color:var(--text-color-dark-secondary);opacity:.7}.form-container{display:flex;flex-direction:column;gap:var(--component-gap);width:100%;margin:var(--component-spacing) auto}.form-field{display:flex;flex-direction:column;margin:var(--component-spacing) 0}.form-field label{display:none}.text-measurement-helper{font-size:var(--component-font-size) !important;font-weight:var(--component-font-weight) !important;font-family:var(--font-family-primary) !important;line-height:1.2 !important;letter-spacing:normal !important;text-transform:none !important;position:absolute !important;visibility:hidden !important;height:auto !important;width:auto !important;white-space:pre !important;pointer-events:none !important;margin:0 !important;padding:0 !important;border:0 !important;outline:0 !important;background:none !important;color:var(--text-color-dark) !important}:root{--active-button-start: #6B46C1;--active-button-end: #2563EB}.button-container{display:inline-flex;justify-content:center;align-items:center;margin:var(--component-spacing) 0;border:1px solid #ff0}.button-component{position:relative;display:inline-flex;align-items:center;justify-content:center;border-radius:9999px;cursor:pointer;overflow:visible;transition:all .3s ease;z-index:0;background:linear-gradient(-25deg, var(--light-slider-start) 0%, var(--light-slider-end) 100%);user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}body[data-theme=dark] .button-component{background:linear-gradient(-25deg, var(--dark-slider-start) 0%, var(--dark-slider-end) 100%)}.button-component.button-text{height:auto;min-width:auto}.button-component.button-circle{border-radius:50%;width:auto;height:auto;aspect-ratio:1}.button-component.button-circle .button-content{padding:2px 2px}.button-component.button-circle .button-content h3{opacity:0}.button-component.button-circle .border-container{display:none}.button-component.button-circle .border-segment{display:none}.button-component .border-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;clip-path:inset(0 0 0 0 round 9999px)}.button-component.active{background:linear-gradient(145deg, var(--active-button-start), var(--active-button-end))}body[data-theme=light] .button-component.active,body[data-theme=dark] .button-component.active{background:linear-gradient(145deg, var(--active-button-start), var(--active-button-end))}.button-component.disabled{opacity:.5;cursor:not-allowed}.button-component.disabled:active{transform:none}.button-component:active:not(.disabled){transform:scale(0.98)}.button-content{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;padding:var(--component-content-padding)}.button-content h3{font-size:var(--component-font-size);font-weight:var(--component-font-weight);font-family:var(--font-family-primary);color:var(--text-color-dark);margin:0;padding:0;white-space:nowrap;overflow:visible;text-overflow:clip;max-width:none;transition:color .3s ease}.button-component.active .button-content h3{color:#fff}.button-component .border-segment{position:absolute;background:linear-gradient(to right, var(--active-button-start), var(--active-button-end));opacity:1;transition:transform .8s cubic-bezier(0.1, 0.8, 0.2, 1);height:1px;width:100px}.button-component .border-top{top:0}.button-component .border-bottom{bottom:0}.button-component .hover-ring{position:absolute;inset:-1px;border-radius:50%;background:linear-gradient(145deg, var(--active-button-start), var(--active-button-end));opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:-1}.button-component .hover-ring::after{content:"";position:absolute;inset:1px;border-radius:50%;background:inherit}body[data-theme=light] .button-component .hover-ring::after{background:linear-gradient(-25deg, var(--light-slider-start) 0%, var(--light-slider-end) 100%)}body[data-theme=dark] .button-component .hover-ring::after{background:linear-gradient(-25deg, var(--dark-slider-start) 0%, var(--dark-slider-end) 100%)}.button-component.hover-ring-active:not(.active) .hover-ring{opacity:1}.button-component.disabled .hover-ring{display:none}.button-component.disabled .border-segment{opacity:0 !important}.multi-select-container .option.active .option-content h3{color:#fff}.multi-select-container{display:flex;justify-content:center;align-items:center;margin:var(--component-spacing) 0;border:1px solid #ff0}.multi-select-selector{display:inline-flex;position:relative;height:auto;border-radius:9999px;background:linear-gradient(-25deg, var(--light-slider-start) 0%, var(--light-slider-end) 100%);overflow:visible;padding:0;gap:4px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}body[data-theme=dark] .multi-select-selector{background:linear-gradient(-25deg, var(--dark-slider-start) 0%, var(--dark-slider-end) 100%)}.multi-select-selector .border-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;clip-path:inset(0 0 0 0 round 9999px)}.multi-select-selector .option{position:relative;display:inline-flex;align-items:center;justify-content:center;border-radius:9999px;cursor:pointer;overflow:visible;transition:all .3s ease;z-index:1;padding:0;min-width:auto;background:rgba(0,0,0,0)}.multi-select-selector .option.active{background:linear-gradient(145deg, var(--active-button-start), var(--active-button-end))}.border-segment{position:absolute;background:linear-gradient(to right, var(--active-button-start), var(--active-button-end));opacity:1;transition:transform .8s cubic-bezier(0.1, 0.8, 0.2, 1)}.border-top,.border-bottom{height:1px;width:100px}.border-top{top:0}.border-bottom{bottom:0}.selector-background{position:absolute;top:0;bottom:0;height:100%;border-radius:9999px;background:linear-gradient(145deg, var(--active-button-start), var(--active-button-end));z-index:0}.multi-select-selector .option-content{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;padding:var(--component-content-padding);gap:5px}.multi-select-selector .option-content h3{font-size:var(--component-font-size);font-weight:var(--component-font-weight);font-family:var(--font-family-primary);color:var(--text-color-dark);margin:0;padding:0;white-space:nowrap;overflow:visible;text-overflow:clip;max-width:none;transition:color .3s ease}.multi-select-selector .option-icon{display:inline-flex;align-items:center;justify-content:center;font-size:inherit}.multi-select-selector .option:active:not(.disabled){transform:scale(0.98)}.multi-select-selector .option.disabled{opacity:.5;cursor:not-allowed}.multi-select-selector .option.disabled:active{transform:none}.multi-select-selector .option.disabled:hover::before{opacity:0 !important}.vue-scroll-picker{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;width:fit-content;height:10em;overflow:hidden;user-select:none;background:linear-gradient(-25deg, var(--light-component-start) 0%, var(--light-component-end) 100%);border:1px solid var(--border-color);border-radius:8px;padding:0;margin:0 auto}body[data-theme=dark] .vue-scroll-picker{background:linear-gradient(-25deg, var(--dark-component-start) 0%, var(--dark-component-end) 100%)}.vue-scroll-picker-3d{perspective-origin:center center}.vue-scroll-picker-drum{position:relative;width:100%;height:100%;transform-style:preserve-3d;transform-origin:center center}.vue-scroll-picker-drum.vue-scroll-picker-drum-transition{transition:transform .3s cubic-bezier(0.25, 0.46, 0.45, 0.94)}.vue-scroll-picker-rotator{display:flex;flex-direction:column;align-items:center;position:relative;transform:translateY(calc(50% - 0.6em));width:fit-content;transition:transform ease 150ms}.vue-scroll-picker-item{display:flex;justify-content:center;align-items:center;transition:all .2s ease}.vue-scroll-picker-item h3{line-height:1.2em;font-size:var(--component-font-size);padding:2px;margin:0;white-space:nowrap;overflow:visible;text-overflow:clip;max-width:none}.vue-scroll-picker-item-3d{position:absolute;width:100%;height:30px;display:flex;justify-content:center;align-items:center;transform-origin:center center;backface-visibility:hidden;will-change:transform,opacity;transition:none}.vue-scroll-picker-item-3d h3{text-shadow:0 1px 2px rgba(0,0,0,.1)}.vue-scroll-picker-item[aria-selected=true]:not(.vue-scroll-picker-item-3d){transform:scale(1.05)}.vue-scroll-picker-item[aria-selected=true].vue-scroll-picker-item-3d h3{filter:brightness(1.1);font-weight:500}.vue-scroll-picker-item[data-value=""],.vue-scroll-picker-item[aria-disabled=true]{opacity:.5}.vue-scroll-picker-item[data-value=""][aria-selected=true],.vue-scroll-picker-item[aria-disabled=true][aria-selected=true]{opacity:.7}.vue-scroll-picker-layer{position:absolute;left:0;right:0;top:0;bottom:0;pointer-events:none}.vue-scroll-picker-layer-top,.vue-scroll-picker-layer-selection,.vue-scroll-picker-layer-bottom{position:absolute;left:0;right:0}.vue-scroll-picker-layer-top{box-sizing:border-box;top:0;height:calc(50% - 1em);pointer-events:auto;cursor:pointer}.vue-scroll-picker-layer-selection{top:calc(50% - 1em);height:2em;border-top:1px solid var(--border-color);border-bottom:1px solid var(--border-color);pointer-events:none}.vue-scroll-picker-layer-bottom{bottom:0;height:calc(50% - 1em);pointer-events:auto;cursor:pointer}[data-theme=dark] .vue-scroll-picker-layer-top{background:linear-gradient(180deg, var(--dark-component-start) 0%, rgba(var(--dark-component-start-rgb), 0.8) 25%, rgba(var(--dark-component-start-rgb), 0.4) 50%, transparent 100%)}[data-theme=dark] .vue-scroll-picker-layer-bottom{background:linear-gradient(0deg, var(--dark-component-start) 0%, rgba(var(--dark-component-start-rgb), 0.8) 25%, rgba(var(--dark-component-start-rgb), 0.4) 50%, transparent 100%)}[data-theme=light] .vue-scroll-picker-layer-top{background:linear-gradient(180deg, var(--light-component-start) 0%, rgba(var(--light-component-start-rgb), 0.8) 25%, rgba(var(--light-component-start-rgb), 0.4) 50%, transparent 100%)}[data-theme=light] .vue-scroll-picker-layer-bottom{background:linear-gradient(0deg, var(--light-component-start) 0%, rgba(var(--light-component-start-rgb), 0.8) 25%, rgba(var(--light-component-start-rgb), 0.4) 50%, transparent 100%)}.vue-scroll-picker-layer-selection::before{content:"";position:absolute;left:0;right:0;top:0;bottom:0;background:linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.05) 50%, transparent 100%)}.vue-scroll-picker-3d *{transform:translateZ(0)}.vue-scroll-picker-3d::before{content:"";position:absolute;inset:0;border-radius:8px;box-shadow:inset 0 2px 4px rgba(0,0,0,.1),inset 0 -2px 4px rgba(0,0,0,.1);pointer-events:none;z-index:1}.content-isolation-container{width:100%;height:100%;display:grid;grid-template-columns:minmax(0, 1fr);align-items:center;justify-items:center;overflow:visible;position:relative;border:1px solid red}.content-flex-container{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;border:1px solid aqua}.settings-container{display:flex;flex-direction:column;align-items:center;width:fit-content;max-width:100%;flex:0 1 auto;box-sizing:border-box;border:1px solid orange}.vendor-request-container{display:flex;flex-direction:column;align-items:center;width:fit-content;max-width:100%;flex:0 1 auto;gap:20px;box-sizing:border-box}.demo-item{display:flex;flex-direction:column;align-items:center;width:100%}#demo-text-input-container,#demo-slider-container,#demo-button-container,#demo-wheel-selector-container,#demo-multi-select-container,#demo-calendar-picker-container,#demo-wheel-time-selector-container,#demo-wheel-date-picker-container,#demo-file-upload-container{border:1px solid #ff0;display:flex;justify-content:center;align-items:center;width:fit-content;max-width:100%;flex:0 1 auto}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.loading-indicator{display:flex;justify-content:center;align-items:center;height:100px;width:100%;font-size:1.2rem;background-color:rgba(0,0,0,0);position:relative}.loading-indicator::after{content:"";width:30px;height:30px;border:3px solid rgba(100,100,100,.2);border-top-color:var(--active-button-end);border-radius:50%;position:absolute;left:calc(50% - 15px);top:calc(50% + 15px);animation:spin .5s linear infinite}.transition-fast{transition:all .2s ease}.transition-normal{transition:all .3s ease}.transition-slow{transition:all .5s ease}.transition-smooth{transition:all .3s cubic-bezier(0.4, 0, 0.2, 1)}body[data-theme=light] h1,body[data-theme=light] h2,body[data-theme=light] h3,body[data-theme=light] p{color:var(--text-color-light)}body[data-theme=dark] h1,body[data-theme=dark] h2,body[data-theme=dark] h3,body[data-theme=dark] p{color:var(--text-color-dark)}',""]);const a=s},659:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},676:(t,e,n)=>{"use strict";n.d(e,{S:()=>v});var i=n(922);const o=new i.Pq0,r=new i.Pq0,s=new i.Pq0,a=new i.Pq0,l=new i.Pq0,h=new i.Pq0,c=new i.Pq0,u=new i.Pq0,d=new i.Pq0,p=new i.Pq0,m=new i.Pq0,g=[new i.Pq0,new i.Pq0,new i.Pq0],f=[new i.Pq0,new i.Pq0,new i.Pq0],y=new i.lMl;class v{static modify(t,e=1,n={}){if(arguments.length>3&&console.warn("LoopSubdivision.modify() now uses a parameter object. See readme for more info!"),"object"!=typeof n&&(n={}),void 0===n.split&&(n.split=!0),void 0===n.uvSmooth&&(n.uvSmooth=!1),void 0===n.preserveEdges&&(n.preserveEdges=!1),void 0===n.flatOnly&&(n.flatOnly=!1),void 0===n.maxTriangles&&(n.maxTriangles=1/0),void 0===n.weight&&(n.weight=1),!isNaN(n.weight)&&isFinite(n.weight)||(n.weight=1),n.weight=Math.max(0,Math.min(1,n.weight)),!k(t))return t;let i=t.clone();if(n.split){const t=v.edgeSplit(i);i.dispose(),i=t}for(let t=0;t<e;t++)if(i.attributes.position.count/3<n.maxTriangles){let t;t=n.flatOnly?v.flat(i,n):v.smooth(i,n),i.groups.forEach((e=>{t.addGroup(4*e.start,4*e.count,e.materialIndex)})),i.dispose(),i=t}return i}static edgeSplit(t){if(!k(t))return t;const e=null!==t.index?t.toNonIndexed():t.clone(),n=new i.LoY,o=S(e),d=e.attributes.position.count,p=e.getAttribute("position"),m=e.getAttribute("normal"),g={},f=[],v={},b=[];for(let t=0;t<d;t+=3){h.fromBufferAttribute(p,t+0),c.fromBufferAttribute(p,t+1),u.fromBufferAttribute(p,t+2),a.fromBufferAttribute(m,t);const e=E(h),n=E(c),i=E(u),o=y.set(h,c,u).getArea();if(b.push(!x(o,0)),!b[t/3]){f.push([]);continue}w=a,M=h,C=c,D=u,l.subVectors(M,C),w.subVectors(C,D),w.cross(l).normalize();const r=E(a),s=[`${e}_${n}_${r}`,`${n}_${e}_${r}`,`${n}_${i}_${r}`,`${i}_${n}_${r}`,`${i}_${e}_${r}`,`${e}_${i}_${r}`],d=t/3;for(let t=0;t<s.length;t++)g[s[t]]||(g[s[t]]=[]),g[s[t]].push(d),v[s[t]]||(0!==t&&1!==t||(v[s[t]]=h.distanceTo(c)),2!==t&&3!==t||(v[s[t]]=c.distanceTo(u)),4!==t&&5!==t||(v[s[t]]=u.distanceTo(h)));f.push([s[0],s[2],s[4]])}var w,M,C,D;o.forEach((t=>{const o=e.getAttribute(t);if(!o)return;const r=z(o,t);n.setAttribute(t,new i.THS(r,o.itemSize))}));const P=e.morphAttributes;for(const t in P){const e=[],o=P[t];for(let n=0,r=o.length;n<r;n++){if(o[n].count!==d)continue;const r=z(o[n],t,!0);e.push(new i.THS(r,o[n].itemSize))}n.morphAttributes[t]=e}return n.morphTargetsRelative=e.morphTargetsRelative,e.dispose(),n;function z(t,i,o=!1){const a=d*t.itemSize*4,l=new t.array.constructor(a),p="position"===i&&!o&&e.groups.length>0;let m,y,x=0,w=0,E=t.itemSize;for(let i=0;i<d;i+=3){if(!b[i/3]){w+=3;continue}h.fromBufferAttribute(t,i+0),c.fromBufferAttribute(t,i+1),u.fromBufferAttribute(t,i+2);const o=i/3,a=f[o][0],d=f[o][1],S=f[o][2],k=g[a].length,M=g[d].length,C=g[S].length,D=3*x/E/3;if(0==k+M+C-3)T(l,x,E,h,c,u),x+=3*E;else{const t=v[a],e=v[d],n=v[S];(t>e||M<=1)&&(t>n||C<=1)&&k>1?(r.copy(h).add(c).divideScalar(2),C>1?(s.copy(u).add(h).divideScalar(2),T(l,x,E,h,r,s),x+=3*E,T(l,x,E,r,u,s),x+=3*E):(T(l,x,E,h,r,u),x+=3*E),M>1?(s.copy(c).add(u).divideScalar(2),T(l,x,E,r,c,s),x+=3*E,T(l,x,E,s,u,r),x+=3*E):(T(l,x,E,c,u,r),x+=3*E)):(e>n||C<=1)&&M>1?(r.copy(c).add(u).divideScalar(2),k>1?(s.copy(h).add(c).divideScalar(2),T(l,x,E,r,s,c),x+=3*E,T(l,x,E,s,r,h),x+=3*E):(T(l,x,E,c,r,h),x+=3*E),C>1?(s.copy(u).add(h).divideScalar(2),T(l,x,E,r,u,s),x+=3*E,T(l,x,E,s,h,r),x+=3*E):(T(l,x,E,u,h,r),x+=3*E)):C>1?(r.copy(u).add(h).divideScalar(2),M>1?(s.copy(c).add(u).divideScalar(2),T(l,x,E,u,r,s),x+=3*E,T(l,x,E,r,c,s),x+=3*E):(T(l,x,E,u,r,c),x+=3*E),k>1?(s.copy(h).add(c).divideScalar(2),T(l,x,E,h,s,r),x+=3*E,T(l,x,E,s,c,r),x+=3*E):(T(l,x,E,h,c,r),x+=3*E)):(T(l,x,E,h,c,u),x+=3*E)}p&&e.groups.forEach((t=>{t.start===i-w&&(void 0!==m&&void 0!==y&&n.addGroup(m,D-m,y),m=D,y=t.materialIndex)})),w=0}const S=3*x/E,k=new t.array.constructor(S);for(let t=0;t<S;t++)k[t]=l[t];return p&&void 0!==m&&void 0!==y&&n.addGroup(m,3*x/E/3-m,y),k}}static flat(t,e={}){if(!k(t))return t;const n=null!==t.index?t.toNonIndexed():t.clone(),o=new i.LoY,r=S(n),s=n.attributes.position.count;r.forEach((t=>{const i=n.getAttribute(t);i&&o.setAttribute(t,v.flatAttribute(i,s,e))}));const a=n.morphAttributes;for(const t in a){const n=[],i=a[t];for(let t=0,o=i.length;t<o;t++)i[t].count===s&&n.push(v.flatAttribute(i[t],s,e));o.morphAttributes[t]=n}return o.morphTargetsRelative=n.morphTargetsRelative,n.dispose(),o}static flatAttribute(t,e,n={}){const o=e*t.itemSize*4,r=new t.array.constructor(o);let s=0,a=t.itemSize;for(let n=0;n<e;n+=3)h.fromBufferAttribute(t,n+0),c.fromBufferAttribute(t,n+1),u.fromBufferAttribute(t,n+2),d.copy(h).add(c).divideScalar(2),p.copy(c).add(u).divideScalar(2),m.copy(u).add(h).divideScalar(2),T(r,s,a,h,d,m),s+=3*a,T(r,s,a,c,p,d),s+=3*a,T(r,s,a,u,m,p),s+=3*a,T(r,s,a,d,p,m),s+=3*a;return new i.THS(r,t.itemSize)}static smooth(t,e={}){if("object"!=typeof e&&(e={}),void 0===e.uvSmooth&&(e.uvSmooth=!1),void 0===e.preserveEdges&&(e.preserveEdges=!1),!k(t))return t;const n=null!==t.index?t.toNonIndexed():t.clone(),r=v.flat(n,e),s=new i.LoY,a=S(n),h=n.attributes.position.count,c=n.getAttribute("position"),u=r.getAttribute("position"),y={},b={},x={},w={};function M(t,e,n){b[t]||(b[t]={}),b[t][e]||(b[t][e]=[]),b[t][e].push(n)}function C(t,e){x[t]||(x[t]=[]),x[t].push(e)}function D(t,e){w[t]||(w[t]=new Set),w[t].add(e)}for(let t=0;t<h;t+=3){const e=E(f[0].fromBufferAttribute(c,t+0)),n=E(f[1].fromBufferAttribute(c,t+1)),i=E(f[2].fromBufferAttribute(c,t+2));M(e,n,t+1),M(e,i,t+2),M(n,e,t+0),M(n,i,t+2),M(i,e,t+0),M(i,n,t+1),d.copy(f[0]).add(f[1]).divideScalar(2),p.copy(f[1]).add(f[2]).divideScalar(2),m.copy(f[2]).add(f[0]).divideScalar(2);const o=E(d),r=E(p),s=E(m);C(o,t+2),C(r,t+0),C(s,t+1),D(e,o),D(e,s),D(n,o),D(n,r),D(i,r),D(i,s)}for(let t=0;t<r.attributes.position.count;t++){const e=E(l.fromBufferAttribute(u,t));y[e]||(y[e]=[]),y[e].push(t)}a.forEach((t=>{const e=n.getAttribute(t),o=r.getAttribute(t);if(void 0===e||void 0===o)return;const a=z(t,e,o);s.setAttribute(t,new i.THS(a,o.itemSize))}));const P=n.morphAttributes;for(const t in P){const n=[],o=P[t];for(let r=0,s=o.length;r<s;r++){if(o[r].count!==h)continue;const s=o[r],a=v.flatAttribute(o[r],o[r].count,e),l=z(t,s,a);n.push(new i.THS(l,a.itemSize))}s.morphAttributes[t]=n}return s.morphTargetsRelative=n.morphTargetsRelative,r.dispose(),n.dispose(),s;function z(t,n,i){const s=r.attributes.position.count*i.itemSize,a=new n.array.constructor(s);let h=0;for(let s=0;s<r.attributes.position.count;s+=3){for(let r=0;r<3;r++)if("uv"!==t||e.uvSmooth)if("normal"===t){g[r].fromBufferAttribute(u,s+r);const t=E(g[r]),e=y[t],n=Object.keys(e).length,a=.75/n,l=1-a*n;f[r].fromBufferAttribute(i,s+r),f[r].multiplyScalar(l),e.forEach((t=>{o.fromBufferAttribute(i,t),o.multiplyScalar(a),f[r].add(o)}))}else{f[r].fromBufferAttribute(i,s+r),g[r].fromBufferAttribute(u,s+r);const t=E(g[r]),a=b[t],h=x[t];if(a){if(e.preserveEdges){const e=w[t];let n=!0;for(const t of e)x[t].length%2!=0&&(n=!1);if(!n)continue}const i=Object.keys(a).length,s=(c=1/i/i,d=1/i*(5/8-Math.pow(3/8+1/4*Math.cos(2*Math.PI/i),2)),(1-(p=e.weight))*c+p*d),h=1-s*i;f[r].multiplyScalar(h);for(let t in a){const e=a[t];o.set(0,0,0);for(let t=0;t<e.length;t++)o.add(l.fromBufferAttribute(n,e[t]));o.divideScalar(e.length),o.multiplyScalar(s),f[r].add(o)}}else if(h&&2===h.length){const t=h.length,e=.125,i=1-e*t;f[r].multiplyScalar(i),h.forEach((t=>{o.fromBufferAttribute(n,t),o.multiplyScalar(e),f[r].add(o)}))}}else f[r].fromBufferAttribute(i,s+r);T(a,h,i.itemSize,f[0],f[1],f[2]),h+=3*i.itemSize}var c,d,p;return a}}}const b=Math.pow(10,2);function x(t,e,n=1e-5){return t<e+n&&t>e-n}function w(t,e=b){let n=(i=t*e)+(i>0?.5:-.5)|0;var i;return 0==n&&(n=0),`${n}`}function E(t,e=b){return`${w(t.x,e)},${w(t.y,e)},${w(t.z,e)}`}function S(t){const e=Object.keys(t.attributes);return Array.from(new Set(["position","normal","uv"].concat(e)))}function T(t,e,n,i,o,r){n>=1&&(t[e+0+0*n]=i.x,t[e+0+1*n]=o.x,t[e+0+2*n]=r.x),n>=2&&(t[e+1+0*n]=i.y,t[e+1+1*n]=o.y,t[e+1+2*n]=r.y),n>=3&&(t[e+2+0*n]=i.z,t[e+2+1*n]=o.z,t[e+2+2*n]=r.z),n>=4&&(t[e+3+0*n]=i.w,t[e+3+1*n]=o.w,t[e+3+2*n]=r.w)}function k(t){return void 0===t?(console.warn("LoopSubdivision: Geometry provided is undefined"),!1):t.isBufferGeometry?void 0===t.attributes.position?(console.warn("LoopSubdivision: Geometry provided missing required 'position' attribute"),!1):(void 0===t.attributes.normal&&t.computeVertexNormals(),!0):(console.warn("LoopSubdivision: Geometry provided is not 'BufferGeometry' type"),!1)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},832:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ThreeD_Drum_Selector:()=>v,default:()=>b});var i=n(676),o=n(494);function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e,n,i){var o=a(u(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},a.apply(null,arguments)}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function h(t,e,n){return e=u(e),function(t,e){if(e&&("object"==l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function f(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var v=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m(this,e),(n=h(this,e,[t,Object.assign({texture:"none",enableInteraction:!0,rotationSpeed:0,backgroundColor:1710618},i)])).numberMeshes=[],n.numberGroup=null,n.font=null,n.isLoading=!1,console.log("[TextGeometry Drum Engine] Initialized for dynamic TextGeometry"),n}return d(e,t),f(e,[{key:"init",value:function(){s(e,"init",this,3)([]),this.isInitialized&&(this.mesh&&(this.scene.remove(this.mesh),this.mesh.geometry&&this.mesh.geometry.dispose(),this.mesh.material&&(Array.isArray(this.mesh.material)?this.mesh.material.forEach((function(t){return t.dispose()})):this.mesh.material.dispose()),this.mesh=null),this.numberGroup=new THREE.Group,this.scene.add(this.numberGroup),this.numberGroup.rotation.z=-Math.PI/2,this.mesh=this.numberGroup,this.loadFontAndCreateNumbers())}},{key:"loadFontAndCreateNumbers",value:function(){var t=this;if(window.THREE){if(!window.THREE.FontLoader)return console.warn("[TextGeometry Drum Engine] FontLoader not available, using fallback boxes"),void this.createFallbackNumbers();var e=new THREE.FontLoader;this.isLoading=!0,e.load("https://cdn.jsdelivr.net/npm/three@0.128.0/examples/fonts/helvetiker_regular.typeface.json",(function(e){console.log("[TextGeometry Drum Engine] Font loaded successfully"),t.font=e,t.createTextGeometryNumbers(),t.isLoading=!1}),(function(t){console.log("[TextGeometry Drum Engine] Loading font...",t)}),(function(e){console.error("[TextGeometry Drum Engine] Error loading font:",e),t.createFallbackNumbers(),t.isLoading=!1}))}else console.error("[TextGeometry Drum Engine] Three.js not loaded")}},{key:"createTextGeometryNumbers",value:function(){if(this.font){this.clearNumbers();for(var t=2*Math.PI/10,e=0;e<10;e++){var n=getComputedStyle(document.documentElement),i=parseFloat(n.fontSize)*(parseFloat(n.getPropertyValue("--component-font-size"))||.9),o=i*(2.5/(this.container.clientHeight||300))*.4;console.log("[TextGeometry] Computed:",i+"px","→",o+" units");var r=new THREE.TextGeometry(e.toString(),{font:this.font,size:o,height:void 0!==this.config.textDepth?this.config.textDepth:.02,curveSegments:12,bevelEnabled:!1});r.center(),r.rotateZ(Math.PI/2);for(var s=r.attributes.position,a=new THREE.Vector3,l=0;l<s.count;l++){a.x=s.getX(l),a.y=s.getY(l),a.z=s.getZ(l);var h=e*t+-5*a.x*(.8*t),c=.3+a.z;s.setX(l,Math.cos(h)*c),s.setZ(l,Math.sin(h)*c)}r.attributes.position.needsUpdate=!0,r.computeVertexNormals(),r.computeBoundingBox(),console.log("[TextGeometry ".concat(e,"] Bounding box:"),r.boundingBox),r.groups&&r.groups.length>0?(console.log("[TextGeometry] Groups found: ".concat(r.groups.length)),r.groups.forEach((function(t,e){console.log("  Group ".concat(e,": start=").concat(t.start,", count=").concat(t.count,", materialIndex=").concat(t.materialIndex))}))):console.log("[TextGeometry] No groups found - all faces use material index 0"),r.clearGroups();var u=r.index?r.index.count/3:r.attributes.position.count/3,d=Math.floor(.4*u);r.addGroup(0,3*d,0),r.addGroup(3*u-3*d,3*d,1),r.addGroup(3*d,3*(u-2*d),0),console.log("[TextGeometry ".concat(e,"] Created groups: front=").concat(d,", back=").concat(d,", sides=").concat(u-2*d));var p=[new THREE.MeshStandardMaterial({color:16777215,emissive:4473924,emissiveIntensity:.2,side:THREE.FrontSide}),new THREE.MeshStandardMaterial({transparent:!0,opacity:0})],m=new THREE.Mesh(r,p);this.numberGroup.add(m),this.numberMeshes.push(m),console.log("[TextGeometry Drum Engine] Created curved TextGeometry for ".concat(e))}console.log("[TextGeometry Drum Engine] All curved TextGeometry numbers created"),this.config.addBlockingCylinder&&this.createBlockingCylinder()}else console.error("[TextGeometry Drum Engine] No font loaded")}},{key:"createBlockingCylinder",value:function(){var t,e=0,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(this.numberMeshes);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i){var o=(new THREE.Box3).setFromObject(i),s=o.max.y-o.min.y;e=Math.max(e,s)}}}catch(t){n.e(t)}finally{n.f()}var a=1.05*e;console.log("[TextGeometry] Auto-sized drum width:",a,"based on max text height:",e);var l=new THREE.CylinderGeometry(.28,.28,a,32,1,!0),h=new THREE.MeshPhysicalMaterial({color:0,metalness:0,roughness:0,clearcoat:1,clearcoatRoughness:0,reflectivity:1,envMapIntensity:1.2,side:THREE.DoubleSide}),c=new THREE.Mesh(l,h);this.numberGroup.add(c),console.log("[TextGeometry Drum Engine] Added blocking cylinder")}},{key:"createFallbackNumbers",value:function(){console.log("[TextGeometry Drum Engine] Creating fallback box placeholders"),this.clearNumbers();for(var t=2*Math.PI/10,e=0;e<10;e++){var n=new THREE.BoxGeometry(.1,.15,.02),i=new THREE.MeshStandardMaterial({color:16777215,emissive:4473924,emissiveIntensity:.2,side:THREE.FrontSide}),o=new THREE.Mesh(n,i),r=e*t;o.position.x=.3*Math.cos(r),o.position.z=.3*Math.sin(r),o.position.y=0,o.rotation.y=r+Math.PI/2,o.rotation.z=Math.PI/2,this.numberGroup.add(o),this.numberMeshes.push(o)}console.log("[TextGeometry Drum Engine] Fallback boxes created")}},{key:"updateNumber",value:function(t,e){if(t<0||t>=this.numberMeshes.length)console.error("[TextGeometry Drum Engine] Invalid index for updateNumber");else if(this.font){var n=this.numberMeshes[t];this.numberGroup.remove(n),n.geometry&&n.geometry.dispose(),n.material&&n.material.dispose();var i=getComputedStyle(document.documentElement),o=parseFloat(i.fontSize)*(parseFloat(i.getPropertyValue("--component-font-size"))||.9)*(2.5/(this.container.clientHeight||300))*.4,r=new THREE.TextGeometry(e.toString(),{font:this.font,size:o,height:.02,curveSegments:12,bevelEnabled:!1});r.center(),r.rotateZ(Math.PI/2);for(var s=2*Math.PI/10,a=r.attributes.position,l=new THREE.Vector3,h=0;h<a.count;h++){l.x=a.getX(h),l.y=a.getY(h),l.z=a.getZ(h);var c=t*s+-5*l.x*(.8*s),u=.3+l.z;a.setX(h,Math.cos(c)*u),a.setZ(h,Math.sin(c)*u)}r.attributes.position.needsUpdate=!0,r.computeVertexNormals();var d=new THREE.MeshStandardMaterial({color:16777215,emissive:4473924,emissiveIntensity:.2,side:THREE.FrontSide}),p=new THREE.Mesh(r,d);this.numberGroup.add(p),this.numberMeshes[t]=p,console.log("[TextGeometry Drum Engine] Updated position ".concat(t," to value ").concat(e))}else console.warn("[TextGeometry Drum Engine] Cannot update - no font loaded")}},{key:"getValues",value:function(){return["0","1","2","3","4","5","6","7","8","9"]}},{key:"setValues",value:function(t){var e=this;Array.isArray(t)&&10===t.length?t.forEach((function(t,n){e.updateNumber(n,t)})):console.error("[TextGeometry Drum Engine] setValues requires array of 10 values")}},{key:"clearNumbers",value:function(){var t=this;this.numberMeshes.forEach((function(e){e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((function(t){return t.dispose()})):e.material.dispose()),t.numberGroup.remove(e)})),this.numberMeshes=[]}},{key:"getCurrentValue",value:function(){if(!this.numberGroup)return 0;var t=(this.numberGroup.rotation.y%(2*Math.PI)+2*Math.PI)%(2*Math.PI),e=2*Math.PI/10;return Math.round(t/e)%10}},{key:"dispose",value:function(){this.clearNumbers(),this.numberGroup&&(this.scene.remove(this.numberGroup),this.numberGroup=null),this.font=null,s(e,"dispose",this,3)([]),console.log("[TextGeometry Drum Engine] Disposed")}}])}(function(){return f((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,t),this.container="string"==typeof e?document.getElementById(e):e,this.container?(this.config=this.mergeConfig(n),this.renderer=null,this.scene=null,this.camera=null,this.mesh=null,this.lights={},this.animationId=null,this.isInitialized=!1,this.isDragging=!1,this.isGesturing=!1,this.previousMousePosition={x:0,y:0},this.rotationVelocity={x:0,y:0},this.autoRotationTime=0,this.gestureState={type:"none",startTime:0,lastUpdateTime:0,transitionCooldown:100,swipeVelocity:{x:0,y:0},twistAngle:null,twistVelocity:0,pinchDistance:null,pinchVelocity:0},this.initialWidth=null,this.initialHeight=null,this.textureCanvas=null,this.textureContext=null,this.texture=null,this.fogPlane=null,this.fogTexture=null,this.fogCanvas=null,this.fogContext=null,this.decals=[],this.decalMaterials=new Map,this.animate=this.animate.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onGestureStart=this.onGestureStart.bind(this),this.onGestureChange=this.onGestureChange.bind(this),this.onGestureEnd=this.onGestureEnd.bind(this)):console.error("[3D Component Engine] Container not found")}),[{key:"mergeConfig",value:function(t){return Object.assign({width:100,height:100,responsive:!1,geometry:"roundedBox",geometryParams:{width:1,height:1,depth:1,radius:.15,smoothness:32,sphereRadius:.5,widthSegments:32,heightSegments:32,torusRadius:.5,tubeRadius:.2,radialSegments:16,tubularSegments:100,cylinderRadiusTop:.5,cylinderRadiusBottom:.5,cylinderHeight:1,cylinderRadialSegments:32},enableSubdivision:!0,subdivisionIterations:1,subdivisionParams:{split:!0,uvSmooth:!0,preserveEdges:!1,flatOnly:!1,maxTriangles:1e4},material:"physical",materialParams:{color:4210752,metalness:0,roughness:0,clearcoat:1,clearcoatRoughness:0,reflectivity:1,envMapIntensity:1.2},texture:"animated",textureParams:{animationSpeed:.001,tunnelRadius:15,tunnelCount:6,solidColor:16777215},enableAnimation:!0,rotationSpeed:0,enableInteraction:!0,restrictRotationAxis:null,lighting:"default",backgroundColor:0,cameraPosition:{x:0,y:0,z:1.9},cameraFOV:50},t)}},{key:"init",value:function(){var t=this;this.isInitialized?console.warn("[3D Component Engine] Already initialized"):(console.log("[3D Component Engine] Initializing with config:",this.config),this.setupRenderer(),this.setupCamera(),this.setupScene(),this.setupLighting(),this.createFogPlane(),this.createTexture(),this.createGeometry(),this.createMaterial(),this.createMesh(),this.config.enableInteraction&&this.setupInteraction(),this.isInitialized=!0,this.animate(0),this.config.responsive&&this.updateResponsiveSize(),setTimeout((function(){console.log("[3D Engine] FINAL DIMENSIONS after init:"),console.log("[3D Engine] Container: ".concat(t.container.offsetWidth,"x").concat(t.container.offsetHeight)),console.log("[3D Engine] Canvas: ".concat(t.renderer.domElement.offsetWidth,"x").concat(t.renderer.domElement.offsetHeight)),console.log("[3D Engine] Gap width: ".concat(t.container.offsetWidth-t.renderer.domElement.offsetWidth,"px")),console.log("[3D Engine] Gap height: ".concat(t.container.offsetHeight-t.renderer.domElement.offsetHeight,"px"))}),100),console.log("[3D Component Engine] Initialization complete"))}},{key:"setupRenderer",value:function(){console.log("[3D Engine] Using THREE version: ".concat("undefined"!=typeof THREE?THREE.REVISION:"undefined")),console.log("[3D Engine] THREE source: ".concat("undefined"!=typeof THREE?"global window.THREE":"unknown")),console.log("[3D Engine] Responsive: ".concat(this.config.responsive)),this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio);var t=this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width;if(console.log("[3D Engine] Setting up renderer - responsive: ".concat(this.config.responsive,", calculated size: ").concat(t)),this.renderer.setSize(t,t),console.log("[3D Engine] After setSize - Canvas style.width: ".concat(this.renderer.domElement.style.width)),console.log("[3D Engine] After setSize - Canvas style.height: ".concat(this.renderer.domElement.style.height)),this.container.appendChild(this.renderer.domElement),this.config.responsive||(this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%"),this.renderer.domElement.style.display="block",console.log("[3D Engine] Canvas actual size: ".concat(this.renderer.domElement.width,"x").concat(this.renderer.domElement.height)),console.log("[3D Engine] Canvas style.width raw: '".concat(this.renderer.domElement.style.width,"'")),console.log("[3D Engine] Canvas style.height raw: '".concat(this.renderer.domElement.style.height,"'")),console.log("[3D Engine] Canvas style size FINAL: ".concat(this.renderer.domElement.style.width,"x").concat(this.renderer.domElement.style.height)),console.log("[3D Engine] Device pixel ratio: ".concat(window.devicePixelRatio)),console.log("[3D Engine] Container offsetWidth BEFORE flex: ".concat(this.container.offsetWidth)),console.log("[3D Engine] Container offsetHeight BEFORE flex: ".concat(this.container.offsetHeight)),console.log("[3D Engine] Container clientWidth BEFORE flex: ".concat(this.container.clientWidth)),console.log("[3D Engine] Container clientHeight BEFORE flex: ".concat(this.container.clientHeight)),this.container.style.display="flex",this.container.style.justifyContent="center",this.container.style.alignItems="center",this.container.style.flex="0 1 auto",this.container.style.maxWidth="100%",this.config.responsive||(this.container.style.width="".concat(this.config.width,"px"),this.container.style.height="".concat(this.config.height,"px")),this.container.style.position="relative",this.container.style.overflow="hidden",this.container.style.margin="0 auto",this.container.style.border="1px solid red",console.log("[3D Engine] Container setup complete. Responsive: ".concat(this.config.responsive)),console.log("[3D Engine] Container offsetWidth: ".concat(this.container.offsetWidth)),console.log("[3D Engine] Container offsetHeight: ".concat(this.container.offsetHeight)),console.log("[3D Engine] Canvas offsetWidth: ".concat(this.renderer.domElement.offsetWidth)),console.log("[3D Engine] Canvas offsetHeight: ".concat(this.renderer.domElement.offsetHeight)),console.log("[3D Engine] Parent offsetWidth: ".concat(this.container.parentElement?this.container.parentElement.offsetWidth:"N/A")),"undefined"!=typeof window&&window.getComputedStyle){var e=window.getComputedStyle(this.container);console.log("[3D Engine] Container computed styles:"),console.log("[3D Engine]   - padding: ".concat(e.padding)),console.log("[3D Engine]   - margin: ".concat(e.margin)),console.log("[3D Engine]   - box-sizing: ".concat(e.boxSizing)),console.log("[3D Engine]   - min-width: ".concat(e.minWidth)),console.log("[3D Engine]   - min-height: ".concat(e.minHeight)),console.log("[3D Engine]   - width: ".concat(e.width)),console.log("[3D Engine]   - height: ".concat(e.height))}}},{key:"setupCamera",value:function(){this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width,this.camera=new THREE.PerspectiveCamera(this.config.cameraFOV,1,.1,100),this.camera.position.set(this.config.cameraPosition.x,this.config.cameraPosition.y,this.config.cameraPosition.z),this.camera.lookAt(0,0,0)}},{key:"setupScene",value:function(){this.scene=new THREE.Scene;var t=new THREE.PMREMGenerator(this.renderer);this.scene.environment=t.fromScene(this.createEnvironment()).texture}},{key:"setupLighting",value:function(){"none"!==this.config.lighting&&"default"===this.config.lighting&&(this.lights.main=new THREE.PointLight(16777215,2.5),this.lights.main.position.set(-1.5,1.7,2),this.scene.add(this.lights.main),this.lights.front=new THREE.DirectionalLight(16777215,.3),this.lights.front.position.set(.5,.5,3),this.lights.front.target.position.set(0,0,0),this.scene.add(this.lights.front),this.lights.leftFill=new THREE.DirectionalLight(16777215,.2),this.lights.leftFill.position.set(-3,0,1),this.lights.leftFill.target.position.set(0,0,0),this.scene.add(this.lights.leftFill),this.lights.rightFill=new THREE.DirectionalLight(16777215,.15),this.lights.rightFill.position.set(3,-.5,1),this.lights.rightFill.target.position.set(0,0,0),this.scene.add(this.lights.rightFill),this.lights.ambient=new THREE.AmbientLight(16777215,.15),this.scene.add(this.lights.ambient),this.lights.rim=new THREE.DirectionalLight(16777215,1.5),this.lights.rim.position.set(0,-2,-2),this.lights.rim.target.position.set(0,0,0),this.scene.add(this.lights.rim))}},{key:"createFogPlane",value:function(){var t=new THREE.Vector2;this.renderer.getSize(t);var e=this.camera.position.z- -1.5,n=this.config.cameraFOV*Math.PI/180,i=2*Math.tan(n/2)*e,o=t.x/t.y,r=i*o,s=1.05*r,a=1.05*i;console.log("[3D Engine] Creating fog plane based on renderer pixels"),console.log("[3D Engine] Renderer size: ".concat(t.x,"x").concat(t.y,"px")),console.log("[3D Engine] Aspect ratio: ".concat(o.toFixed(2))),console.log("[3D Engine] Camera FOV: ".concat(this.config.cameraFOV,"°")),console.log("[3D Engine] Camera position: z=".concat(this.camera.position.z)),console.log("[3D Engine] Distance from camera to fog plane: ".concat(e)),console.log("[3D Engine] Visible area at fog plane: ".concat(r.toFixed(2)," x ").concat(i.toFixed(2)," units")),console.log("[3D Engine] Fog plane size (with 5% padding): ".concat(s.toFixed(2)," x ").concat(a.toFixed(2)," units")),console.log("[3D Engine] Responsive mode: ".concat(this.config.responsive));var l=new THREE.PlaneGeometry(s,a,32,32);this.fogCanvas=document.createElement("canvas"),this.fogCanvas.width=512,this.fogCanvas.height=512,this.fogContext=this.fogCanvas.getContext("2d"),this.fogTexture=new THREE.CanvasTexture(this.fogCanvas);var h=new THREE.MeshBasicMaterial({map:this.fogTexture,transparent:!0,opacity:.8,side:THREE.DoubleSide,blending:THREE.AdditiveBlending});this.fogPlane=new THREE.Mesh(l,h),this.fogPlane.position.set(0,0,-1.5),this.scene.add(this.fogPlane);var c=new THREE.EdgesGeometry(l),u=new THREE.LineBasicMaterial({color:65280}),d=new THREE.LineSegments(c,u);this.fogPlane.add(d)}},{key:"createEnvironment",value:function(){var t=new THREE.Scene,e=new THREE.DirectionalLight(16777215,2);e.position.set(1,1,1),t.add(e);var n=new THREE.DirectionalLight(16777215,1);n.position.set(-1,1,-1),t.add(n);var i=new THREE.AmbientLight(16777215,1);return t.add(i),t}},{key:"createTexture",value:function(){if("none"!==this.config.texture)if("animated"===this.config.texture)console.log("[3D Component Engine] Creating animated texture for geometry:",this.config.geometry),"cylinder"===this.config.geometry?this.createCylinderTextures():"tube"===this.config.geometry?(console.log("[3D Component Engine] Calling createTubeTextures for tube geometry"),this.createTubeTextures()):"cone"===this.config.geometry?this.createConeTextures():(this.textureCanvas=document.createElement("canvas"),this.textureCanvas.width=512,this.textureCanvas.height=512,this.textureContext=this.textureCanvas.getContext("2d"),this.texture=new THREE.CanvasTexture(this.textureCanvas),console.log("[3D Component Engine] Using square texture for geometry:",this.config.geometry));else if("solid"===this.config.texture){var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");e.fillStyle="#".concat(this.config.textureParams.solidColor.toString(16).padStart(6,"0")),e.fillRect(0,0,1,1),this.texture=new THREE.CanvasTexture(t)}}},{key:"createCylinderTextures",value:function(){var t=this.config.geometryParams,e=512,n=(t.cylinderRadiusTop+t.cylinderRadiusBottom)/2,i=2*Math.PI*n/t.cylinderHeight,o=Math.round(e*i);this.sideCanvas=document.createElement("canvas"),this.sideCanvas.width=o,this.sideCanvas.height=512,this.sideContext=this.sideCanvas.getContext("2d"),this.sideTexture=new THREE.CanvasTexture(this.sideCanvas),this.capCanvas=document.createElement("canvas"),this.capCanvas.width=e,this.capCanvas.height=e,this.capContext=this.capCanvas.getContext("2d"),this.capTexture=new THREE.CanvasTexture(this.capCanvas),console.log("[3D Component Engine] Cylinder textures created:"),console.log("  Side texture: ".concat(o,"x").concat(512,"px (aspect ").concat(i.toFixed(2),":1)")),console.log("  Cap texture: ".concat(e,"x").concat(e,"px (square)")),this.textureCanvas=this.sideCanvas,this.textureContext=this.sideContext}},{key:"createTubeTextures",value:function(){var t=this.config.geometryParams,e=t.tubeRadius||.25,n=2*Math.PI*e/(t.tubeLength||2),i=Math.round(512*n);this.textureCanvas=document.createElement("canvas"),this.textureCanvas.width=i,this.textureCanvas.height=512,this.textureContext=this.textureCanvas.getContext("2d"),this.texture=new THREE.CanvasTexture(this.textureCanvas),console.log("[3D Component Engine] Tube texture created:"),console.log("  Side texture: ".concat(i,"x").concat(512,"px (aspect ").concat(n.toFixed(2),":1)")),console.log("  No caps - tube is open-ended")}},{key:"createConeTextures",value:function(){var t=this.config.geometryParams,e=512,n=t.coneRadius||.5,i=t.coneHeight||1,o=Math.sqrt(i*i+n*n),r=2*Math.PI*n/o,s=Math.round(e*r);this.sideCanvas=document.createElement("canvas"),this.sideCanvas.width=s,this.sideCanvas.height=512,this.sideContext=this.sideCanvas.getContext("2d"),this.sideTexture=new THREE.CanvasTexture(this.sideCanvas),this.baseCanvas=document.createElement("canvas"),this.baseCanvas.width=e,this.baseCanvas.height=e,this.baseContext=this.baseCanvas.getContext("2d"),this.baseTexture=new THREE.CanvasTexture(this.baseCanvas),console.log("[3D Component Engine] Cone textures created (sophisticated approach):"),console.log("  Side texture: ".concat(s,"x").concat(512,"px (aspect ").concat(r.toFixed(2),":1)")),console.log("  Base texture: ".concat(e,"x").concat(e,"px (square)")),console.log("  Cone dimensions: radius=".concat(n,", height=").concat(i,", slantHeight=").concat(o.toFixed(2))),this.textureCanvas=this.sideCanvas,this.textureContext=this.sideContext}},{key:"createTorusTextures",value:function(){console.log("[3D Component Engine] Torus texture generation - not yet implemented")}},{key:"createSphereTextures",value:function(){console.log("[3D Component Engine] Sphere texture generation - not yet implemented")}},{key:"createCustomMeshTextures",value:function(){console.log("[3D Component Engine] Custom mesh texture generation - not yet implemented")}},{key:"createParametricSurfaceTextures",value:function(){console.log("[3D Component Engine] Parametric surface texture generation - not yet implemented")}},{key:"createGeometry",value:function(){var t,e=this.config.geometryParams;switch(this.config.geometry){case"roundedBox":t=this.createRoundedBoxGeometry(e.width,e.height,e.depth,e.radius,e.smoothness);break;case"sphere":t=new THREE.SphereGeometry(e.sphereRadius,e.widthSegments,e.heightSegments);break;case"torus":t=new THREE.TorusGeometry(e.torusRadius,e.tubeRadius,e.radialSegments,e.tubularSegments);break;case"cylinder":t=new THREE.CylinderGeometry(e.cylinderRadiusTop,e.cylinderRadiusBottom,e.cylinderHeight,e.cylinderRadialSegments);break;case"cone":t=new THREE.ConeGeometry(e.coneRadius||.5,e.coneHeight||1,e.coneRadialSegments||32);break;case"tube":t=new THREE.CylinderGeometry(e.tubeRadius||.25,e.tubeRadius||.25,e.tubeLength||2,e.tubeRadialSegments||32,1,!0);break;default:console.warn("[3D Component Engine] Unknown geometry type: ".concat(this.config.geometry)),t=new THREE.BoxGeometry(1,1,1)}this.config.enableSubdivision&&"roundedBox"===this.config.geometry&&(console.log("[3D Component Engine] Applying subdivision..."),t=i.S.modify(t,this.config.subdivisionIterations,this.config.subdivisionParams),console.log("[3D Component Engine] Subdivision complete, vertices:",t.attributes.position.count)),this.geometry=t}},{key:"createRoundedBoxGeometry",value:function(t,e,n,i,o){var r=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;m(this,t);var c=Math.ceil(4*r/Math.min(n,i,o))+1;s=Math.max(c,s),a=Math.max(c,a),l=Math.max(c,l),e=h(this,t,[n,i,o,s,a,l]),r=Math.min(r,Math.min(n,i,o)/2);for(var u=e.attributes.position,d=e.attributes.normal,p=function(t,e,s){var a=Math.abs(t),l=Math.abs(e),h=Math.abs(s),c=n/2,u=i/2,d=o/2,p=a>c-r,m=l>u-r,g=h>d-r;if(p&&m&&g){var f=(c-r)*Math.sign(t),y=(u-r)*Math.sign(e),v=(d-r)*Math.sign(s),b=t-f,x=e-y,w=s-v,E=Math.sqrt(b*b+x*x+w*w);if(E>0){var S=r/E;return{x:f+b*S,y:y+x*S,z:v+w*S,nx:b/E,ny:x/E,nz:w/E}}}else if(p&&m){var T=(c-r)*Math.sign(t),k=(u-r)*Math.sign(e),M=t-T,C=e-k,D=Math.sqrt(M*M+C*C);if(D>0){var P=r/D;return{x:T+M*P,y:k+C*P,z:s,nx:M/D,ny:C/D,nz:0}}}else if(p&&g){var z=(c-r)*Math.sign(t),R=(d-r)*Math.sign(s),A=t-z,_=s-R,I=Math.sqrt(A*A+_*_);if(I>0){var O=r/I;return{x:z+A*O,y:e,z:R+_*O,nx:A/I,ny:0,nz:_/I}}}else if(m&&g){var B=(u-r)*Math.sign(e),H=(d-r)*Math.sign(s),F=e-B,L=s-H,V=Math.sqrt(F*F+L*L);if(V>0){var W=r/V;return{x:t,y:B+F*W,z:H+L*W,nx:0,ny:F/V,nz:L/V}}}return{x:t,y:e,z:s,nx:0,ny:0,nz:0}},g=0;g<u.count;g++){var f=p(u.getX(g),u.getY(g),u.getZ(g));u.setXYZ(g,f.x,f.y,f.z),0===f.nx&&0===f.ny&&0===f.nz||d.setXYZ(g,f.nx,f.ny,f.nz)}return u.needsUpdate=!0,d.needsUpdate=!0,e}return d(t,THREE.BoxGeometry),f(t)}();return new r(t,e,n,i,o,o,o)}},{key:"createMaterial",value:function(){if("cylinder"===this.config.geometry&&"animated"===this.config.texture){var t,e,n=Object.assign({},this.config.materialParams),i=Object.assign({},n,{map:this.sideTexture,side:THREE.DoubleSide}),o=Object.assign({},n,{map:this.capTexture,side:THREE.DoubleSide});switch(this.config.material){case"physical":default:t=new THREE.MeshPhysicalMaterial(i),e=new THREE.MeshPhysicalMaterial(o);break;case"standard":t=new THREE.MeshStandardMaterial(i),e=new THREE.MeshStandardMaterial(o);break;case"basic":t=new THREE.MeshBasicMaterial(i),e=new THREE.MeshBasicMaterial(o)}this.material=[t,e,e],console.log("[3D Component Engine] Created multi-material array for cylinder")}else if("cone"===this.config.geometry&&"animated"===this.config.texture){var r,s,a=Object.assign({},this.config.materialParams),l=Object.assign({},a,{map:this.sideTexture,side:THREE.DoubleSide}),h=Object.assign({},a,{map:this.baseTexture,side:THREE.DoubleSide});switch(this.config.material){case"physical":default:r=new THREE.MeshPhysicalMaterial(l),s=new THREE.MeshPhysicalMaterial(h);break;case"standard":r=new THREE.MeshStandardMaterial(l),s=new THREE.MeshStandardMaterial(h);break;case"basic":r=new THREE.MeshBasicMaterial(l),s=new THREE.MeshBasicMaterial(h)}this.material=[r,s],console.log("[3D Component Engine] Created multi-material array for cone")}else if("tube"===this.config.geometry&&"animated"===this.config.texture){var c=Object.assign({},this.config.materialParams);switch(c.map=this.texture,c.side=THREE.DoubleSide,this.config.material){case"physical":default:this.material=new THREE.MeshPhysicalMaterial(c);break;case"standard":this.material=new THREE.MeshStandardMaterial(c);break;case"basic":this.material=new THREE.MeshBasicMaterial(c)}console.log("[3D Component Engine] Created single double-sided material for tube (no caps)")}else{var u=Object.assign({},this.config.materialParams);switch(u.side=THREE.DoubleSide,this.texture&&(u.map=this.texture),this.config.material){case"physical":default:this.material=new THREE.MeshPhysicalMaterial(u);break;case"standard":this.material=new THREE.MeshStandardMaterial(u);break;case"basic":this.material=new THREE.MeshBasicMaterial(u)}}}},{key:"createMesh",value:function(){this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.rotation.x=.349,this.mesh.rotation.y=-.55,this.scene.add(this.mesh),this.resizeContainerToFitContent()}},{key:"resizeContainerToFitContent",value:function(){if(this.config.responsive){var t=Math.max(50,Math.min(500,.15*window.innerWidth));return this.initialWidth=t,this.initialHeight=t,void console.log("[3D Engine] Responsive component - skipping resizeContainerToFitContent, using ".concat(t,"px"))}var e=new THREE.WebGLRenderer({antialias:!0,alpha:!0});e.setSize(1e3,1e3);var n=new THREE.PerspectiveCamera(this.config.cameraFOV,1,.1,100);n.position.copy(this.camera.position),n.lookAt(0,0,0),e.render(this.scene,n);var i=(new THREE.Box3).setFromObject(this.scene).getSize(new THREE.Vector3),o=n.position.z,r=n.fov*Math.PI/180,s=1e3/(2*Math.tan(r/2)*o),a=Math.ceil(i.x*s),l=Math.ceil(i.y*s);e.dispose(),this.config.width=a,this.config.height=l,this.initialWidth=a,this.initialHeight=l,this.renderer.setSize(a,l),this.camera.aspect=a/l,this.camera.updateProjectionMatrix(),this.updateFogPlaneSize()}},{key:"setupInteraction",value:function(){var t=this;this.renderer.domElement.style.cursor="grab",this.renderer.domElement.addEventListener("pointerdown",this.onPointerDown),this.renderer.domElement.addEventListener("pointermove",this.onPointerMove),this.renderer.domElement.addEventListener("pointerup",this.onPointerUp),this.renderer.domElement.addEventListener("pointerleave",this.onPointerUp),this.renderer.domElement.addEventListener("touchstart",this.onTouchStart.bind(this)),this.renderer.domElement.addEventListener("touchmove",this.onTouchMove.bind(this)),this.renderer.domElement.addEventListener("touchend",this.onTouchEnd.bind(this)),"GestureEvent"in window?(console.log("[3D Component Engine] GestureEvent is supported - adding listeners"),this.renderer.domElement.addEventListener("gesturestart",this.onGestureStart.bind(this)),this.renderer.domElement.addEventListener("gesturechange",this.onGestureChange.bind(this)),this.renderer.domElement.addEventListener("gestureend",this.onGestureEnd.bind(this))):console.log("[3D Component Engine] GestureEvent is NOT supported in this browser"),this.renderer.domElement.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),this.touches=[],this.lastPinchDistance=null,this.lastTouchAngle=null,this.baseScale=1,this.gestureRotation=0,this.gestureScale=1,this.raycaster=new THREE.Raycaster,this.grabbedPoint=null,this.grabbedLocalPoint=null,this.previousQuaternion=null,this.rotationHistory=[],this.maxHistoryLength=5,this.wheelGestureTimeout=null,this.config.responsive&&(this.resizeHandler=function(){return t.updateResponsiveSize()},window.addEventListener("resize",this.resizeHandler))}},{key:"detectGestureType",value:function(t,e,n,i){var o=Date.now();if(this.gestureState.lastUpdateTime,o-this.gestureState.startTime<this.gestureState.transitionCooldown)return this.gestureState.type;var r=0,s=0,a=!1,l=!1;return null!==this.gestureState.pinchDistance&&(a=(r=Math.abs(n-this.gestureState.pinchDistance))>.02*n),null!==this.gestureState.twistAngle&&((s=Math.abs(i-this.gestureState.twistAngle))>Math.PI&&(s=2*Math.PI-s),l=s>.02),a&&!l?"pinch":l&&!a?"twist":a&&l?r/n>s/Math.PI?"pinch":"twist":"swipe"}},{key:"transitionGesture",value:function(t){this.gestureState.type!==t&&(console.log("[3D Component] Gesture transition: ".concat(this.gestureState.type," -> ").concat(t)),this.gestureState.type=t,this.gestureState.startTime=Date.now(),"swipe"!==t&&(this.gestureState.swipeVelocity={x:0,y:0}),"twist"!==t&&(this.gestureState.twistVelocity=0),"pinch"!==t&&(this.gestureState.pinchVelocity=0))}},{key:"onPointerDown",value:function(t){var e=this.renderer.domElement.getBoundingClientRect();this.previousMousePosition={x:t.clientX-e.left,y:t.clientY-e.top};var n=new THREE.Vector2;if(n.x=this.previousMousePosition.x/e.width*2-1,n.y=-this.previousMousePosition.y/e.height*2+1,this.raycaster.setFromCamera(n,this.camera),0!==this.raycaster.intersectObject(this.fogPlane).length){this.isDragging=!0;var i=this.raycaster.intersectObject(this.mesh);if(i.length>0){this.grabbedPoint=i[0].point.clone();var o=this.grabbedPoint.clone();this.mesh.worldToLocal(o),this.grabbedLocalPoint=o}else{var r=new THREE.Vector3;this.mesh.getWorldPosition(r);var s=this.raycaster.ray,a=r.clone().sub(s.origin),l=s.origin.clone().add(s.direction.clone().multiplyScalar(a.dot(s.direction))).clone().sub(r).normalize(),h=this.mesh.geometry.boundingSphere.radius*this.mesh.scale.x;this.grabbedPoint=r.clone().add(l.clone().multiplyScalar(h));var c=this.grabbedPoint.clone();this.mesh.worldToLocal(c),this.grabbedLocalPoint=c}this.rotationVelocity={x:0,y:0},this.autoRotationTime=0,this.renderer.domElement.style.cursor="grabbing",this.previousQuaternion=this.mesh.quaternion.clone(),this.rotationHistory=[]}}},{key:"onPointerMove",value:function(t){if(this.isDragging&&this.grabbedLocalPoint){var e=this.renderer.domElement.getBoundingClientRect(),n={x:t.clientX-e.left,y:t.clientY-e.top};if("x"===this.config.restrictRotationAxis){var i=.01*(n.y-this.previousMousePosition.y);return this.mesh.rotateX(i),this.rotationVelocity.x=i,this.rotationVelocity.y=0,void(this.previousMousePosition=n)}var o=this.mesh.quaternion.clone(),r=new THREE.Vector2;r.x=n.x/e.width*2-1,r.y=-n.y/e.height*2+1,this.applyStickyRotation(r);var s=new THREE.Quaternion;s.multiplyQuaternions(this.mesh.quaternion,o.conjugate()),this.rotationHistory.push({quaternion:s,time:Date.now()}),this.rotationHistory.length>this.maxHistoryLength&&this.rotationHistory.shift(),this.calculateVelocityFromRotation(),this.previousMousePosition=n}}},{key:"applyStickyRotation",value:function(t){var e=this.grabbedLocalPoint.clone();this.mesh.localToWorld(e),this.raycaster.setFromCamera(t,this.camera);var n=this.raycaster.ray,i=new THREE.Vector3;this.mesh.getWorldPosition(i);var o=e.clone().sub(i),r=(this.camera.position.clone().sub(i),i.clone().sub(this.camera.position).normalize(),o.length()),s=i.clone().sub(n.origin),a=s.dot(n.direction),l=s.lengthSq()-a*a,h=r*r;if(l>h){var c=n.origin.clone().add(n.direction.clone().multiplyScalar(a)).clone().sub(i).normalize(),u=i.clone().add(c.multiplyScalar(r)),d=o.normalize(),p=u.clone().sub(i).normalize(),m=d.clone().cross(p),g=d.angleTo(p);if(m.length()>.001&&g>.001){m.normalize();var f=new THREE.Quaternion;f.setFromAxisAngle(m,g),this.mesh.quaternion.multiplyQuaternions(f,this.mesh.quaternion)}}else{var y=Math.sqrt(h-l),v=a-y,b=v>0?v:a+y;if(b>0){var x=n.origin.clone().add(n.direction.clone().multiplyScalar(b)),w=o.normalize(),E=x.clone().sub(i).normalize(),S=w.clone().cross(E),T=w.angleTo(E);if(S.length()>.001&&T>.001){S.normalize();var k=new THREE.Quaternion;k.setFromAxisAngle(S,T),this.mesh.quaternion.multiplyQuaternions(k,this.mesh.quaternion)}}}}},{key:"calculateVelocityFromRotation",value:function(){if(this.rotationHistory.length<2)this.rotationVelocity={x:0,y:0};else{var t=this.rotationHistory.slice(-3);if(!(t.length<2)){var e=(t[t.length-1].time-t[0].time)/1e3;if(e<=0)this.rotationVelocity={x:0,y:0};else{for(var n=new THREE.Quaternion,i=0;i<t.length;i++)n.multiply(t[i].quaternion);var o=new THREE.Vector3,r=0;if(n.w>.9999)this.rotationVelocity={x:0,y:0};else{r=2*Math.acos(n.w);var s=Math.sqrt(1-n.w*n.w);if(s<.001?o.set(n.x,n.y,n.z):o.set(n.x/s,n.y/s,n.z/s),r>Math.PI&&(r=2*Math.PI-r,o.multiplyScalar(-1)),Math.abs(r)>.01){var a=r/e;this.rotationVelocity.y=o.y*a*.5,this.rotationVelocity.x=o.x*a*.5;this.rotationVelocity.x=Math.max(-.02,Math.min(.02,this.rotationVelocity.x)),this.rotationVelocity.y=Math.max(-.02,Math.min(.02,this.rotationVelocity.y))}else this.rotationVelocity={x:0,y:0}}}}}}},{key:"onPointerUp",value:function(){this.isDragging=!1,this.renderer.domElement.style.cursor="grab",this.grabbedPoint=null,this.grabbedLocalPoint=null}},{key:"onTouchStart",value:function(t){if(t.preventDefault(),this.touches=Array.from(t.touches),1===this.touches.length)this.gestureState.type="drag";else if(2===this.touches.length){this.isGesturing=!0;var e=this.touches[0].clientX-this.touches[1].clientX,n=this.touches[0].clientY-this.touches[1].clientY;this.lastPinchDistance=Math.sqrt(e*e+n*n),this.lastTouchAngle=Math.atan2(n,e),this.gestureState.pinchDistance=this.lastPinchDistance,this.gestureState.twistAngle=this.lastTouchAngle,this.gestureState.lastUpdateTime=Date.now(),this.gestureState.type="none"}}},{key:"onTouchMove",value:function(t){if(t.preventDefault(),this.touches=Array.from(t.touches),2===this.touches.length){var e=this.touches[0].clientX-this.touches[1].clientX,n=this.touches[0].clientY-this.touches[1].clientY,i=Math.sqrt(e*e+n*n),o=Math.atan2(n,e),r=this.detectGestureType(e,n,i,o);if(this.transitionGesture(r),"twist"===this.gestureState.type&&null!==this.lastTouchAngle){var s=o-this.lastTouchAngle;if(s>Math.PI?s-=2*Math.PI:s<-Math.PI&&(s+=2*Math.PI),Math.abs(s)>.02){if("x"===this.config.restrictRotationAxis)this.mesh.rotateX(s);else{var a=new THREE.Vector3;this.camera.getWorldDirection(a);var l=new THREE.Quaternion;l.setFromAxisAngle(a,s),this.mesh.quaternion.multiplyQuaternions(l,this.mesh.quaternion)}this.autoRotationTime=0}}"none"!==this.gestureState.type&&(this.lastPinchDistance=i,this.lastTouchAngle=o,this.gestureState.pinchDistance=i,this.gestureState.twistAngle=o,this.gestureState.lastUpdateTime=Date.now())}}},{key:"onTouchEnd",value:function(t){this.touches=Array.from(t.touches),this.touches.length<2&&(this.lastPinchDistance=null,this.lastTouchAngle=null,this.isGesturing=!1,this.gestureState.type="none",this.gestureState.startTime=0,this.gestureState.pinchDistance=null,this.gestureState.twistAngle=null)}},{key:"onGestureStart",value:function(t){t.preventDefault(),this.isGesturing=!0,this.gestureRotation=t.rotation||0,this.gestureScale=t.scale||1,console.log("[3D Component Engine] Gesture start - rotation:",this.gestureRotation,"scale:",this.gestureScale)}},{key:"onGestureChange",value:function(t){if(t.preventDefault(),void 0!==t.rotation){var e=(t.rotation-this.gestureRotation)*Math.PI/180;if(console.log("[3D Component Engine] Gesture change - rotation:",t.rotation,"delta (radians):",e),Math.abs(e)>.01){if("x"===this.config.restrictRotationAxis)this.mesh.rotateX(e);else{var n=new THREE.Vector3;this.camera.getWorldDirection(n);var i=new THREE.Quaternion;i.setFromAxisAngle(n,e),this.mesh.quaternion.multiplyQuaternions(i,this.mesh.quaternion)}this.autoRotationTime=0,console.log("[3D Component Engine] Rotation applied!")}this.gestureRotation=t.rotation}}},{key:"onGestureEnd",value:function(t){t.preventDefault(),this.gestureRotation=0,this.gestureScale=1,this.isGesturing=!1}},{key:"isCursorInFogPlane",value:function(t){var e=this.renderer.domElement.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,o=new THREE.Vector2;return o.x=n/e.width*2-1,o.y=-i/e.height*2+1,this.raycaster.setFromCamera(o,this.camera),this.raycaster.intersectObject(this.fogPlane).length>0}},{key:"onWheel",value:function(t){var e=this;if(this.isCursorInFogPlane(t)){t.preventDefault(),this.isGesturing=!0;var n=Date.now();this.transitionGesture("swipe");var i=.01,o=new THREE.Quaternion;o.setFromAxisAngle(new THREE.Vector3(0,1,0),-t.deltaX*i);var r=new THREE.Vector3;this.camera.getWorldDirection(r);var s=new THREE.Vector3;s.crossVectors(this.camera.up,r).normalize();var a=new THREE.Quaternion;if(a.setFromAxisAngle(s,t.deltaY*i),"x"===this.config.restrictRotationAxis){var l=-t.deltaX*i-t.deltaY*i;this.mesh.rotateY(l)}else this.mesh.quaternion.multiplyQuaternions(o,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(a,this.mesh.quaternion);this.autoRotationTime=0,this.gestureState.lastUpdateTime=n,this.wheelGestureTimeout&&clearTimeout(this.wheelGestureTimeout),this.wheelGestureTimeout=setTimeout((function(){e.isGesturing=!1,e.gestureState.type="none",e.gestureState.startTime=0}),150)}}},{key:"updateAnimatedTexture",value:function(t){"cylinder"===this.config.geometry&&this.sideContext&&this.capContext?this.updateCylinderTextures(t):"cone"===this.config.geometry&&this.sideContext&&this.baseContext?this.updateConeTextures(t):this.textureContext&&this.updateSingleTexture(t,this.textureContext,this.textureCanvas,this.texture)}},{key:"updateCylinderTextures",value:function(t){this.config.textureParams,this.updateSingleTexture(t,this.sideContext,this.sideCanvas,this.sideTexture),this.updateSingleTexture(t,this.capContext,this.capCanvas,this.capTexture)}},{key:"updateConeTextures",value:function(t){this.updateSingleTexture(t,this.sideContext,this.sideCanvas,this.sideTexture),this.updateSingleTexture(t,this.baseContext,this.baseCanvas,this.baseTexture)}},{key:"updateSingleTexture",value:function(t,e,n,i){var o=this.config.textureParams,r=n.width,s=n.height;e.fillStyle="#0a0a0a",e.fillRect(0,0,r,s);var a,l,h=r/s,c=o.tunnelCount||6;h>1?(a=Math.round(c*h),l=c):h<1?(a=c,l=Math.round(c/h)):(a=c,l=c);for(var u=t*o.animationSpeed,d=0;d<a;d++)for(var p=0;p<l;p++){var m=(d+.5)*(r/a),g=(p+.5)*(s/l),f=o.tunnelRadius+10*Math.sin(u+.5*d+.5*p),y=e.createRadialGradient(m,g,0,m,g,f),v=(50*u+30*d+30*p)%360;y.addColorStop(0,"hsl(".concat(v,", 100%, 95%)")),y.addColorStop(.2,"hsl(".concat(v,", 90%, 85%)")),y.addColorStop(.4,"hsl(".concat(v,", 80%, 65%)")),y.addColorStop(.7,"hsl(".concat(v,", 70%, 45%)")),y.addColorStop(.9,"hsl(".concat(v,", 60%, 25%)")),y.addColorStop(1,"#0a0a0a"),e.beginPath(),e.arc(m,g,f,0,2*Math.PI),e.fillStyle=y,e.fill(),e.beginPath(),e.arc(m,g,f,0,2*Math.PI);var b=e.createRadialGradient(m,g,.8*f,m,g,f);b.addColorStop(0,"transparent"),b.addColorStop(.8,"transparent"),b.addColorStop(1,"hsla(".concat(v,", 80%, 60%, 0.6)")),e.strokeStyle=b,e.lineWidth=3,e.stroke()}i&&(i.needsUpdate=!0)}},{key:"updateFogTexture",value:function(t){if(this.fogContext&&this.fogTexture){var e=this.fogContext,n=e.canvas.width,i=e.canvas.height;e.clearRect(0,0,n,i);for(var o=n/2,r=i/2,s=.35*Math.min(n,i),a=0;a<5;a++){var l=.001*t+1.5*a,h=.3*l+a*(2*Math.PI/5),c=(.3*Math.sin(.5*l+2*a)+.7)*s,u=o+Math.cos(h)*c,d=r+Math.sin(h)*c,p=60*(.5*Math.sin(.5*l+2*a)+.5)+60,m=e.createRadialGradient(u,d,0,u,d,p);m.addColorStop(0,"rgba(100, 150, 255, 0.3)"),m.addColorStop(.5,"rgba(50, 100, 200, 0.1)"),m.addColorStop(1,"rgba(0, 50, 150, 0)"),e.fillStyle=m,e.fillRect(u-p,d-p,2*p,2*p)}this.fogTexture.needsUpdate=!0}}},{key:"animate",value:function(t){if(this.isInitialized){if(!this.viewportLogged){var e=this.renderer.getContext();console.log("[3D Engine] First frame render - Responsive: ".concat(this.config.responsive)),console.log("[3D Engine] WebGL viewport: ".concat(e.drawingBufferWidth," x ").concat(e.drawingBufferHeight)),console.log("[3D Engine] Renderer size: ".concat(this.renderer.getSize(new THREE.Vector2).x," x ").concat(this.renderer.getSize(new THREE.Vector2).y)),console.log("[3D Engine] Pixel ratio: ".concat(this.renderer.getPixelRatio())),this.viewportLogged=!0}if(this.animationId=requestAnimationFrame(this.animate),"animated"===this.config.texture&&this.updateAnimatedTexture(t),this.fogTexture&&this.updateFogTexture(t),!this.isDragging&&!this.isGesturing&&this.config.enableAnimation)if(Math.abs(this.rotationVelocity.x)>1e-4||Math.abs(this.rotationVelocity.y)>1e-4){var n=new THREE.Quaternion;n.setFromAxisAngle(new THREE.Vector3(0,1,0),this.rotationVelocity.y);var i=new THREE.Vector3;this.camera.getWorldDirection(i);var o=new THREE.Vector3;o.crossVectors(this.camera.up,i).normalize();var r=new THREE.Quaternion;r.setFromAxisAngle(o,this.rotationVelocity.x),this.mesh.quaternion.multiplyQuaternions(n,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(r,this.mesh.quaternion),this.rotationVelocity.x*=.995,this.rotationVelocity.y*=.995}else{this.autoRotationTime+=.01*this.config.rotationSpeed;var s=new THREE.Quaternion;s.setFromAxisAngle(new THREE.Vector3(0,1,0),.01*this.autoRotationTime*this.config.rotationSpeed);var a=new THREE.Quaternion;a.setFromAxisAngle(new THREE.Vector3(1,0,0),.002*Math.sin(.1*this.autoRotationTime)*this.config.rotationSpeed),this.mesh.quaternion.multiplyQuaternions(s,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(a,this.mesh.quaternion)}this.renderer.render(this.scene,this.camera)}}},{key:"setRotationSpeed",value:function(t){this.config.rotationSpeed=t,console.log("[3D Component Engine] Rotation speed set to:",t)}},{key:"updateResponsiveSize",value:function(){if(this.config.responsive){var t=Math.max(50,Math.min(500,.15*window.innerWidth));this.renderer.setSize(t,t),this.camera.aspect=1,this.camera.updateProjectionMatrix(),this.updateFogPlaneSize()}}},{key:"updateFogPlaneSize",value:function(){if(this.fogPlane){var t=new THREE.Vector2;this.renderer.getSize(t);var e=this.camera.position.z- -1.5,n=this.config.cameraFOV*Math.PI/180,i=2*Math.tan(n/2)*e,o=i*(t.x/t.y)*1.05,r=1.05*i,s=new THREE.PlaneGeometry(o,r,32,32);if(this.fogPlane.geometry.dispose(),this.fogPlane.geometry=s,this.fogPlane.children.length>0){var a=new THREE.EdgesGeometry(s),l=this.fogPlane.children[0];l.geometry.dispose(),l.geometry=a}console.log("[3D Engine] Updated fog plane size: ".concat(o.toFixed(2)," x ").concat(r.toFixed(2)," units"))}}},{key:"setLightPosition",value:function(t,e,n){this.lights[t]&&(this.lights[t].position[e]=n,console.log("[3D Component Engine] ".concat(t," light ").concat(e," set to:"),n))}},{key:"createTextTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("canvas"),i=n.getContext("2d"),o=Object.assign({},{fontSize:64,fontFamily:"Arial, sans-serif",color:"#ffffff",backgroundColor:"transparent",padding:10,bold:!1},e),r=o.bold?"bold ":"";i.font="".concat(r).concat(o.fontSize,"px ").concat(o.fontFamily);var s=i.measureText(String(t)).width+2*o.padding,a=o.fontSize+2*o.padding;n.width=Math.pow(2,Math.ceil(Math.log2(s))),n.height=Math.pow(2,Math.ceil(Math.log2(a))),"transparent"!==o.backgroundColor&&(i.fillStyle=o.backgroundColor,i.fillRect(0,0,n.width,n.height)),i.font="".concat(r).concat(o.fontSize,"px ").concat(o.fontFamily),i.fillStyle=o.color,i.textAlign="center",i.textBaseline="middle",i.fillText(String(t),n.width/2,n.height/2);var l=new THREE.CanvasTexture(n);return l.needsUpdate=!0,console.log('[3D Component Engine] Created text texture: "'.concat(t,'" (').concat(n.width,"x").concat(n.height,"px)")),l}},{key:"createCircularDecals",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.mesh){var i={radius:.52,textStyle:{fontSize:72,fontFamily:"Arial, sans-serif",color:"#ffffff",backgroundColor:"#000000",padding:15},decalSize:new THREE.Vector3(.2,.2,.1)},o=Object.assign({},i,n);o.decalSize instanceof THREE.Vector3||(o.decalSize&&"object"===l(o.decalSize)?o.decalSize=new THREE.Vector3(o.decalSize.x||.2,o.decalSize.y||.2,o.decalSize.z||.1):o.decalSize=new THREE.Vector3(.2,.2,.1)),this.clearDecals();var r=2*Math.PI/t.length;t.forEach((function(t,n){var i=n*r,s=new THREE.Vector3(Math.cos(i)*o.radius,0,Math.sin(i)*o.radius),a=new THREE.Euler(0,-i+Math.PI/2,Math.PI/2);e.createDecal({text:t,position:s,orientation:a,size:o.decalSize,textStyle:o.textStyle})&&console.log('[3D Component Engine] Created decal "'.concat(t,'" at angle ').concat((180*i/Math.PI).toFixed(1),"°"))})),console.log("[3D Component Engine] Created ".concat(t.length," circular decals"))}else console.error("[3D Component Engine] Cannot create decals - no mesh available")}},{key:"createDecal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.mesh)return console.error("[3D Component Engine] Cannot create decal - no mesh available"),null;var e={text:"0",position:new THREE.Vector3(0,0,.5),orientation:new THREE.Euler(0,0,0),size:new THREE.Vector3(.3,.3,.1),textStyle:{fontSize:64,fontFamily:"Arial, sans-serif",color:"#ffffff",backgroundColor:"transparent",padding:10}},n=Object.assign({},e,t);n.size instanceof THREE.Vector3||(n.size&&"object"===l(n.size)?n.size=new THREE.Vector3(n.size.x||.3,n.size.y||.3,n.size.z||.1):n.size=new THREE.Vector3(.3,.3,.1));var i=this.createTextTexture(n.text,n.textStyle),r=new THREE.MeshStandardMaterial({map:i,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4,side:THREE.FrontSide});this.decalMaterials.set(i,r);var s=new o.w(this.mesh,n.position,n.orientation,n.size),a=new THREE.Mesh(s,r);return a.renderOrder=1,this.mesh.add(a),this.decals.push(a),console.log('[3D Component Engine] Created decal: "'.concat(n.text,'" attached to mesh')),a}},{key:"clearDecals",value:function(){var t=this;this.decals.forEach((function(e){e.geometry&&e.geometry.dispose(),e.material&&(e.material.map&&e.material.map.dispose(),e.material.dispose()),t.mesh?t.mesh.remove(e):t.scene.remove(e)})),this.decals=[],this.decalMaterials.clear(),console.log("[3D Component Engine] Cleared all decals")}},{key:"updateDecal",value:function(t,e){if(t<0||t>=this.decals.length)console.error("[3D Component Engine] Invalid decal index: ".concat(t));else{var n=this.decals[t],i=n.material.map,o=this.createTextTexture(e,{fontSize:96,color:"#ffffff"});n.material.map=o,n.material.needsUpdate=!0,i&&i.dispose(),console.log("[3D Component Engine] Updated decal ".concat(t,' to "').concat(e,'"'))}}},{key:"dispose",value:function(){console.log("[3D Component Engine] Disposing..."),this.clearDecals(),this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&(this.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown),this.renderer.domElement.removeEventListener("pointermove",this.onPointerMove),this.renderer.domElement.removeEventListener("pointerup",this.onPointerUp),this.renderer.domElement.removeEventListener("pointerleave",this.onPointerUp),this.renderer.domElement.removeEventListener("touchstart",this.onTouchStart),this.renderer.domElement.removeEventListener("touchmove",this.onTouchMove),this.renderer.domElement.removeEventListener("touchend",this.onTouchEnd),"GestureEvent"in window&&(this.renderer.domElement.removeEventListener("gesturestart",this.onGestureStart),this.renderer.domElement.removeEventListener("gesturechange",this.onGestureChange),this.renderer.domElement.removeEventListener("gestureend",this.onGestureEnd)),this.renderer.domElement.removeEventListener("wheel",this.onWheel),this.config.responsive&&this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.renderer.dispose(),this.container.removeChild(this.renderer.domElement)),this.wheelGestureTimeout&&clearTimeout(this.wheelGestureTimeout),this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.texture&&this.texture.dispose(),this.isInitialized=!1}}])}());const b=v},922:(t,e,n)=>{"use strict";n.d(e,{LoY:()=>Ce,O9p:()=>Mt,Pq0:()=>x,THS:()=>fe,dwI:()=>S,eaF:()=>Le,kn4:()=>ft,lMl:()=>ie,qtW:()=>be});const i=2300,o=2301,r=2302,s="srgb",a="srgb-linear",l="linear",h="srgb",c=7680;class u{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return void 0!==n&&void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){const n=this._listeners;if(void 0===n)return;const i=n[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){const e=this._listeners;if(void 0===e)return;const n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,i=e.length;n<i;n++)e[n].call(this,t);t.target=null}}}const d=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function p(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(d[255&t]+d[t>>8&255]+d[t>>16&255]+d[t>>24&255]+"-"+d[255&e]+d[e>>8&255]+"-"+d[e>>16&15|64]+d[e>>24&255]+"-"+d[63&n|128]+d[n>>8&255]+"-"+d[n>>16&255]+d[n>>24&255]+d[255&i]+d[i>>8&255]+d[i>>16&255]+d[i>>24&255]).toLowerCase()}function m(t,e,n){return Math.max(e,Math.min(n,t))}function g(t,e,n){return(1-n)*t+n*e}function f(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function y(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}Math.PI,Math.PI;class v{constructor(t=0,e=0){v.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=m(this.x,t.x,e.x),this.y=m(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=m(this.x,t,e),this.y=m(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(m(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(m(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),o=this.x-t.x,r=this.y-t.y;return this.x=o*n-r*i+t.x,this.y=o*i+r*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class b{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,o,r,s){let a=n[i+0],l=n[i+1],h=n[i+2],c=n[i+3];const u=o[r+0],d=o[r+1],p=o[r+2],m=o[r+3];if(0===s)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===s)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=m);if(c!==m||a!==u||l!==d||h!==p){let t=1-s;const e=a*u+l*d+h*p+c*m,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const o=Math.sqrt(i),r=Math.atan2(o,e*n);t=Math.sin(t*r)/o,s=Math.sin(s*r)/o}const o=s*n;if(a=a*t+u*o,l=l*t+d*o,h=h*t+p*o,c=c*t+m*o,t===1-s){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,o,r){const s=n[i],a=n[i+1],l=n[i+2],h=n[i+3],c=o[r],u=o[r+1],d=o[r+2],p=o[r+3];return t[e]=s*p+h*c+a*d-l*u,t[e+1]=a*p+h*u+l*c-s*d,t[e+2]=l*p+h*d+s*u-a*c,t[e+3]=h*p-s*c-a*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,i=t._y,o=t._z,r=t._order,s=Math.cos,a=Math.sin,l=s(n/2),h=s(i/2),c=s(o/2),u=a(n/2),d=a(i/2),p=a(o/2);switch(r){case"XYZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"YXZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"ZXY":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"ZYX":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"YZX":this._x=u*h*c+l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c-u*d*p;break;case"XZY":this._x=u*h*c-l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],o=e[8],r=e[1],s=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=n+s+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(o-l)*t,this._z=(r-i)*t}else if(n>s&&n>c){const t=2*Math.sqrt(1+n-s-c);this._w=(h-a)/t,this._x=.25*t,this._y=(i+r)/t,this._z=(o+l)/t}else if(s>c){const t=2*Math.sqrt(1+s-n-c);this._w=(o-l)/t,this._x=(i+r)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-n-s);this._w=(r-i)/t,this._x=(o+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(m(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,o=t._z,r=t._w,s=e._x,a=e._y,l=e._z,h=e._w;return this._x=n*h+r*s+i*l-o*a,this._y=i*h+r*a+o*s-n*l,this._z=o*h+r*l+n*a-i*s,this._w=r*h-n*s-i*a-o*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,o=this._z,r=this._w;let s=r*t._w+n*t._x+i*t._y+o*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=r,this._x=n,this._y=i,this._z=o,this;const a=1-s*s;if(a<=Number.EPSILON){const t=1-e;return this._w=t*r+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*o+e*this._z,this.normalize(),this}const l=Math.sqrt(a),h=Math.atan2(l,s),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=r*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=o*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(i*Math.sin(t),i*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class x{constructor(t=0,e=0,n=0){x.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(E.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(E.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*i,this.y=o[1]*e+o[4]*n+o[7]*i,this.z=o[2]*e+o[5]*n+o[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,o=t.elements,r=1/(o[3]*e+o[7]*n+o[11]*i+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*i+o[12])*r,this.y=(o[1]*e+o[5]*n+o[9]*i+o[13])*r,this.z=(o[2]*e+o[6]*n+o[10]*i+o[14])*r,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,o=t.x,r=t.y,s=t.z,a=t.w,l=2*(r*i-s*n),h=2*(s*e-o*i),c=2*(o*n-r*e);return this.x=e+a*l+r*c-s*h,this.y=n+a*h+s*l-o*c,this.z=i+a*c+o*h-r*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i,this.y=o[1]*e+o[5]*n+o[9]*i,this.z=o[2]*e+o[6]*n+o[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=m(this.x,t.x,e.x),this.y=m(this.y,t.y,e.y),this.z=m(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=m(this.x,t,e),this.y=m(this.y,t,e),this.z=m(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(m(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,o=t.z,r=e.x,s=e.y,a=e.z;return this.x=i*a-o*s,this.y=o*r-n*a,this.z=n*s-i*r,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return w.copy(this).projectOnVector(t),this.sub(w)}reflect(t){return this.sub(w.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(m(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const w=new x,E=new b;class S{constructor(t,e,n,i,o,r,s,a,l){S.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,i,o,r,s,a,l)}set(t,e,n,i,o,r,s,a,l){const h=this.elements;return h[0]=t,h[1]=i,h[2]=s,h[3]=e,h[4]=o,h[5]=a,h[6]=n,h[7]=r,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,o=this.elements,r=n[0],s=n[3],a=n[6],l=n[1],h=n[4],c=n[7],u=n[2],d=n[5],p=n[8],m=i[0],g=i[3],f=i[6],y=i[1],v=i[4],b=i[7],x=i[2],w=i[5],E=i[8];return o[0]=r*m+s*y+a*x,o[3]=r*g+s*v+a*w,o[6]=r*f+s*b+a*E,o[1]=l*m+h*y+c*x,o[4]=l*g+h*v+c*w,o[7]=l*f+h*b+c*E,o[2]=u*m+d*y+p*x,o[5]=u*g+d*v+p*w,o[8]=u*f+d*b+p*E,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],s=t[5],a=t[6],l=t[7],h=t[8];return e*r*h-e*s*l-n*o*h+n*s*a+i*o*l-i*r*a}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],s=t[5],a=t[6],l=t[7],h=t[8],c=h*r-s*l,u=s*a-h*o,d=l*o-r*a,p=e*c+n*u+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=c*m,t[1]=(i*l-h*n)*m,t[2]=(s*n-i*r)*m,t[3]=u*m,t[4]=(h*e-i*a)*m,t[5]=(i*o-s*e)*m,t[6]=d*m,t[7]=(n*a-l*e)*m,t[8]=(r*e-n*o)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,o,r,s){const a=Math.cos(o),l=Math.sin(o);return this.set(n*a,n*l,-n*(a*r+l*s)+r+t,-i*l,i*a,-i*(-l*r+a*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(T.makeScale(t,e)),this}rotate(t){return this.premultiply(T.makeRotation(-t)),this}translate(t,e){return this.premultiply(T.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const T=new S;function k(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const M={};function C(t){t in M||(M[t]=!0,console.warn(t))}const D=(new S).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),P=(new S).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function z(){const t={enabled:!0,workingColorSpace:a,spaces:{},convert:function(t,e,n){return!1!==this.enabled&&e!==n&&e&&n?(this.spaces[e].transfer===h&&(t.r=A(t.r),t.g=A(t.g),t.b=A(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===h&&(t.r=_(t.r),t.g=_(t.g),t.b=_(t.b)),t):t},workingToColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},colorSpaceToWorking:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return""===t?l:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(e,n){return C("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(e,n)},toWorkingColorSpace:function(e,n){return C("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(e,n)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[a]:{primaries:e,whitePoint:i,transfer:l,toXYZ:D,fromXYZ:P,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:s},outputColorSpaceConfig:{drawingBufferColorSpace:s}},[s]:{primaries:e,whitePoint:i,transfer:h,toXYZ:D,fromXYZ:P,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:s}}}),t}const R=z();function A(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function _(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let I;class O{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{void 0===I&&(I=k("canvas")),I.width=t.width,I.height=t.height;const e=I.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),n=I}return n.toDataURL(e)}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=k("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),o=i.data;for(let t=0;t<o.length;t++)o[t]=255*A(o[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*A(e[t]/255)):e[t]=A(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let B=0;class H{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:B++}),this.uuid=p(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight):null!==e?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(F(i[e].image)):t.push(F(i[e]))}else t=F(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function F(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?O.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let L=0;const V=new x;class W extends u{constructor(t=W.DEFAULT_IMAGE,e=W.DEFAULT_MAPPING,n=1001,i=1001,o=1006,r=1008,s=1023,a=1009,l=W.DEFAULT_ANISOTROPY,h=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:L++}),this.uuid=p(),this.name="",this.source=new H(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=o,this.minFilter=r,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new v(0,0),this.repeat=new v(1,1),this.center=new v(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new S,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(V).x}get height(){return this.source.getSize(V).y}get depth(){return this.source.getSize(V).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const i=this[e];void 0!==i?i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[e]=n:console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}W.DEFAULT_IMAGE=null,W.DEFAULT_MAPPING=300,W.DEFAULT_ANISOTROPY=1;class N{constructor(t=0,e=0,n=0,i=1){N.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,o=this.w,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i+r[12]*o,this.y=r[1]*e+r[5]*n+r[9]*i+r[13]*o,this.z=r[2]*e+r[6]*n+r[10]*i+r[14]*o,this.w=r[3]*e+r[7]*n+r[11]*i+r[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,o;const r=.01,s=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],d=a[5],p=a[9],m=a[2],g=a[6],f=a[10];if(Math.abs(h-u)<r&&Math.abs(c-m)<r&&Math.abs(p-g)<r){if(Math.abs(h+u)<s&&Math.abs(c+m)<s&&Math.abs(p+g)<s&&Math.abs(l+d+f-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(d+1)/2,y=(f+1)/2,v=(h+u)/4,b=(c+m)/4,x=(p+g)/4;return t>a&&t>y?t<r?(n=0,i=.707106781,o=.707106781):(n=Math.sqrt(t),i=v/n,o=b/n):a>y?a<r?(n=.707106781,i=0,o=.707106781):(i=Math.sqrt(a),n=v/i,o=x/i):y<r?(n=.707106781,i=.707106781,o=0):(o=Math.sqrt(y),n=b/o,i=x/o),this.set(n,i,o,e),this}let y=Math.sqrt((g-p)*(g-p)+(c-m)*(c-m)+(u-h)*(u-h));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(c-m)/y,this.z=(u-h)/y,this.w=Math.acos((l+d+f-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=m(this.x,t.x,e.x),this.y=m(this.y,t.y,e.y),this.z=m(this.z,t.z,e.z),this.w=m(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=m(this.x,t,e),this.y=m(this.y,t,e),this.z=m(this.z,t,e),this.w=m(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(m(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class j{constructor(t=new x(1/0,1/0,1/0),e=new x(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(G.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(G.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=G.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===e&&void 0!==i&&!0!==t.isInstancedMesh)for(let e=0,n=i.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,G):G.fromBufferAttribute(i,e),G.applyMatrix4(t.matrixWorld),this.expandByPoint(G);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),U.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),U.copy(n.boundingBox)),U.applyMatrix4(t.matrixWorld),this.union(U)}const i=t.children;for(let t=0,n=i.length;t<n;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,G),G.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter($),tt.subVectors(this.max,$),Y.subVectors(t.a,$),X.subVectors(t.b,$),Z.subVectors(t.c,$),J.subVectors(X,Y),Q.subVectors(Z,X),K.subVectors(Y,Z);let e=[0,-J.z,J.y,0,-Q.z,Q.y,0,-K.z,K.y,J.z,0,-J.x,Q.z,0,-Q.x,K.z,0,-K.x,-J.y,J.x,0,-Q.y,Q.x,0,-K.y,K.x,0];return!!it(e,Y,X,Z,tt)&&(e=[1,0,0,0,1,0,0,0,1],!!it(e,Y,X,Z,tt)&&(et.crossVectors(J,Q),e=[et.x,et.y,et.z],it(e,Y,X,Z,tt)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,G).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(G).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(q[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),q[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),q[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),q[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),q[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),q[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),q[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),q[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(q)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const q=[new x,new x,new x,new x,new x,new x,new x,new x],G=new x,U=new j,Y=new x,X=new x,Z=new x,J=new x,Q=new x,K=new x,$=new x,tt=new x,et=new x,nt=new x;function it(t,e,n,i,o){for(let r=0,s=t.length-3;r<=s;r+=3){nt.fromArray(t,r);const s=o.x*Math.abs(nt.x)+o.y*Math.abs(nt.y)+o.z*Math.abs(nt.z),a=e.dot(nt),l=n.dot(nt),h=i.dot(nt);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>s)return!1}return!0}const ot=new j,rt=new x,st=new x;class at{constructor(t=new x,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):ot.setFromPoints(t).getCenter(n);let i=0;for(let e=0,o=t.length;e<o;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;rt.subVectors(t,this.center);const e=rt.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(rt,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(st.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(rt.copy(t.center).add(st)),this.expandByPoint(rt.copy(t.center).sub(st))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const lt=new x,ht=new x,ct=new x,ut=new x,dt=new x,pt=new x,mt=new x;class gt{constructor(t=new x,e=new x(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,lt)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=lt.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(lt.copy(this.origin).addScaledVector(this.direction,e),lt.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){ht.copy(t).add(e).multiplyScalar(.5),ct.copy(e).sub(t).normalize(),ut.copy(this.origin).sub(ht);const o=.5*t.distanceTo(e),r=-this.direction.dot(ct),s=ut.dot(this.direction),a=-ut.dot(ct),l=ut.lengthSq(),h=Math.abs(1-r*r);let c,u,d,p;if(h>0)if(c=r*a-s,u=r*s-a,p=o*h,c>=0)if(u>=-p)if(u<=p){const t=1/h;c*=t,u*=t,d=c*(c+r*u+2*s)+u*(r*c+u+2*a)+l}else u=o,c=Math.max(0,-(r*u+s)),d=-c*c+u*(u+2*a)+l;else u=-o,c=Math.max(0,-(r*u+s)),d=-c*c+u*(u+2*a)+l;else u<=-p?(c=Math.max(0,-(-r*o+s)),u=c>0?-o:Math.min(Math.max(-o,-a),o),d=-c*c+u*(u+2*a)+l):u<=p?(c=0,u=Math.min(Math.max(-o,-a),o),d=u*(u+2*a)+l):(c=Math.max(0,-(r*o+s)),u=c>0?o:Math.min(Math.max(-o,-a),o),d=-c*c+u*(u+2*a)+l);else u=r>0?-o:o,c=Math.max(0,-(r*u+s)),d=-c*c+u*(u+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),i&&i.copy(ht).addScaledVector(ct,u),d}intersectSphere(t,e){lt.subVectors(t.center,this.origin);const n=lt.dot(this.direction),i=lt.dot(lt)-n*n,o=t.radius*t.radius;if(i>o)return null;const r=Math.sqrt(o-i),s=n-r,a=n+r;return a<0?null:s<0?this.at(a,e):this.at(s,e)}intersectsSphere(t){return!(t.radius<0)&&this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,o,r,s,a;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),h>=0?(o=(t.min.y-u.y)*h,r=(t.max.y-u.y)*h):(o=(t.max.y-u.y)*h,r=(t.min.y-u.y)*h),n>r||o>i?null:((o>n||isNaN(n))&&(n=o),(r<i||isNaN(i))&&(i=r),c>=0?(s=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(s=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),n>a||s>i?null:((s>n||n!=n)&&(n=s),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,lt)}intersectTriangle(t,e,n,i,o){dt.subVectors(e,t),pt.subVectors(n,t),mt.crossVectors(dt,pt);let r,s=this.direction.dot(mt);if(s>0){if(i)return null;r=1}else{if(!(s<0))return null;r=-1,s=-s}ut.subVectors(this.origin,t);const a=r*this.direction.dot(pt.crossVectors(ut,pt));if(a<0)return null;const l=r*this.direction.dot(dt.cross(ut));if(l<0)return null;if(a+l>s)return null;const h=-r*ut.dot(mt);return h<0?null:this.at(h/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ft{constructor(t,e,n,i,o,r,s,a,l,h,c,u,d,p,m,g){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,i,o,r,s,a,l,h,c,u,d,p,m,g)}set(t,e,n,i,o,r,s,a,l,h,c,u,d,p,m,g){const f=this.elements;return f[0]=t,f[4]=e,f[8]=n,f[12]=i,f[1]=o,f[5]=r,f[9]=s,f[13]=a,f[2]=l,f[6]=h,f[10]=c,f[14]=u,f[3]=d,f[7]=p,f[11]=m,f[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ft).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/yt.setFromMatrixColumn(t,0).length(),o=1/yt.setFromMatrixColumn(t,1).length(),r=1/yt.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*r,e[9]=n[9]*r,e[10]=n[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,o=t.z,r=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),h=Math.cos(o),c=Math.sin(o);if("XYZ"===t.order){const t=r*h,n=r*c,i=s*h,o=s*c;e[0]=a*h,e[4]=-a*c,e[8]=l,e[1]=n+i*l,e[5]=t-o*l,e[9]=-s*a,e[2]=o-t*l,e[6]=i+n*l,e[10]=r*a}else if("YXZ"===t.order){const t=a*h,n=a*c,i=l*h,o=l*c;e[0]=t+o*s,e[4]=i*s-n,e[8]=r*l,e[1]=r*c,e[5]=r*h,e[9]=-s,e[2]=n*s-i,e[6]=o+t*s,e[10]=r*a}else if("ZXY"===t.order){const t=a*h,n=a*c,i=l*h,o=l*c;e[0]=t-o*s,e[4]=-r*c,e[8]=i+n*s,e[1]=n+i*s,e[5]=r*h,e[9]=o-t*s,e[2]=-r*l,e[6]=s,e[10]=r*a}else if("ZYX"===t.order){const t=r*h,n=r*c,i=s*h,o=s*c;e[0]=a*h,e[4]=i*l-n,e[8]=t*l+o,e[1]=a*c,e[5]=o*l+t,e[9]=n*l-i,e[2]=-l,e[6]=s*a,e[10]=r*a}else if("YZX"===t.order){const t=r*a,n=r*l,i=s*a,o=s*l;e[0]=a*h,e[4]=o-t*c,e[8]=i*c+n,e[1]=c,e[5]=r*h,e[9]=-s*h,e[2]=-l*h,e[6]=n*c+i,e[10]=t-o*c}else if("XZY"===t.order){const t=r*a,n=r*l,i=s*a,o=s*l;e[0]=a*h,e[4]=-c,e[8]=l*h,e[1]=t*c+o,e[5]=r*h,e[9]=n*c-i,e[2]=i*c-n,e[6]=s*h,e[10]=o*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(bt,t,xt)}lookAt(t,e,n){const i=this.elements;return St.subVectors(t,e),0===St.lengthSq()&&(St.z=1),St.normalize(),wt.crossVectors(n,St),0===wt.lengthSq()&&(1===Math.abs(n.z)?St.x+=1e-4:St.z+=1e-4,St.normalize(),wt.crossVectors(n,St)),wt.normalize(),Et.crossVectors(St,wt),i[0]=wt.x,i[4]=Et.x,i[8]=St.x,i[1]=wt.y,i[5]=Et.y,i[9]=St.y,i[2]=wt.z,i[6]=Et.z,i[10]=St.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,o=this.elements,r=n[0],s=n[4],a=n[8],l=n[12],h=n[1],c=n[5],u=n[9],d=n[13],p=n[2],m=n[6],g=n[10],f=n[14],y=n[3],v=n[7],b=n[11],x=n[15],w=i[0],E=i[4],S=i[8],T=i[12],k=i[1],M=i[5],C=i[9],D=i[13],P=i[2],z=i[6],R=i[10],A=i[14],_=i[3],I=i[7],O=i[11],B=i[15];return o[0]=r*w+s*k+a*P+l*_,o[4]=r*E+s*M+a*z+l*I,o[8]=r*S+s*C+a*R+l*O,o[12]=r*T+s*D+a*A+l*B,o[1]=h*w+c*k+u*P+d*_,o[5]=h*E+c*M+u*z+d*I,o[9]=h*S+c*C+u*R+d*O,o[13]=h*T+c*D+u*A+d*B,o[2]=p*w+m*k+g*P+f*_,o[6]=p*E+m*M+g*z+f*I,o[10]=p*S+m*C+g*R+f*O,o[14]=p*T+m*D+g*A+f*B,o[3]=y*w+v*k+b*P+x*_,o[7]=y*E+v*M+b*z+x*I,o[11]=y*S+v*C+b*R+x*O,o[15]=y*T+v*D+b*A+x*B,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],o=t[12],r=t[1],s=t[5],a=t[9],l=t[13],h=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+o*a*c-i*l*c-o*s*u+n*l*u+i*s*d-n*a*d)+t[7]*(+e*a*d-e*l*u+o*r*u-i*r*d+i*l*h-o*a*h)+t[11]*(+e*l*c-e*s*d-o*r*c+n*r*d+o*s*h-n*l*h)+t[15]*(-i*s*h-e*a*c+e*s*u+i*r*c-n*r*u+n*a*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],s=t[5],a=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11],p=t[12],m=t[13],g=t[14],f=t[15],y=c*g*l-m*u*l+m*a*d-s*g*d-c*a*f+s*u*f,v=p*u*l-h*g*l-p*a*d+r*g*d+h*a*f-r*u*f,b=h*m*l-p*c*l+p*s*d-r*m*d-h*s*f+r*c*f,x=p*c*a-h*m*a-p*s*u+r*m*u+h*s*g-r*c*g,w=e*y+n*v+i*b+o*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/w;return t[0]=y*E,t[1]=(m*u*o-c*g*o-m*i*d+n*g*d+c*i*f-n*u*f)*E,t[2]=(s*g*o-m*a*o+m*i*l-n*g*l-s*i*f+n*a*f)*E,t[3]=(c*a*o-s*u*o-c*i*l+n*u*l+s*i*d-n*a*d)*E,t[4]=v*E,t[5]=(h*g*o-p*u*o+p*i*d-e*g*d-h*i*f+e*u*f)*E,t[6]=(p*a*o-r*g*o-p*i*l+e*g*l+r*i*f-e*a*f)*E,t[7]=(r*u*o-h*a*o+h*i*l-e*u*l-r*i*d+e*a*d)*E,t[8]=b*E,t[9]=(p*c*o-h*m*o-p*n*d+e*m*d+h*n*f-e*c*f)*E,t[10]=(r*m*o-p*s*o+p*n*l-e*m*l-r*n*f+e*s*f)*E,t[11]=(h*s*o-r*c*o-h*n*l+e*c*l+r*n*d-e*s*d)*E,t[12]=x*E,t[13]=(h*m*i-p*c*i+p*n*u-e*m*u-h*n*g+e*c*g)*E,t[14]=(p*s*i-r*m*i-p*n*a+e*m*a+r*n*g-e*s*g)*E,t[15]=(r*c*i-h*s*i+h*n*a-e*c*a-r*n*u+e*s*u)*E,this}scale(t){const e=this.elements,n=t.x,i=t.y,o=t.z;return e[0]*=n,e[4]*=i,e[8]*=o,e[1]*=n,e[5]*=i,e[9]*=o,e[2]*=n,e[6]*=i,e[10]*=o,e[3]*=n,e[7]*=i,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),o=1-n,r=t.x,s=t.y,a=t.z,l=o*r,h=o*s;return this.set(l*r+n,l*s-i*a,l*a+i*s,0,l*s+i*a,h*s+n,h*a-i*r,0,l*a-i*s,h*a+i*r,o*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,o,r){return this.set(1,n,o,0,t,1,r,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,o=e._x,r=e._y,s=e._z,a=e._w,l=o+o,h=r+r,c=s+s,u=o*l,d=o*h,p=o*c,m=r*h,g=r*c,f=s*c,y=a*l,v=a*h,b=a*c,x=n.x,w=n.y,E=n.z;return i[0]=(1-(m+f))*x,i[1]=(d+b)*x,i[2]=(p-v)*x,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(u+f))*w,i[6]=(g+y)*w,i[7]=0,i[8]=(p+v)*E,i[9]=(g-y)*E,i[10]=(1-(u+m))*E,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let o=yt.set(i[0],i[1],i[2]).length();const r=yt.set(i[4],i[5],i[6]).length(),s=yt.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],vt.copy(this);const a=1/o,l=1/r,h=1/s;return vt.elements[0]*=a,vt.elements[1]*=a,vt.elements[2]*=a,vt.elements[4]*=l,vt.elements[5]*=l,vt.elements[6]*=l,vt.elements[8]*=h,vt.elements[9]*=h,vt.elements[10]*=h,e.setFromRotationMatrix(vt),n.x=o,n.y=r,n.z=s,this}makePerspective(t,e,n,i,o,r,s=2e3){const a=this.elements,l=2*o/(e-t),h=2*o/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i);let d,p;if(2e3===s)d=-(r+o)/(r-o),p=-2*r*o/(r-o);else{if(2001!==s)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);d=-r/(r-o),p=-r*o/(r-o)}return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=h,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,i,o,r,s=2e3){const a=this.elements,l=1/(e-t),h=1/(n-i),c=1/(r-o),u=(e+t)*l,d=(n+i)*h;let p,m;if(2e3===s)p=(r+o)*c,m=-2*c;else{if(2001!==s)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=o*c,m=-1*c}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=m,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const yt=new x,vt=new ft,bt=new x(0,0,0),xt=new x(1,1,1),wt=new x,Et=new x,St=new x,Tt=new ft,kt=new b;class Mt{constructor(t=0,e=0,n=0,i=Mt.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,o=i[0],r=i[4],s=i[8],a=i[1],l=i[5],h=i[9],c=i[2],u=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(m(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-r,o)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-m(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,o),this._z=0);break;case"ZXY":this._x=Math.asin(m(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-r,l)):(this._y=0,this._z=Math.atan2(a,o));break;case"ZYX":this._y=Math.asin(-m(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,o)):(this._x=0,this._z=Math.atan2(-r,l));break;case"YZX":this._z=Math.asin(m(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,o)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-m(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Tt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Tt,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return kt.setFromEuler(this),this.setFromQuaternion(kt,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Mt.DEFAULT_ORDER="XYZ";class Ct{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Dt=0;const Pt=new x,zt=new b,Rt=new ft,At=new x,_t=new x,It=new x,Ot=new b,Bt=new x(1,0,0),Ht=new x(0,1,0),Ft=new x(0,0,1),Lt={type:"added"},Vt={type:"removed"},Wt={type:"childadded",child:null},Nt={type:"childremoved",child:null};class jt extends u{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dt++}),this.uuid=p(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=jt.DEFAULT_UP.clone();const t=new x,e=new Mt,n=new b,i=new x(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ft},normalMatrix:{value:new S}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=jt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ct,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return zt.setFromAxisAngle(t,e),this.quaternion.multiply(zt),this}rotateOnWorldAxis(t,e){return zt.setFromAxisAngle(t,e),this.quaternion.premultiply(zt),this}rotateX(t){return this.rotateOnAxis(Bt,t)}rotateY(t){return this.rotateOnAxis(Ht,t)}rotateZ(t){return this.rotateOnAxis(Ft,t)}translateOnAxis(t,e){return Pt.copy(t).applyQuaternion(this.quaternion),this.position.add(Pt.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Bt,t)}translateY(t){return this.translateOnAxis(Ht,t)}translateZ(t){return this.translateOnAxis(Ft,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Rt.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?At.copy(t):At.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),_t.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rt.lookAt(_t,At,this.up):Rt.lookAt(At,_t,this.up),this.quaternion.setFromRotationMatrix(Rt),i&&(Rt.extractRotation(i.matrixWorld),zt.setFromRotationMatrix(Rt),this.quaternion.premultiply(zt.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Lt),Wt.child=t,this.dispatchEvent(Wt),Wt.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Vt),Nt.child=t,this.dispatchEvent(Nt),Nt.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Rt.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Rt.multiply(t.parent.matrixWorld)),t.applyMatrix4(Rt),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Lt),Wt.child=t,this.dispatchEvent(Wt),Wt.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const i=this.children;for(let o=0,r=i.length;o<r;o++)i[o].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_t,t,It),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_t,Ot,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};function o(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map((t=>({...t,boundingBox:t.boundingBox?t.boundingBox.toJSON():void 0,boundingSphere:t.boundingSphere?t.boundingSphere.toJSON():void 0}))),i.instanceInfo=this._instanceInfo.map((t=>({...t}))),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(t),i.indirectTexture=this._indirectTexture.toJSON(t),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];o(t.shapes,i)}else o(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(o(t.materials,this.material[n]));i.material=e}else i.material=o(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(o(t.animations,n))}}if(e){const e=r(t.geometries),i=r(t.materials),o=r(t.textures),s=r(t.images),a=r(t.shapes),l=r(t.skeletons),h=r(t.animations),c=r(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),o.length>0&&(n.textures=o),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),h.length>0&&(n.animations=h),c.length>0&&(n.nodes=c)}return n.object=i,n;function r(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}jt.DEFAULT_UP=new x(0,1,0),jt.DEFAULT_MATRIX_AUTO_UPDATE=!0,jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const qt=new x,Gt=new x,Ut=new x,Yt=new x,Xt=new x,Zt=new x,Jt=new x,Qt=new x,Kt=new x,$t=new x,te=new N,ee=new N,ne=new N;class ie{constructor(t=new x,e=new x,n=new x){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),qt.subVectors(t,e),i.cross(qt);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(t,e,n,i,o){qt.subVectors(i,e),Gt.subVectors(n,e),Ut.subVectors(t,e);const r=qt.dot(qt),s=qt.dot(Gt),a=qt.dot(Ut),l=Gt.dot(Gt),h=Gt.dot(Ut),c=r*l-s*s;if(0===c)return o.set(0,0,0),null;const u=1/c,d=(l*a-s*h)*u,p=(r*h-s*a)*u;return o.set(1-d-p,p,d)}static containsPoint(t,e,n,i){return null!==this.getBarycoord(t,e,n,i,Yt)&&Yt.x>=0&&Yt.y>=0&&Yt.x+Yt.y<=1}static getInterpolation(t,e,n,i,o,r,s,a){return null===this.getBarycoord(t,e,n,i,Yt)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(o,Yt.x),a.addScaledVector(r,Yt.y),a.addScaledVector(s,Yt.z),a)}static getInterpolatedAttribute(t,e,n,i,o,r){return te.setScalar(0),ee.setScalar(0),ne.setScalar(0),te.fromBufferAttribute(t,e),ee.fromBufferAttribute(t,n),ne.fromBufferAttribute(t,i),r.setScalar(0),r.addScaledVector(te,o.x),r.addScaledVector(ee,o.y),r.addScaledVector(ne,o.z),r}static isFrontFacing(t,e,n,i){return qt.subVectors(n,e),Gt.subVectors(t,e),qt.cross(Gt).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return qt.subVectors(this.c,this.b),Gt.subVectors(this.a,this.b),.5*qt.cross(Gt).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ie.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ie.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,i,o){return ie.getInterpolation(t,this.a,this.b,this.c,e,n,i,o)}containsPoint(t){return ie.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ie.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,o=this.c;let r,s;Xt.subVectors(i,n),Zt.subVectors(o,n),Qt.subVectors(t,n);const a=Xt.dot(Qt),l=Zt.dot(Qt);if(a<=0&&l<=0)return e.copy(n);Kt.subVectors(t,i);const h=Xt.dot(Kt),c=Zt.dot(Kt);if(h>=0&&c<=h)return e.copy(i);const u=a*c-h*l;if(u<=0&&a>=0&&h<=0)return r=a/(a-h),e.copy(n).addScaledVector(Xt,r);$t.subVectors(t,o);const d=Xt.dot($t),p=Zt.dot($t);if(p>=0&&d<=p)return e.copy(o);const m=d*l-a*p;if(m<=0&&l>=0&&p<=0)return s=l/(l-p),e.copy(n).addScaledVector(Zt,s);const g=h*p-d*c;if(g<=0&&c-h>=0&&d-p>=0)return Jt.subVectors(o,i),s=(c-h)/(c-h+(d-p)),e.copy(i).addScaledVector(Jt,s);const f=1/(g+m+u);return r=m*f,s=u*f,e.copy(n).addScaledVector(Xt,r).addScaledVector(Zt,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const oe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},re={h:0,s:0,l:0},se={h:0,s:0,l:0};function ae(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class le{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=s){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,R.colorSpaceToWorking(this,e),this}setRGB(t,e,n,i=R.workingColorSpace){return this.r=t,this.g=e,this.b=n,R.colorSpaceToWorking(this,i),this}setHSL(t,e,n,i=R.workingColorSpace){if(t=(t%(o=1)+o)%o,e=m(e,0,1),n=m(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,o=2*n-i;this.r=ae(o,i,t+1/3),this.g=ae(o,i,t),this.b=ae(o,i,t-1/3)}var o;return R.colorSpaceToWorking(this,i),this}setStyle(t,e=s){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=i[1],o=n.length;if(3===o)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===o)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=s){const n=oe[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=A(t.r),this.g=A(t.g),this.b=A(t.b),this}copyLinearToSRGB(t){return this.r=_(t.r),this.g=_(t.g),this.b=_(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=s){return R.workingToColorSpace(he.copy(this),t),65536*Math.round(m(255*he.r,0,255))+256*Math.round(m(255*he.g,0,255))+Math.round(m(255*he.b,0,255))}getHexString(t=s){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=R.workingColorSpace){R.workingToColorSpace(he.copy(this),e);const n=he.r,i=he.g,o=he.b,r=Math.max(n,i,o),s=Math.min(n,i,o);let a,l;const h=(s+r)/2;if(s===r)a=0,l=0;else{const t=r-s;switch(l=h<=.5?t/(r+s):t/(2-r-s),r){case n:a=(i-o)/t+(i<o?6:0);break;case i:a=(o-n)/t+2;break;case o:a=(n-i)/t+4}a/=6}return t.h=a,t.s=l,t.l=h,t}getRGB(t,e=R.workingColorSpace){return R.workingToColorSpace(he.copy(this),e),t.r=he.r,t.g=he.g,t.b=he.b,t}getStyle(t=s){R.workingToColorSpace(he.copy(this),t);const e=he.r,n=he.g,i=he.b;return t!==s?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(t,e,n){return this.getHSL(re),this.setHSL(re.h+t,re.s+e,re.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(re),t.getHSL(se);const n=g(re.h,se.h,e),i=g(re.s,se.s,e),o=g(re.l,se.l,e);return this.setHSL(n,i,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,o=t.elements;return this.r=o[0]*e+o[3]*n+o[6]*i,this.g=o[1]*e+o[4]*n+o[7]*i,this.b=o[2]*e+o[5]*n+o[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const he=new le;le.NAMES=oe;let ce=0;class ue extends u{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ce++}),this.uuid=p(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new le(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=c,this.stencilZFail=c,this.stencilZPass=c,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),100!==this.blendEquation&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==c&&(n.stencilFail=this.stencilFail),this.stencilZFail!==c&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==c&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),o=i(t.images);e.length>0&&(n.textures=e),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class de extends ue{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Mt,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const pe=new x,me=new v;let ge=0;class fe{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:ge++}),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)me.fromBufferAttribute(this,e),me.applyMatrix3(t),this.setXY(e,me.x,me.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)pe.fromBufferAttribute(this,e),pe.applyMatrix3(t),this.setXYZ(e,pe.x,pe.y,pe.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)pe.fromBufferAttribute(this,e),pe.applyMatrix4(t),this.setXYZ(e,pe.x,pe.y,pe.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)pe.fromBufferAttribute(this,e),pe.applyNormalMatrix(t),this.setXYZ(e,pe.x,pe.y,pe.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)pe.fromBufferAttribute(this,e),pe.transformDirection(t),this.setXYZ(e,pe.x,pe.y,pe.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=f(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=y(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=f(e,this.array)),e}setX(t,e){return this.normalized&&(e=y(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=f(e,this.array)),e}setY(t,e){return this.normalized&&(e=y(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=f(e,this.array)),e}setZ(t,e){return this.normalized&&(e=y(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=f(e,this.array)),e}setW(t,e){return this.normalized&&(e=y(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=y(e,this.array),n=y(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=y(e,this.array),n=y(n,this.array),i=y(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,o){return t*=this.itemSize,this.normalized&&(e=y(e,this.array),n=y(n,this.array),i=y(i,this.array),o=y(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class ye extends fe{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class ve extends fe{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class be extends fe{constructor(t,e,n){super(new Float32Array(t),e,n)}}let xe=0;const we=new ft,Ee=new jt,Se=new x,Te=new j,ke=new j,Me=new x;class Ce extends u{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xe++}),this.uuid=p(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(function(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}(t)?ve:ye)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new S).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return we.makeRotationFromQuaternion(t),this.applyMatrix4(we),this}rotateX(t){return we.makeRotationX(t),this.applyMatrix4(we),this}rotateY(t){return we.makeRotationY(t),this.applyMatrix4(we),this}rotateZ(t){return we.makeRotationZ(t),this.applyMatrix4(we),this}translate(t,e,n){return we.makeTranslation(t,e,n),this.applyMatrix4(we),this}scale(t,e,n){return we.makeScale(t,e,n),this.applyMatrix4(we),this}lookAt(t){return Ee.lookAt(t),Ee.updateMatrix(),this.applyMatrix4(Ee.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Se).negate(),this.translate(Se.x,Se.y,Se.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}this.setAttribute("position",new be(e,3))}else{const n=Math.min(t.length,e.count);for(let i=0;i<n;i++){const n=t[i];e.setXYZ(i,n.x,n.y,n.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new j);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new x(-1/0,-1/0,-1/0),new x(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Te.setFromBufferAttribute(n),this.morphTargetsRelative?(Me.addVectors(this.boundingBox.min,Te.min),this.boundingBox.expandByPoint(Me),Me.addVectors(this.boundingBox.max,Te.max),this.boundingBox.expandByPoint(Me)):(this.boundingBox.expandByPoint(Te.min),this.boundingBox.expandByPoint(Te.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new at);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new x,1/0);if(t){const n=this.boundingSphere.center;if(Te.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];ke.setFromBufferAttribute(n),this.morphTargetsRelative?(Me.addVectors(Te.min,ke.min),Te.expandByPoint(Me),Me.addVectors(Te.max,ke.max),Te.expandByPoint(Me)):(Te.expandByPoint(ke.min),Te.expandByPoint(ke.max))}Te.getCenter(n);let i=0;for(let e=0,o=t.count;e<o;e++)Me.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(Me));if(e)for(let o=0,r=e.length;o<r;o++){const r=e[o],s=this.morphTargetsRelative;for(let e=0,o=r.count;e<o;e++)Me.fromBufferAttribute(r,e),s&&(Se.fromBufferAttribute(t,e),Me.add(Se)),i=Math.max(i,n.distanceToSquared(Me))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,i=e.normal,o=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new fe(new Float32Array(4*n.count),4));const r=this.getAttribute("tangent"),s=[],a=[];for(let t=0;t<n.count;t++)s[t]=new x,a[t]=new x;const l=new x,h=new x,c=new x,u=new v,d=new v,p=new v,m=new x,g=new x;function f(t,e,i){l.fromBufferAttribute(n,t),h.fromBufferAttribute(n,e),c.fromBufferAttribute(n,i),u.fromBufferAttribute(o,t),d.fromBufferAttribute(o,e),p.fromBufferAttribute(o,i),h.sub(l),c.sub(l),d.sub(u),p.sub(u);const r=1/(d.x*p.y-p.x*d.y);isFinite(r)&&(m.copy(h).multiplyScalar(p.y).addScaledVector(c,-d.y).multiplyScalar(r),g.copy(c).multiplyScalar(d.x).addScaledVector(h,-p.x).multiplyScalar(r),s[t].add(m),s[e].add(m),s[i].add(m),a[t].add(g),a[e].add(g),a[i].add(g))}let y=this.groups;0===y.length&&(y=[{start:0,count:t.count}]);for(let e=0,n=y.length;e<n;++e){const n=y[e],i=n.start;for(let e=i,o=i+n.count;e<o;e+=3)f(t.getX(e+0),t.getX(e+1),t.getX(e+2))}const b=new x,w=new x,E=new x,S=new x;function T(t){E.fromBufferAttribute(i,t),S.copy(E);const e=s[t];b.copy(e),b.sub(E.multiplyScalar(E.dot(e))).normalize(),w.crossVectors(S,e);const n=w.dot(a[t])<0?-1:1;r.setXYZW(t,b.x,b.y,b.z,n)}for(let e=0,n=y.length;e<n;++e){const n=y[e],i=n.start;for(let e=i,o=i+n.count;e<o;e+=3)T(t.getX(e+0)),T(t.getX(e+1)),T(t.getX(e+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new fe(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new x,o=new x,r=new x,s=new x,a=new x,l=new x,h=new x,c=new x;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),p=t.getX(u+1),m=t.getX(u+2);i.fromBufferAttribute(e,d),o.fromBufferAttribute(e,p),r.fromBufferAttribute(e,m),h.subVectors(r,o),c.subVectors(i,o),h.cross(c),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),s.add(h),a.add(h),l.add(h),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let t=0,s=e.count;t<s;t+=3)i.fromBufferAttribute(e,t+0),o.fromBufferAttribute(e,t+1),r.fromBufferAttribute(e,t+2),h.subVectors(r,o),c.subVectors(i,o),h.cross(c),n.setXYZ(t+0,h.x,h.y,h.z),n.setXYZ(t+1,h.x,h.y,h.z),n.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Me.fromBufferAttribute(t,e),Me.normalize(),t.setXYZ(e,Me.x,Me.y,Me.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,o=t.normalized,r=new n.constructor(e.length*i);let s=0,a=0;for(let o=0,l=e.length;o<l;o++){s=t.isInterleavedBufferAttribute?e[o]*t.data.stride+t.offset:e[o]*i;for(let t=0;t<i;t++)r[a++]=n[s++]}return new fe(r,i,o)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ce,n=this.index.array,i=this.attributes;for(const o in i){const r=t(i[o],n);e.setAttribute(o,r)}const o=this.morphAttributes;for(const i in o){const r=[],s=o[i];for(let e=0,i=s.length;e<i;e++){const i=t(s[e],n);r.push(i)}e.morphAttributes[i]=r}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let t=0,n=r.length;t<n;t++){const n=r[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let o=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],r=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];r.push(i.toJSON(t.data))}r.length>0&&(i[e]=r,o=!0)}o&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere=s.toJSON()),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone());const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const o=t.morphAttributes;for(const t in o){const n=[],i=o[t];for(let t=0,o=i.length;t<o;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let t=0,e=r.length;t<e;t++){const e=r[t];this.addGroup(e.start,e.count,e.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const De=new ft,Pe=new gt,ze=new at,Re=new x,Ae=new x,_e=new x,Ie=new x,Oe=new x,Be=new x,He=new x,Fe=new x;class Le extends jt{constructor(t=new Ce,e=new de){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,o=n.morphAttributes.position,r=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const s=this.morphTargetInfluences;if(o&&s){Be.set(0,0,0);for(let n=0,i=o.length;n<i;n++){const i=s[n],a=o[n];0!==i&&(Oe.fromBufferAttribute(a,t),r?Be.addScaledVector(Oe,i):Be.addScaledVector(Oe.sub(e),i))}e.add(Be)}return e}raycast(t,e){const n=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),ze.copy(n.boundingSphere),ze.applyMatrix4(o),Pe.copy(t.ray).recast(t.near),!1===ze.containsPoint(Pe.origin)){if(null===Pe.intersectSphere(ze,Re))return;if(Pe.origin.distanceToSquared(Re)>(t.far-t.near)**2)return}De.copy(o).invert(),Pe.copy(t.ray).applyMatrix4(De),null!==n.boundingBox&&!1===Pe.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,Pe)}}_computeIntersections(t,e,n){let i;const o=this.geometry,r=this.material,s=o.index,a=o.attributes.position,l=o.attributes.uv,h=o.attributes.uv1,c=o.attributes.normal,u=o.groups,d=o.drawRange;if(null!==s)if(Array.isArray(r))for(let o=0,a=u.length;o<a;o++){const a=u[o],p=r[a.materialIndex];for(let o=Math.max(a.start,d.start),r=Math.min(s.count,Math.min(a.start+a.count,d.start+d.count));o<r;o+=3)i=Ve(this,p,t,n,l,h,c,s.getX(o),s.getX(o+1),s.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=a.materialIndex,e.push(i))}else for(let o=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);o<a;o+=3)i=Ve(this,r,t,n,l,h,c,s.getX(o),s.getX(o+1),s.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),e.push(i));else if(void 0!==a)if(Array.isArray(r))for(let o=0,s=u.length;o<s;o++){const s=u[o],p=r[s.materialIndex];for(let o=Math.max(s.start,d.start),r=Math.min(a.count,Math.min(s.start+s.count,d.start+d.count));o<r;o+=3)i=Ve(this,p,t,n,l,h,c,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=s.materialIndex,e.push(i))}else for(let o=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);o<s;o+=3)i=Ve(this,r,t,n,l,h,c,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),e.push(i))}}function Ve(t,e,n,i,o,r,s,a,l,h){t.getVertexPosition(a,Ae),t.getVertexPosition(l,_e),t.getVertexPosition(h,Ie);const c=function(t,e,n,i,o,r,s,a){let l;if(l=1===e.side?i.intersectTriangle(s,r,o,!0,a):i.intersectTriangle(o,r,s,0===e.side,a),null===l)return null;Fe.copy(a),Fe.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(Fe);return h<n.near||h>n.far?null:{distance:h,point:Fe.clone(),object:t}}(t,e,n,i,Ae,_e,Ie,He);if(c){const t=new x;ie.getBarycoord(He,Ae,_e,Ie,t),o&&(c.uv=ie.getInterpolatedAttribute(o,a,l,h,t,new v)),r&&(c.uv1=ie.getInterpolatedAttribute(r,a,l,h,t,new v)),s&&(c.normal=ie.getInterpolatedAttribute(s,a,l,h,t,new x),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const e={a,b:l,c:h,normal:new x,materialIndex:0};ie.getNormal(Ae,_e,Ie,e.normal),c.face=e,c.barycoord=t}return c}function We(t,e){return t&&t.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t):t}class Ne{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],o=e[n-1];t:{e:{let r;n:{i:if(!(t<i)){for(let r=n+2;;){if(void 0===i){if(t<o)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===r)break;if(o=i,i=e[++n],t<i)break e}r=e.length;break n}if(t>=o)break t;{const s=e[1];t<s&&(n=2,o=s);for(let r=n-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(n===r)break;if(i=o,o=e[--n-1],t>=o)break e}r=n,n=0}}for(;n<r;){const i=n+r>>>1;t<e[i]?r=i:n=i+1}if(i=e[n],o=e[n-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,i)}return this.interpolate_(n,o,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=t*i;for(let t=0;t!==i;++t)e[t]=n[o+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class je extends Ne{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const i=this.parameterPositions;let o=t-2,r=t+1,s=i[o],a=i[r];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:o=t,s=2*e-n;break;case 2402:o=i.length-2,s=e+i[o]-i[o+1];break;default:o=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:r=t,a=2*n-e;break;case 2402:r=1,a=n+i[1]-i[0];break;default:r=t-1,a=e}const l=.5*(n-e),h=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-n),this._offsetPrev=o*h,this._offsetNext=r*h}interpolate_(t,e,n,i){const o=this.resultBuffer,r=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),m=p*p,g=m*p,f=-u*g+2*u*m-u*p,y=(1+u)*g+(-1.5-2*u)*m+(-.5+u)*p+1,v=(-1-d)*g+(1.5+d)*m+.5*p,b=d*g-d*m;for(let t=0;t!==s;++t)o[t]=f*r[h+t]+y*r[l+t]+v*r[a+t]+b*r[c+t];return o}}class qe extends Ne{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const o=this.resultBuffer,r=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,h=(n-e)/(i-e),c=1-h;for(let t=0;t!==s;++t)o[t]=r[l+t]*c+r[a+t]*h;return o}}class Ge extends Ne{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ue{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=We(e,this.TimeBufferType),this.values=We(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:We(t.times,Array),values:We(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Ge(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new qe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new je(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case i:e=this.InterpolantFactoryMethodDiscrete;break;case o:e=this.InterpolantFactoryMethodLinear;break;case r:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return i;case this.InterpolantFactoryMethodLinear:return o;case this.InterpolantFactoryMethodSmooth:return r}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let o=0,r=i-1;for(;o!==i&&n[o]<t;)++o;for(;-1!==r&&n[r]>e;)--r;if(++r,0!==o||r!==i){o>=r&&(r=Math.max(r,1),o=r-1);const t=this.getValueSize();this.times=n.slice(o,r),this.values=this.values.slice(o*t,r*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let e=0;e!==o;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==r&&r>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,r),t=!1;break}r=i}if(void 0!==i&&(s=i,ArrayBuffer.isView(s)&&!(s instanceof DataView)))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}var s;return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===r,o=t.length-1;let s=1;for(let r=1;r<o;++r){let o=!1;const a=t[r];if(a!==t[r+1]&&(1!==r||a!==t[0]))if(i)o=!0;else{const t=r*n,i=t-n,s=t+n;for(let r=0;r!==n;++r){const n=e[t+r];if(n!==e[i+r]||n!==e[s+r]){o=!0;break}}}if(o){if(r!==s){t[s]=t[r];const i=r*n,o=s*n;for(let t=0;t!==n;++t)e[o+t]=e[i+t]}++s}}if(o>0){t[s]=t[o];for(let t=o*n,i=s*n,r=0;r!==n;++r)e[i+r]=e[t+r];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Ue.prototype.ValueTypeName="",Ue.prototype.TimeBufferType=Float32Array,Ue.prototype.ValueBufferType=Float32Array,Ue.prototype.DefaultInterpolation=o;class Ye extends Ue{constructor(t,e,n){super(t,e,n)}}Ye.prototype.ValueTypeName="bool",Ye.prototype.ValueBufferType=Array,Ye.prototype.DefaultInterpolation=i,Ye.prototype.InterpolantFactoryMethodLinear=void 0,Ye.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Ue{constructor(t,e,n,i){super(t,e,n,i)}}).prototype.ValueTypeName="color";(class extends Ue{constructor(t,e,n,i){super(t,e,n,i)}}).prototype.ValueTypeName="number";class Xe extends Ne{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const o=this.resultBuffer,r=this.sampleValues,s=this.valueSize,a=(n-e)/(i-e);let l=t*s;for(let t=l+s;l!==t;l+=4)b.slerpFlat(o,0,r,l-s,r,l,a);return o}}class Ze extends Ue{constructor(t,e,n,i){super(t,e,n,i)}InterpolantFactoryMethodLinear(t){return new Xe(this.times,this.values,this.getValueSize(),t)}}Ze.prototype.ValueTypeName="quaternion",Ze.prototype.InterpolantFactoryMethodSmooth=void 0;class Je extends Ue{constructor(t,e,n){super(t,e,n)}}Je.prototype.ValueTypeName="string",Je.prototype.ValueBufferType=Array,Je.prototype.DefaultInterpolation=i,Je.prototype.InterpolantFactoryMethodLinear=void 0,Je.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Ue{constructor(t,e,n,i){super(t,e,n,i)}}).prototype.ValueTypeName="vector";Error,new WeakMap,new WeakMap;const Qe="\\[\\]\\.:\\/",Ke=new RegExp("["+Qe+"]","g"),$e="[^"+Qe+"]",tn="[^"+Qe.replace("\\.","")+"]",en=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",$e)+/(WCOD+)?/.source.replace("WCOD",tn)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$e)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$e)+"$"),nn=["material","materials","bones","map"];class on{constructor(t,e,n){this.path=e,this.parsedPath=n||on.parseTrackName(e),this.node=on.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new on.Composite(t,e,n):new on(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Ke,"")}static parseTrackName(t){const e=en.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==nn.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const o=t[i];if(o.name===e||o.uuid===e)return o;const r=n(o.children);if(r)return r}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let o=e.propertyIndex;if(t||(t=on.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const r=t[i];if(void 0===r){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?s=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}a=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=o}else void 0!==r.fromArray&&void 0!==r.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(a=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}on.Composite=class{constructor(t,e,n){const i=n||on.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=n.length;i!==o;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},on.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},on.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},on.prototype.GetterByBindingType=[on.prototype._getValue_direct,on.prototype._getValue_array,on.prototype._getValue_arrayElement,on.prototype._getValue_toArray],on.prototype.SetterByBindingTypeAndVersioning=[[on.prototype._setValue_direct,on.prototype._setValue_direct_setNeedsUpdate,on.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[on.prototype._setValue_array,on.prototype._setValue_array_setNeedsUpdate,on.prototype._setValue_array_setMatrixWorldNeedsUpdate],[on.prototype._setValue_arrayElement,on.prototype._setValue_arrayElement_setNeedsUpdate,on.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[on.prototype._setValue_fromArray,on.prototype._setValue_fromArray_setNeedsUpdate,on.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"178"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="178")},928:t=>{function e(t){return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}e.keys=()=>[],e.resolve=e,e.id=928,t.exports=e}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var t=n(72),e=n.n(t),i=n(825),o=n.n(i),r=n(659),s=n.n(r),a=n(56),l=n.n(a),h=n(540),c=n.n(h),u=n(113),d=n.n(u),p=n(646),m={};m.styleTagTransform=d(),m.setAttributes=l(),m.insert=s().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=c(),e()(p.A,m),p.A&&p.A.locals&&p.A.locals;var g=n(676);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,v(i.key),i)}}function v(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}var b=new(function(){return t=function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;this.x=0,this.y=0,this.initialized=!1,this.lastUpdateTime=0,t.instance=this,this.init()},e=[{key:"init",value:function(){var t=this;this.initialized?console.warn("[MouseTracker] Already initialized"):(document.addEventListener("mousemove",(function(e){t.x=e.clientX,t.y=e.clientY,t.lastUpdateTime=Date.now()})),this.initialized=!0,console.log("[MouseTracker] Global mouse tracking initialized"))}},{key:"getPosition",value:function(){return{x:this.x,y:this.y}}},{key:"getTimeSinceLastMove",value:function(){return Date.now()-this.lastUpdateTime}},{key:"isInsideBounds",value:function(t){return this.x>=t.left&&this.x<=t.right&&this.y>=t.top&&this.y<=t.bottom}},{key:"getRelativeDirection",value:function(t){var e=t.left+t.width/2;return this.x>e?"right":"left"}}],e&&y(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}());function x(){!function(){var t=document.querySelector(".nav-bar .nav-container:nth-child(3)"),e=document.getElementById("navbar3-dimensions");if(t&&e){var n=t.offsetWidth,i=t.offsetHeight;e.textContent="".concat(n,"px x ").concat(i,"px")}var o=document.querySelector(".nav-bar");if(o){var r=o.offsetHeight;document.documentElement.style.setProperty("--navbar-height","".concat(r,"px"))}}(),function(){var t=document.querySelector(".content-container"),e=document.getElementById("home-dimensions");if(t&&e){var n=t.offsetWidth,i=t.offsetHeight;e.textContent="".concat(n,"px x ").concat(i,"px")}}(),function(){var t=document.querySelector(".nav-bar .nav-container:nth-child(1)"),e=document.getElementById("navbar-buffer1-dimensions");if(t&&e){var n=t.offsetWidth,i=t.offsetHeight;e.textContent="".concat(n,"px x ").concat(i,"px")}var o=document.querySelector(".nav-bar .nav-container:nth-child(5)"),r=document.getElementById("navbar-buffer5-dimensions");if(o&&r){var s=o.offsetWidth,a=o.offsetHeight;r.textContent="".concat(s,"px x ").concat(a,"px")}var l=document.querySelector(".content-buffer"),h=document.getElementById("content-buffer-dimensions");if(l&&h){var c=l.offsetWidth,u=l.offsetHeight;h.textContent="".concat(c,"px x ").concat(u,"px")}var d=document.querySelector(".bottom-buffer-bar"),p=document.getElementById("bottom-buffer-dimensions");if(d&&p){var m=d.offsetWidth,g=d.offsetHeight;p.textContent="".concat(m,"px x ").concat(g,"px")}}(),function(){var t=document.querySelector(".nav-bar .nav-container:nth-child(4)"),e=document.querySelector(".nav-bar"),n=t.querySelector(".collapsed-navbar");if(n){var i=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--collapse-breakpoint")),o="none"!==window.getComputedStyle(n).display;if(window.innerWidth>i){var r=document.querySelector(".collapsed-menu");r&&(r.style.display="none")}if(o){var s=document.createElement("div");s.style.position="absolute",s.style.left="-9999px",s.style.visibility="hidden",document.body.appendChild(s);var a=t.querySelectorAll("button"),l=0,h=n.cloneNode(!0);h.style.display="block",h.classList.add("active"),s.appendChild(h);var c=h.offsetWidth;a.forEach((function(t){if(t!==n){var e=t.cloneNode(!0);e.style.display="block",e.classList.add("active"),s.appendChild(e);var i=e.offsetWidth;i>l&&(l=i)}})),document.body.removeChild(s);var u=l+c+4;t.dataset.minWidth="".concat(u,"px"),t.classList.add("enforce-min-width"),t.style.minWidth="".concat(u,"px"),e.style.minWidth=""}else delete t.dataset.minWidth,t.classList.remove("enforce-min-width"),t.style.minWidth="",e.style.minWidth=""}}();var t=document.querySelector(".site-container");t&&t.classList.contains("borders-hidden")&&(document.querySelectorAll('[id$="-dimensions"]').forEach((function(t){t.style.display="none"})),document.querySelectorAll(".dimension-container").forEach((function(t){t.style.display="none"})))}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,S(i.key),i)}}function S(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}var T=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.handler=n,this.containerId=e.containerId,this.sliderClass=e.sliderClass||"dynamic-slider",this.sliderElement=null,this.sliderInstance=null,this.sliderState={activePosition:2,currentHoveredOption:null,isAnimating:!1,mouseEnteredFromRight:null,entryDirection:null,buttonWidth:0,insideSlider:!1,lastCheckTime:0,shortestTextWidth:0,buttonJustSelected:!1},this.ANIMATION_DURATION=800,this.MONITOR_INTERVAL=100,this._themeSelector=null,this._selectorBackground=null,this._options=null,this._borderTop=null,this._borderBottom=null,this.handleMousePositionUpdate=this.handleMousePositionUpdate.bind(this),console.log("[slider_component_engine] Initializing slider engine with full hover animations")},e=[{key:"getSelectorClass",value:function(){return this.sliderClass.split(" ")[0]}},{key:"generateHTML",value:function(){var t=this.options.options.map((function(t,e){var n=t.active?" active":"",i=t.dataAttributes||"";return'\n        <div class="option'.concat(n,'" data-position="').concat(t.position,'" ').concat(i,">\n          <h3>").concat(t.text,"</h3>\n        </div>\n      ").trim()})).join("");return'\n      <div class="slider-selector '.concat(this.sliderClass,'">\n        <div class="border-container">\n          <div class="border-segment border-top"></div>\n          <div class="border-segment border-bottom"></div>\n        </div>\n        <div class="selector-background"></div>\n        ').concat(t,"\n      </div>\n    ").trim()}},{key:"createSliderContainer",value:function(){var t,e;console.log("[slider_component_engine] Creating container for: ".concat(this.containerId));var n=document.getElementById(this.containerId);if(!n)return console.error("[slider_component_engine] ERROR: Container ".concat(this.containerId," not found in DOM")),!1;n.classList.add("slider-container"),n.style.border="1px solid yellow",console.log("[".concat(this.containerId,"] Parent element:"),n.parentElement),console.log("[".concat(this.containerId,"] Parent class:"),null===(t=n.parentElement)||void 0===t?void 0:t.className),console.log("[".concat(this.containerId,"] Parent width:"),null===(e=n.parentElement)||void 0===e?void 0:e.offsetWidth);var i=this.generateHTML();n.innerHTML=i,this.sliderElement=n.querySelector(".slider-selector");var o=null!==this.sliderElement;return console.log("[slider_component_engine] Slider element created: ".concat(o)),o}},{key:"init",value:function(){if(console.log("[slider_component_engine] Initializing: ".concat(this.sliderClass)),!this.createSliderContainer())return console.error("[slider_component_engine] Failed to create slider container"),!1;var t=this.getSelectorClass();if(this._themeSelector=document.querySelector(".slider-selector.".concat(t)),this._selectorBackground=document.querySelector(".slider-selector.".concat(t," .selector-background")),this._options=document.querySelectorAll(".slider-selector.".concat(t," .option")),this._borderTop=document.querySelector(".slider-selector.".concat(t," .border-top")),this._borderBottom=document.querySelector(".slider-selector.".concat(t," .border-bottom")),!this._themeSelector)return console.error("[slider_component_engine] Core slider element not found for ".concat(t)),!1;try{return this.equalizeButtonWidths(),this.initializeSelector(),this.setupMouseEvents(),this.setupOptionClickHandlers(),this.setupResizeHandler(),this.setupMutationObserver(),this.setupMouseTracking(),this.startContinuousMonitoring(),console.log("[slider_component_engine] Initialization complete for: ".concat(this.sliderClass)),!0}catch(t){return console.error("[slider_component_engine] ERROR during initialization:",t),!1}}},{key:"calculateBorderWidth",value:function(){return.9*this.sliderState.shortestTextWidth}},{key:"calculateBorderPosition",value:function(t,e){if(!t||!e)return 0;var n=t.getBoundingClientRect();return n.left-e.left+n.width/2-this.calculateBorderWidth()/2}},{key:"updateBorderTransform",value:function(t){if(this._borderTop&&this._borderBottom){var e="translateX(".concat(t,"px)");this._borderTop.style.transform=e,this._borderBottom.style.transform=e}}},{key:"setBorderTransition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._borderTop&&this._borderBottom&&(this._borderTop.style.transition=t?"none":"transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1)",this._borderBottom.style.transition=t?"none":"transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1)",t&&this._borderTop.offsetWidth)}},{key:"getCSSVariable",value:function(t){return getComputedStyle(document.documentElement).getPropertyValue(t).trim()}},{key:"equalizeButtonWidths",value:function(){if(!this._options||0===this._options.length)return 0;var t=0;return this._options.forEach((function(t){t.style.width="auto"})),this._options.forEach((function(e){var n=e.offsetWidth;t=Math.max(t,n),console.log("[slider_component_engine] Button '".concat(e.textContent.trim(),"' natural width: ").concat(n,"px"))})),console.log("[slider_component_engine] Setting all buttons to max width: ".concat(t,"px")),this._options.forEach((function(e){e.style.width="".concat(t,"px")})),this.calculateShortestTextWidth(),t}},{key:"calculateShortestTextWidth",value:function(){if(!this._options||0===this._options.length)return 100;var t=1/0,e=document.createElement("span");e.style.visibility="hidden",e.style.position="absolute",e.style.whiteSpace="nowrap";var n=this.getSelectorClass(),i=document.querySelector(".slider-selector.".concat(n," .option h3"));return e.style.font=i?getComputedStyle(i).font:"bold clamp(0.5rem, 1.2vw, 2.3rem) Helvetica, Tahoma, sans-serif",document.body.appendChild(e),this._options.forEach((function(n){var i=n.querySelector("h3");if(i){var o=i.textContent;e.textContent=o;var r=e.offsetWidth;t=Math.min(t,r)}})),document.body.removeChild(e),this.sliderState.shortestTextWidth=Math.max(t,50),this.sliderState.shortestTextWidth}},{key:"initializeSelector",value:function(){var t=this;if(!this._themeSelector||!this._selectorBackground)return console.error("Slider elements not available for initialization"),!1;var e=this.getSelectorClass(),n=document.querySelector(".slider-selector.".concat(e," .option.active"));if(!n)return console.warn("No active option found"),!1;var i=this._themeSelector.getBoundingClientRect(),o=n.getBoundingClientRect(),r=o.left-i.left;if(this._selectorBackground.style.transition="none",this._selectorBackground.style.width=o.width+"px",this._selectorBackground.style.left=r+"px",this.sliderState.activePosition=parseInt(n.getAttribute("data-position")||"2"),3===this.sliderState.activePosition?this.sliderState.entryDirection="right":(this.sliderState.activePosition,this.sliderState.entryDirection="left"),this._borderTop&&this._borderBottom){if(this.setBorderTransition(!0),"left"===this.sliderState.entryDirection)this._borderTop.style.transform="translateX(-100%)",this._borderBottom.style.transform="translateX(-100%)";else{var s=this._themeSelector.getBoundingClientRect();this._borderTop.style.transform="translateX(".concat(s.width,"px)"),this._borderBottom.style.transform="translateX(".concat(s.width,"px)")}this._borderTop.offsetWidth,this.setBorderTransition(!1)}return setTimeout((function(){t._selectorBackground.style.transition="left 0.5s cubic-bezier(0.77, 0, 0.175, 1), width 0.5s cubic-bezier(0.77, 0, 0.175, 1)"}),50),!0}},{key:"resetBorderAnimation",value:function(){if(this._themeSelector&&this._borderTop&&this._borderBottom){var t=this._themeSelector.getBoundingClientRect(),e=this.sliderState.entryDirection;e?(this.setBorderTransition(!0),"left"===e?(this._borderTop.style.transform="translateX(-100%)",this._borderBottom.style.transform="translateX(-100%)"):(this._borderTop.style.transform="translateX(".concat(t.width,"px)"),this._borderBottom.style.transform="translateX(".concat(t.width,"px)")),this.setBorderTransition(!1),this.sliderState.currentHoveredOption=null,this.sliderState.isAnimating=!1,this.sliderState.buttonWidth=0):console.warn("[slider_component_engine] resetBorderAnimation called without entryDirection set")}}},{key:"getAnimationDirection",value:function(){return 3===this.sliderState.activePosition?"right":1===this.sliderState.activePosition?"left":this.sliderState.mouseEnteredFromRight?"right":"left"}},{key:"findHoveredOption",value:function(t){if(!this._options)return null;var e=null;return this._options.forEach((function(n){var i=n.getBoundingClientRect();t>=i.left&&t<=i.right&&(e=n)})),e}},{key:"animateBordersIn",value:function(t,e){var n=this;if(t&&!this.sliderState.isAnimating&&this._themeSelector&&(!this.sliderState.buttonJustSelected||!t.classList.contains("active"))){this.sliderState.isAnimating=!0,this.sliderState.entryDirection=e;var i=this._themeSelector.getBoundingClientRect(),o=this.calculateBorderWidth(),r=this.calculateBorderPosition(t,i);this.sliderState.buttonWidth=o,this._borderTop&&this._borderBottom&&(this._borderTop.style.width="".concat(o,"px"),this._borderBottom.style.width="".concat(o,"px")),this.resetBorderAnimation(),this.updateBorderTransform(r),setTimeout((function(){if(n.sliderState.isAnimating=!1,n.sliderState.insideSlider){var e=b.getPosition().x,i=n.findHoveredOption(e);i&&i!==t&&n.updateBorderPosition(e)}else n.animateBordersOut()}),this.ANIMATION_DURATION),this.sliderState.currentHoveredOption=t}}},{key:"animateBordersOut",value:function(){var t=this;if(!this.sliderState.isAnimating&&this._themeSelector&&this._borderTop&&this._borderBottom){this.sliderState.isAnimating=!0;var e=this.sliderState.entryDirection,n=this._themeSelector.getBoundingClientRect();"left"===e?(this._borderTop.style.transform="translateX(-100%)",this._borderBottom.style.transform="translateX(-100%)"):(this._borderTop.style.transform="translateX(".concat(n.width,"px)"),this._borderBottom.style.transform="translateX(".concat(n.width,"px)")),setTimeout((function(){t.sliderState.isAnimating=!1,t.sliderState.currentHoveredOption=null}),this.ANIMATION_DURATION)}}},{key:"updateBorderPosition",value:function(t){if(!this.sliderState.isAnimating&&this._themeSelector){var e=this._themeSelector.getBoundingClientRect(),n=this.findHoveredOption(t);if(n&&(!this.sliderState.buttonJustSelected||!n.classList.contains("active")))if(n===this.sliderState.currentHoveredOption){var i=this.calculateBorderPosition(n,e);this.updateBorderTransform(i)}else{this.sliderState.currentHoveredOption=n;var o=this.calculateBorderPosition(n,e);this.updateBorderTransform(o)}}}},{key:"handleMousePositionUpdate",value:function(){var t=Date.now();if(!(t-this.sliderState.lastCheckTime<this.MONITOR_INTERVAL)&&(this.sliderState.lastCheckTime=t,this._themeSelector)){var e=this._themeSelector.getBoundingClientRect(),n=b.isInsideBounds(e);if(n!==this.sliderState.insideSlider)this.updateSliderState(n);else if(n&&!this.sliderState.isAnimating){var i=b.getPosition().x,o=this.findHoveredOption(i);if(this.sliderState.buttonJustSelected&&o&&o.classList.contains("active"))return;o&&!o.classList.contains("active")&&(this.sliderState.buttonJustSelected=!1),this.updateBorderPosition(i)}}}},{key:"updateSliderState",value:function(t){if(this.sliderState.insideSlider=t,this._themeSelector)if(t){var e=this._themeSelector.getBoundingClientRect(),n=b.getRelativeDirection(e);if(this.sliderState.mouseEnteredFromRight="right"===n,!this.sliderState.isAnimating&&!this.sliderState.currentHoveredOption){var i=b.getPosition().x,o=this.findHoveredOption(i);if(o){if(this.sliderState.buttonJustSelected&&o.classList.contains("active"))return;var r=this.getAnimationDirection();this.animateBordersIn(o,r)}}}else!this.sliderState.isAnimating&&this.sliderState.currentHoveredOption&&this.animateBordersOut()}},{key:"setupOptionClickHandlers",value:function(){var t=this;this._options&&0!==this._options.length?this._options.forEach((function(e){e.addEventListener("click",(function(){t.setActiveOption(e)}))})):console.warn("No options found to set up click handlers")}},{key:"setActiveOption",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("[slider_component_engine] Setting active option: ".concat(t?t.textContent:"none")),t&&this._themeSelector&&this._selectorBackground&&!t.classList.contains("active")){this.sliderState.currentHoveredOption&&!this.sliderState.isAnimating&&this._borderTop&&this._borderBottom&&(this.setBorderTransition(!0),this._borderTop.style.transform="translateX(-9999px)",this._borderBottom.style.transform="translateX(-9999px)",this.sliderState.currentHoveredOption=null,this.sliderState.isAnimating=!1,this.setBorderTransition(!1)),this._options.forEach((function(t){t.classList.remove("active")})),t.classList.add("active"),this.sliderState.activePosition=parseInt(t.getAttribute("data-position")||"2");var i=t.getBoundingClientRect(),o=this._themeSelector.getBoundingClientRect(),r=i.left-o.left;this._selectorBackground.style.transition=n?"none":"left 0.5s cubic-bezier(0.77, 0, 0.175, 1), width 0.5s cubic-bezier(0.77, 0, 0.175, 1)",this._selectorBackground.style.width=i.width+"px",this._selectorBackground.style.left=r+"px",n&&(this._selectorBackground.offsetWidth,setTimeout((function(){e._selectorBackground.style.transition="left 0.5s cubic-bezier(0.77, 0, 0.175, 1), width 0.5s cubic-bezier(0.77, 0, 0.175, 1)"}),0)),this.sliderState.buttonJustSelected=!0,this.calculateShortestTextWidth(),this.handler&&"function"==typeof this.handler&&(console.log("[slider_component_engine] Calling custom handler"),this.handler(t))}}},{key:"setupMouseTracking",value:function(){console.log("[slider_component_engine] Using global mouse tracker")}},{key:"setupMouseEvents",value:function(){var t=this;this._themeSelector&&(this._themeSelector.addEventListener("mouseenter",(function(){t.updateSliderState(!0);var e=b.getPosition().x,n=t.findHoveredOption(e);if(n&&!t.sliderState.isAnimating){if(t.sliderState.buttonJustSelected&&n.classList.contains("active"))return;var i=t.getAnimationDirection();t.animateBordersIn(n,i)}})),this._themeSelector.addEventListener("mousemove",(function(){if(t.sliderState.insideSlider&&!t.sliderState.isAnimating){var e=b.getPosition().x,n=t.findHoveredOption(e);n&&!n.classList.contains("active")&&(t.sliderState.buttonJustSelected=!1),t.updateBorderPosition(e)}})),this._themeSelector.addEventListener("mouseleave",(function(){t.updateSliderState(!1),t.sliderState.buttonJustSelected=!1})))}},{key:"setupResizeHandler",value:function(){var t=this;window.addEventListener("resize",(function(){if(t.equalizeButtonWidths(),t._themeSelector&&t._selectorBackground){var e=t.getSelectorClass(),n=document.querySelector(".slider-selector.".concat(e," .option.active"));if(n){var i=t._themeSelector.getBoundingClientRect(),o=n.getBoundingClientRect();t._selectorBackground.style.transition="none",t._selectorBackground.style.width=o.width+"px",t._selectorBackground.style.left=o.left-i.left+"px",t._selectorBackground.offsetWidth,t._selectorBackground.style.transition="left 0.5s cubic-bezier(0.77, 0, 0.175, 1), width 0.5s cubic-bezier(0.77, 0, 0.175, 1)"}}}))}},{key:"setupMutationObserver",value:function(){var t=this;if(this._options&&0!==this._options.length){var e=new MutationObserver((function(e){var n=!1;e.forEach((function(t){"characterData"!==t.type&&"childList"!==t.type||(n=!0)})),n&&(console.log("[slider_component_engine] Text change detected in ".concat(t.sliderClass,", recalculating button widths")),t.equalizeButtonWidths())}));this._options.forEach((function(t){var n=t.querySelector("h3");n&&e.observe(n,{characterData:!0,childList:!0,subtree:!0})}))}}},{key:"startContinuousMonitoring",value:function(){var t=this;setInterval((function(){t.handleMousePositionUpdate()}),this.MONITOR_INTERVAL)}},{key:"destroy",value:function(){console.log("[slider_component_engine] Destroying slider: ".concat(this.sliderClass)),this.sliderElement&&this.sliderElement.remove(),this._themeSelector=null,this._selectorBackground=null,this._options=null,this._borderTop=null,this._borderBottom=null,this.sliderElement=null}}],e&&E(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t,e,n){return(e=z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,z(i.key),i)}}function z(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}var R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:e.id||"input-".concat(Date.now()),name:e.name||"input",placeholder:e.placeholder||"Enter text",value:e.value||"",type:e.type||"text",required:e.required||!1,maxLength:e.maxLength||null,expandable:!1!==e.expandable,multiline:e.multiline||!1,minHeight:e.minHeight||"auto",maxHeight:e.maxHeight||null,storageKey:e.storageKey||null},e),this.changeHandler=n,this.element=null,this.wrapper=null,this.innerContainer=null,this.borderTop=null,this.borderBottom=null,this.resizeObserver=null,this.approximationTimeout=null,this.animationState={isAnimating:!1,currentlyHovered:!1,entryDirection:null,insideInput:!1,lastCheckTime:0,inputWidth:0},this.widthState={measureElement:null,currentLineCount:1,containerWidth:0},this.ANIMATION_DURATION=800,this.MONITOR_INTERVAL=100,this.viewportResizeFrame=null,this.handleMousePositionUpdate=this.handleMousePositionUpdate.bind(this),this.updateWidth=this.updateWidth.bind(this),this.handleResize=this.handleResize.bind(this),this.handleViewportResize=this.handleViewportResize.bind(this),console.log("[text_input_component_engine] Initialized with hover animations:",this.options)}return e=t,n=[{key:"refreshMeasurementStyles",value:function(){console.log("[refreshMeasurementStyles] CSS variables handle style sync")}},{key:"handleSizeApproximation",value:function(t){var e=this,n=this.getContentContainerWidth();if(!n)return!1;var i=t||this.element.placeholder||"",o=!i.trim(),r=i.includes("\n"),s=window.getComputedStyle(this.element),a=window.getComputedStyle(this.innerContainer);this.refreshMeasurementStyles();var l=parseFloat(s.paddingLeft)||0,h=parseFloat(s.paddingRight)||0,c=parseFloat(s.paddingTop)||0,u=parseFloat(s.paddingBottom)||0,d=l+h+(parseFloat(a.paddingLeft)||0)+(parseFloat(a.paddingRight)||0),p=parseFloat(s.lineHeight)||20;return r&&!o?this.handleLineBreakMode(i,n,d,20,p,c,u):this.handleUnwrappedMode(i,n,d,20,p,c,u),this.approximationTimeout&&clearTimeout(this.approximationTimeout),this.approximationTimeout=setTimeout((function(){e.wrapper.style.transition="",e.updateWidth(),e.approximationTimeout=null}),0),!0}},{key:"handleLineBreakMode",value:function(t,e,n,i,o,r,s){var a=this,l=t.split("\n"),h=0;l.forEach((function(t){a.widthState.measureElement.textContent=t||" ";var e=a.widthState.measureElement.offsetWidth;h=Math.max(h,e)}));var c,u=h+n+i;t&&0!==t.trim().length?c=4:(this.widthState.measureElement.textContent=this.element.placeholder||"",c=this.widthState.measureElement.offsetWidth+n+i);var d=Math.min(u,e),p=Math.max(c,d);this.wrapper.style.width="".concat(p,"px"),this.wrapper.style.flex="0 1 auto",this.wrapper.style.maxWidth="100%",this.wrapper.style.minWidth="".concat(c,"px"),this.element.style.height="auto",this.element.style.height=this.element.scrollHeight+"px",console.log("[handleLineBreakMode] Lines: ".concat(l.length,", Width: ").concat(p,"px, Using hybrid flex approach"))}},{key:"handleUnwrappedMode",value:function(t,e,n,i,o,r,s){this.widthState.measureElement.textContent=t;var a,l=this.widthState.measureElement.offsetWidth,h=l+n+i,c=window.getComputedStyle(this.widthState.measureElement).fontSize,u=window.getComputedStyle(this.element).fontSize;console.log('[DEBUG handleUnwrappedMode] Text: "'.concat(t.substring(0,20),'...", Measured font: ').concat(c,", Actual font: ").concat(u,", Text width: ").concat(l,"px")),t&&0!==t.trim().length?a=4:(this.widthState.measureElement.textContent=this.element.placeholder||"",a=this.widthState.measureElement.offsetWidth+n+i);var d=h>e,p=d?e:Math.max(a,h),m=this.wrapper.style.width;console.log("[DEBUG handleUnwrappedMode] Old width: ".concat(m,", Desired: ").concat(h,"px, Final: ").concat(p,"px, Will wrap: ").concat(d)),this.wrapper.style.width="".concat(p,"px"),this.wrapper.style.flex="0 1 auto",this.wrapper.style.maxWidth="100%",this.wrapper.style.minWidth="".concat(a,"px"),this.element.style.height="auto",this.element.style.height="".concat(this.element.scrollHeight,"px"),console.log("[handleUnwrappedMode] Width: ".concat(p,"px, Height: ").concat(this.element.scrollHeight,"px"))}},{key:"getContentContainerWidth",value:function(){if(!this.wrapper)return null;for(var t=this.wrapper.parentElement;t;){if(t.classList&&t.classList.contains("content-container"))return t.offsetWidth||null;t=t.parentElement}return this.wrapper.parentElement?this.wrapper.parentElement.offsetWidth:null}},{key:"render",value:function(t){var e=this,n="string"==typeof t?document.getElementById(t):t;if(!n)return console.error("[text_input_component_engine] Container not found:",t),null;this.wrapper=document.createElement("div"),this.wrapper.className="dynamic-input-wrapper",this.wrapper.setAttribute("data-lines","1");var i=document.createElement("div");return i.className="input-border-container",i.style.cssText="\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      pointer-events: none;\n      overflow: hidden;\n      border-radius: inherit;\n    ",this.borderTop=document.createElement("div"),this.borderTop.className="input-border-segment input-border-top",this.borderTop.style.cssText="\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 1px;\n      background: linear-gradient(\n        to right,\n        var(--active-button-start),\n        var(--active-button-end)\n      );\n      transform: translateX(-100%);\n      transition: transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1);\n      width: 100%;\n    ",this.borderBottom=document.createElement("div"),this.borderBottom.className="input-border-segment input-border-bottom",this.borderBottom.style.cssText="\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      height: 1px;\n      background: linear-gradient(\n        to right,\n        var(--active-button-start),\n        var(--active-button-end)\n      );\n      transform: translateX(-100%);\n      transition: transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1);\n      width: 100%;\n    ",i.appendChild(this.borderTop),i.appendChild(this.borderBottom),this.wrapper.appendChild(i),this.innerContainer=document.createElement("div"),this.innerContainer.className="text-input-inner",this.options.multiline||this.options.expandable?(this.element=document.createElement("textarea"),this.element.rows=1):(this.element=document.createElement("input"),this.element.type=this.options.type),this.element.id=this.options.id,this.element.name=this.options.name,this.element.className="dynamic-text-input",this.element.placeholder=this.options.placeholder,this.element.value=this.options.value,this.options.required&&(this.element.required=!0),this.options.maxLength&&!this.options.expandable&&(this.element.maxLength=this.options.maxLength),this.options.storageKey&&this.applyStoredValue(),this.attachEventListeners(),this.innerContainer.appendChild(this.element),this.wrapper.appendChild(this.innerContainer),n.appendChild(this.wrapper),this.createMeasurementElement(),this.setupResizeObserver(),this.options.expandable&&setTimeout((function(){e.element.value?e.handleSizeApproximation(e.element.value):(e.adjustHeight(),e.updateWidth())}),0),this.setupMouseTracking(),this.setupHoverAnimation(),this.startContinuousMonitoring(),this.setupViewportResizeHandling(),console.log("[text_input_component_engine] Rendered input with horizontal expansion:",this.options.id),this.element}},{key:"createMeasurementElement",value:function(){this.widthState.measureElement=document.createElement("div"),this.widthState.measureElement.className="text-measurement-helper",document.body.appendChild(this.widthState.measureElement)}},{key:"updateWidth",value:function(){if(this.element&&this.widthState.measureElement&&this.wrapper){var t=window.getComputedStyle(this.element),e=window.getComputedStyle(this.innerContainer);this.refreshMeasurementStyles();var n=this.element.value&&this.element.value.trim().length>0,i=(n?this.element.value:this.element.placeholder).replace(/\n/g," ");this.widthState.measureElement.textContent=i;var o=this.widthState.measureElement.offsetWidth;this.widthState.measureElement.textContent=this.element.placeholder;var r,s=this.widthState.measureElement.offsetWidth,a=(parseFloat(t.paddingLeft)||0)+(parseFloat(t.paddingRight)||0)+(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),l=(n?o:s)+a+20,h=this.wrapper.parentElement?this.wrapper.parentElement.offsetWidth:window.innerWidth;r=!n&&this.element.placeholder?s+a+20:4;var c=Math.max(r,Math.min(l,h));this.wrapper.style.width="".concat(c,"px"),this.wrapper.style.flex="0 1 auto",this.wrapper.style.maxWidth="100%",this.wrapper.style.minWidth="".concat(r,"px"),console.log('[updateWidth] Text: "'.concat(i,'" (').concat(i.length," chars)")),console.log("[updateWidth] Text width: ".concat(o,"px, Final width: ").concat(c,"px")),console.log("[updateWidth] Using hybrid approach with flex properties")}}},{key:"setupViewportResizeHandling",value:function(){t.viewportListenerAdded||(t.viewportListenerAdded=!0,t.instances=new Set,window.addEventListener("resize",(function(){t.instances.forEach((function(t){t.handleViewportResize()}))}))),t.instances.add(this)}},{key:"handleViewportResize",value:function(){var t=this;this.viewportResizeFrame&&cancelAnimationFrame(this.viewportResizeFrame),this.viewportResizeFrame=requestAnimationFrame((function(){console.log("[handleViewportResize] Viewport resized, updating measurements"),t.options.expandable?t.handleSizeApproximation(t.element.value||"",!0):t.updateWidth(),t.viewportResizeFrame=null}))}},{key:"updateLineCount",value:function(){if(this.element){var t=(this.element.value||"").split("\n").length;t!==this.widthState.currentLineCount&&(this.widthState.currentLineCount=t,this.wrapper.setAttribute("data-lines",t),this.wrapper.style.setProperty("--line-count",t))}}},{key:"setupResizeObserver",value:function(){window.ResizeObserver&&this.wrapper.parentElement&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.wrapper.parentElement))}},{key:"handleResize",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return M(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}(t);try{for(n.s();!(e=n.n()).done;){var i=e.value.contentRect.width;i!==this.widthState.containerWidth&&(console.log("[DEBUG handleResize] Container width changed from ".concat(this.widthState.containerWidth,"px to ").concat(i,"px")),this.widthState.containerWidth=i,this.options.expandable&&this.element.value?this.handleSizeApproximation(this.element.value,!0):this.updateWidth())}}catch(t){n.e(t)}finally{n.f()}}},{key:"applyStoredValue",value:function(){if(this.options.storageKey){var t=localStorage.getItem(this.options.storageKey);null!==t&&(this.element.value=t,this.options.value=t,console.log("[text_input_component_engine] Applied stored value:",t))}}},{key:"attachEventListeners",value:function(){var t=this;this.element.addEventListener("paste",(function(e){if(t.options.expandable){var n,i=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text");t.handleSizeApproximation(i)&&console.log("[text_input_component_engine] Paste approximation applied")}})),this.element.addEventListener("input",(function(e){var n=e.target.value;t.options.value=n,t.options.storageKey&&localStorage.setItem(t.options.storageKey,n),t.changeHandler&&t.changeHandler(n,t.options.id),t.options.expandable&&t.handleSizeApproximation(n)})),this.element.addEventListener("focus",(function(){t.options.expandable&&!t.element.value&&t.updateWidth()}))}},{key:"adjustHeight",value:function(){if(this.element&&"TEXTAREA"===this.element.tagName){this.element.style.height="",this.element.style.height="0px",this.element.offsetHeight,this.element.scrollHeight;var t,e=this.element.scrollHeight,n=window.getComputedStyle(this.element),i=parseFloat(n.lineHeight),o=parseFloat(n.paddingTop),r=parseFloat(n.paddingBottom);t="auto"===this.options.minHeight?i+o+r:parseInt(this.options.minHeight);var s=this.options.maxHeight?parseInt(this.options.maxHeight):1/0,a=Math.min(Math.max(e,t),s);this.element.style.height=a+"px",this.options.maxHeight&&e>s?this.element.style.overflowY="auto":this.element.style.overflowY="hidden"}}},{key:"getValue",value:function(){return this.element?this.element.value:this.options.value}},{key:"setValue",value:function(t){this.element&&(this.element.value=t,this.options.value=t,this.options.storageKey&&localStorage.setItem(this.options.storageKey,t),this.changeHandler&&this.changeHandler(t,this.options.id),this.options.expandable&&this.handleSizeApproximation(t))}},{key:"enable",value:function(){this.element&&(this.element.disabled=!1)}},{key:"disable",value:function(){this.element&&(this.element.disabled=!0)}},{key:"destroy",value:function(){t.instances&&t.instances.delete(this),this.viewportResizeFrame&&(cancelAnimationFrame(this.viewportResizeFrame),this.viewportResizeFrame=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.widthState.measureElement&&this.widthState.measureElement.parentNode&&this.widthState.measureElement.parentNode.removeChild(this.widthState.measureElement),this.wrapper&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper),this.element=null,this.wrapper=null,this.innerContainer=null,console.log("[text_input_component_engine] Destroyed:",this.options.id)}},{key:"setupMouseTracking",value:function(){console.log("[text_input_component_engine] Using global mouse tracker")}},{key:"setupHoverAnimation",value:function(){var t=this;this.wrapper&&(this.wrapper.addEventListener("mouseenter",(function(){t.updateInputState(!0)})),this.wrapper.addEventListener("mouseleave",(function(){if(t.animationState.insideInput=!1,!t.element.matches(":focus")){var e=t.wrapper.getBoundingClientRect(),n=b.getRelativeDirection(e);t.animationState.entryDirection=n,t.animateBordersOut()}})),this.element.addEventListener("focus",(function(){t.animationState.insideInput||(t.animationState.entryDirection="left",t.animateBordersIn())})),this.element.addEventListener("blur",(function(){t.animationState.insideInput||t.animateBordersOut()})))}},{key:"handleMousePositionUpdate",value:function(){var t=Date.now();if(!(t-this.animationState.lastCheckTime<this.MONITOR_INTERVAL)&&(this.animationState.lastCheckTime=t,this.wrapper)){var e=this.wrapper.getBoundingClientRect(),n=b.isInsideBounds(e);n!==this.animationState.insideInput&&this.updateInputState(n)}}},{key:"updateInputState",value:function(t){if(this.animationState.insideInput=t,this.wrapper)if(t){var e=this.wrapper.getBoundingClientRect(),n=b.getRelativeDirection(e);this.animationState.entryDirection=n,this.animationState.isAnimating||this.animationState.currentlyHovered||this.animateBordersIn()}else this.animationState.isAnimating||!this.animationState.currentlyHovered||this.element.matches(":focus")||this.animateBordersOut()}},{key:"animateBordersIn",value:function(){var t=this;this.borderTop&&this.borderBottom&&!this.animationState.isAnimating&&(this.animationState.isAnimating=!0,this.animationState.currentlyHovered=!0,this.setBorderTransition(!0),"left"===this.animationState.entryDirection?(this.borderTop.style.transform="translateX(-100%)",this.borderBottom.style.transform="translateX(-100%)"):(this.borderTop.style.transform="translateX(100%)",this.borderBottom.style.transform="translateX(100%)"),this.borderTop.offsetWidth,this.setBorderTransition(!1),this.borderTop.style.transform="translateX(0)",this.borderBottom.style.transform="translateX(0)",setTimeout((function(){t.animationState.isAnimating=!1}),this.ANIMATION_DURATION))}},{key:"animateBordersOut",value:function(){var t=this;this.borderTop&&this.borderBottom&&!this.animationState.isAnimating&&(this.animationState.isAnimating=!0,"left"===this.animationState.entryDirection?(this.borderTop.style.transform="translateX(-100%)",this.borderBottom.style.transform="translateX(-100%)"):(this.borderTop.style.transform="translateX(100%)",this.borderBottom.style.transform="translateX(100%)"),setTimeout((function(){t.animationState.isAnimating=!1,t.animationState.currentlyHovered=!1}),this.ANIMATION_DURATION))}},{key:"setBorderTransition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.borderTop&&this.borderBottom){var e=t?"none":"transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1)";this.borderTop.style.transition=e,this.borderBottom.style.transition=e}}},{key:"startContinuousMonitoring",value:function(){var t=this;setInterval((function(){t.handleMousePositionUpdate()}),this.MONITOR_INTERVAL)}}],n&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function I(t,e,n){return(e=B(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,B(i.key),i)}}function B(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var H=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:e.id||"button-".concat(Date.now()),text:void 0!==e.text?e.text:"•",value:e.value||e.text||"button",disabled:e.disabled||!1,active:e.active||!1},e),this.clickHandler=n,this.element=null,this.container=null,this.isDefaultDot="•"===this.options.text,this.hoverState={isHovering:!1,isAnimating:!1,mouseEnteredFromRight:null,entryDirection:null,lastCheckTime:0},this.ANIMATION_DURATION=800,this.MONITOR_INTERVAL=100,this._borderTop=null,this._borderBottom=null,this.handleMousePositionUpdate=this.handleMousePositionUpdate.bind(this),console.log("[button_component_engine] Initialized button with ".concat(this.isDefaultDot?"button_component_engine_circle":"button_component_engine_text",":"),this.options)},e=[{key:"ensureCircular",value:function(){var t=this;requestAnimationFrame((function(){if(t.element){var e=t.element.offsetHeight,n=t.element.offsetWidth;if(e!==n){var i=Math.max(e,n);t.element.style.width="".concat(i,"px"),t.element.style.height="".concat(i,"px")}}}))}},{key:"render",value:function(t){var e="string"==typeof t?document.getElementById(t):t;if(!e)return console.error("[button_component_engine] Container not found:",t),null;e.classList.add("button-container"),this.container=e,this.element=document.createElement("div");var n=["button-component"];if(this.isDefaultDot?n.push("button-circle"):n.push("button-text"),this.element.className=n.join(" "),this.element.id=this.options.id,!this.isDefaultDot){var i=document.createElement("div");i.className="border-container";var o=document.createElement("div");o.className="border-segment border-top",i.appendChild(o),this._borderTop=o;var r=document.createElement("div");r.className="border-segment border-bottom",i.appendChild(r),this._borderBottom=r,this.element.appendChild(i)}if(this.isDefaultDot){var s=document.createElement("div");s.className="hover-ring",this.element.appendChild(s)}var a=document.createElement("div");a.className="button-content";var l=document.createElement("h3");return l.textContent=this.options.text,a.appendChild(l),this.element.appendChild(a),this.attachEventListeners(),this.container.appendChild(this.element),this.isDefaultDot&&(this.ensureCircular(),this.element.style.borderRadius="50%"),this.options.active&&this.setActive(!0),this.options.disabled&&this.disable(),this.initializeHoverAnimations(),console.log("[button_component_engine] Rendered ".concat(this.isDefaultDot?"button_component_engine_circle":"button_component_engine_text",":"),this.options.id),this.element}},{key:"attachEventListeners",value:function(){var t=this;this.element.addEventListener("click",(function(e){t.options.disabled?e.preventDefault():(console.log("[button_component_engine] ".concat(t.isDefaultDot?"button_component_engine_circle":"button_component_engine_text"," clicked:"),t.options.id),t.setActive(!t.options.active),t.clickHandler&&t.clickHandler(t.options.value,t.options.id))})),this.isDefaultDot&&(this.element.addEventListener("mouseenter",(function(){t.options.disabled||t.element.classList.add("hover-ring-active")})),this.element.addEventListener("mouseleave",(function(){t.element.classList.remove("hover-ring-active")}))),this.element.addEventListener("selectstart",(function(t){t.preventDefault()}))}},{key:"setActive",value:function(t){this.options.active=t,t?this.element.classList.add("active"):this.element.classList.remove("active")}},{key:"enable",value:function(){this.options.disabled=!1,this.element.classList.remove("disabled")}},{key:"disable",value:function(){this.options.disabled=!0,this.element.classList.add("disabled")}},{key:"setText",value:function(t){this.options.text=t;var e=this.isDefaultDot;this.isDefaultDot="•"===t,e!==this.isDefaultDot&&(this.element.classList.remove("button-circle","button-text"),this.isDefaultDot?(this.element.classList.add("button-circle"),this.ensureCircular(),this.element.style.borderRadius="50%"):(this.element.classList.add("button-text"),this.element.style.width="",this.element.style.borderRadius="9999px"));var n=this.element.querySelector(".button-content h3");n&&(n.textContent=t)}},{key:"getText",value:function(){return this.options.text}},{key:"initializeHoverAnimations",value:function(){!this.isDefaultDot&&this._borderTop&&this._borderBottom&&this.resetBorderAnimation(),this.setupMouseEvents(),this.startContinuousMonitoring()}},{key:"calculateBorderWidth",value:function(){var t=this.element.querySelector(".button-content h3");if(!t)return 50;var e=document.createElement("span");e.style.visibility="hidden",e.style.position="absolute",e.style.whiteSpace="nowrap",e.style.font=getComputedStyle(t).font,e.textContent=t.textContent,document.body.appendChild(e);var n=e.offsetWidth;return document.body.removeChild(e),Math.max(.9*n,20)}},{key:"resetBorderAnimation",value:function(){if(this.element&&this._borderTop&&this._borderBottom){var t=this.element.getBoundingClientRect(),e=this.hoverState.entryDirection||"left",n=this.calculateBorderWidth();this._borderTop.style.width="".concat(n,"px"),this._borderBottom.style.width="".concat(n,"px"),this.setBorderTransition(!0),"left"===e?(this._borderTop.style.transform="translateX(-100%)",this._borderBottom.style.transform="translateX(-100%)"):(this._borderTop.style.transform="translateX(".concat(t.width,"px)"),this._borderBottom.style.transform="translateX(".concat(t.width,"px)")),this.setBorderTransition(!1),this.hoverState.isHovering=!1,this.hoverState.isAnimating=!1}}},{key:"setBorderTransition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._borderTop&&this._borderBottom&&(this._borderTop.style.transition=t?"none":"transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1)",this._borderBottom.style.transition=t?"none":"transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1)",t&&this._borderTop.offsetWidth)}},{key:"animateBordersIn",value:function(t){var e=this;if(this.element&&!this.hoverState.isAnimating)if(this.isDefaultDot)this.animateCircularBorderIn();else{this.hoverState.isAnimating=!0,this.hoverState.entryDirection=t;var n=this.element.getBoundingClientRect(),i=this.calculateBorderWidth(),o=(n.width-i)/2;this.resetBorderAnimation(),this._borderTop.style.transform="translateX(".concat(o,"px)"),this._borderBottom.style.transform="translateX(".concat(o,"px)"),setTimeout((function(){e.hoverState.isAnimating=!1}),this.ANIMATION_DURATION)}}},{key:"animateCircularBorderIn",value:function(){var t=this;this.element&&(this.hoverState.isAnimating=!0,this.element.classList.add("hover-ring-active"),setTimeout((function(){t.hoverState.isAnimating=!1}),300))}},{key:"animateBordersOut",value:function(){var t=this;if(!this.hoverState.isAnimating&&this.element)if(this.isDefaultDot)this.animateCircularBorderOut();else{this.hoverState.isAnimating=!0;var e=this.element.getBoundingClientRect();"left"===(this.hoverState.entryDirection||"left")?(this._borderTop.style.transform="translateX(-100%)",this._borderBottom.style.transform="translateX(-100%)"):(this._borderTop.style.transform="translateX(".concat(e.width,"px)"),this._borderBottom.style.transform="translateX(".concat(e.width,"px)")),setTimeout((function(){t.hoverState.isAnimating=!1,t.hoverState.isHovering=!1}),this.ANIMATION_DURATION)}}},{key:"animateCircularBorderOut",value:function(){var t=this;this.element&&(this.hoverState.isAnimating=!0,this.element.classList.remove("hover-ring-active"),setTimeout((function(){t.hoverState.isAnimating=!1,t.hoverState.isHovering=!1}),300))}},{key:"setupMouseEvents",value:function(){var t=this;this.element&&(this.element.addEventListener("mouseenter",(function(){if(t.updateHoverState(!0),!t.hoverState.isAnimating){var e=t.element.getBoundingClientRect(),n=b.getRelativeDirection(e);t.hoverState.mouseEnteredFromRight="right"===n;var i="right"===n?"right":"left";t.animateBordersIn(i)}})),this.element.addEventListener("mouseleave",(function(){t.updateHoverState(!1)})))}},{key:"updateHoverState",value:function(t){this.hoverState.isHovering=t,t||this.hoverState.isAnimating||this.animateBordersOut()}},{key:"handleMousePositionUpdate",value:function(){var t=Date.now();if(!(t-this.hoverState.lastCheckTime<this.MONITOR_INTERVAL)&&(this.hoverState.lastCheckTime=t,this.element)){var e=this.element.getBoundingClientRect(),n=b.isInsideBounds(e);n!==this.hoverState.isHovering&&this.updateHoverState(n)}}},{key:"startContinuousMonitoring",value:function(){var t=this;setInterval((function(){t.handleMousePositionUpdate()}),this.MONITOR_INTERVAL)}},{key:"destroy",value:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.container&&this.container.classList.remove("button-container"),this.element=null,this.container=null,this._borderTop=null,this._borderBottom=null,console.log("[button_component_engine] Destroyed:",this.options.id)}}],e&&O(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function L(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||V(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){if(t){if("string"==typeof t)return W(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function j(t,e,n){return(e=G(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,G(i.key),i)}}function G(t){var e=function(t){if("object"!=F(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==F(e)?e:e+""}var U=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:e.id||"multi-select-".concat(Date.now()),containerClass:e.containerClass||"multi-select-selector",options:e.options||[],selectedValues:e.selectedValues||[],storageKey:e.storageKey||null,minSelection:e.minSelection||0,maxSelection:e.maxSelection||null},e),this.changeHandler=n,this.container=null,this.optionElements=new Map,this.selector=null,this.hoverState={currentHoveredOption:null,isAnimating:!1,mouseEnteredFromRight:null,entryDirection:null,lastCheckTime:0,insideSelector:!1,shortestTextWidth:0},this.ANIMATION_DURATION=800,this.MONITOR_INTERVAL=100,this._borderTop=null,this._borderBottom=null,this._selectorBackground=null,this.handleMousePositionUpdate=this.handleMousePositionUpdate.bind(this),console.log("[multi_select_component_engine] Initialized with options:",this.options)},e=[{key:"init",value:function(t){var e=document.getElementById(t);return e?(this.options.storageKey&&this.applyStoredValues(),this.createMultiSelect(e),this.updateSelections(),console.log("[multi_select_component_engine] Multi-select initialized: ".concat(this.options.id)),!0):(console.error("[multi_select_component_engine] Container not found: ".concat(t)),!1)}},{key:"createMultiSelect",value:function(t){var e=this;t.classList.add("multi-select-container"),this.container=t;var n=document.createElement("div");n.className=this.options.containerClass,this.selector=n;var i=document.createElement("div");i.className="border-container";var o=document.createElement("div");o.className="border-segment border-top",i.appendChild(o),this._borderTop=o;var r=document.createElement("div");r.className="border-segment border-bottom",i.appendChild(r),this._borderBottom=r,n.appendChild(i);var s=document.createElement("div");s.className="selector-background",n.appendChild(s),this._selectorBackground=s,this.options.options.forEach((function(t,i){var o=e.createOption(t,i);n.appendChild(o),e.optionElements.set(t.value,o)})),this.container.appendChild(n),this.initializeHoverAnimations(),this.equalizeOptionWidths()}},{key:"createOption",value:function(t,e){var n=this,i=document.createElement("div");i.className="option",i.dataset.value=t.value,i.dataset.position=e+1,t.dataAttributes&&t.dataAttributes.split(" ").forEach((function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,s,a=[],l=!0,h=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){h=!0,o=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw o}}return a}}(t,e)||V(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.split("="),2),n=e[0],o=e[1];n&&o&&(i.dataset[n.replace("data-","")]=o.replace(/"/g,""))}));var o=document.createElement("div");if(o.className="option-content",t.icon){var r=document.createElement("span");r.className="option-icon",r.innerHTML=t.icon,o.appendChild(r)}var s=document.createElement("h3");return s.textContent=t.text||t.value,o.appendChild(s),i.appendChild(o),i.addEventListener("click",(function(){return n.toggleOption(t.value)})),i}},{key:"toggleOption",value:function(t){var e=this.optionElements.get(t);if(e){var n=e.classList.contains("active"),i=this.container.querySelector(".".concat(this.options.containerClass));if(!n&&this.options.maxSelection&&i.querySelectorAll(".option.active").length>=this.options.maxSelection)return void console.log("[multi_select_component_engine] Maximum selection limit reached: ".concat(this.options.maxSelection));if(n&&this.options.minSelection&&i.querySelectorAll(".option.active").length<=this.options.minSelection)return void console.log("[multi_select_component_engine] Minimum selection limit reached: ".concat(this.options.minSelection));n?(e.classList.remove("active"),this.options.selectedValues=this.options.selectedValues.filter((function(e){return e!==t}))):(e.classList.add("active"),this.options.selectedValues.includes(t)||this.options.selectedValues.push(t)),this.options.storageKey&&localStorage.setItem(this.options.storageKey,JSON.stringify(this.options.selectedValues)),this.changeHandler&&this.changeHandler(this.options.selectedValues,t,!n),console.log("[multi_select_component_engine] Option ".concat(n?"deselected":"selected",": ").concat(t))}}},{key:"applyStoredValues",value:function(){if(this.options.storageKey){var t=localStorage.getItem(this.options.storageKey);if(t)try{this.options.selectedValues=JSON.parse(t),console.log("[multi_select_component_engine] Applied stored values:",this.options.selectedValues)}catch(t){console.error("[multi_select_component_engine] Error parsing stored values:",t)}}}},{key:"updateSelections",value:function(){var t=this;this.optionElements.forEach((function(e,n){t.options.selectedValues.includes(n)?e.classList.add("active"):e.classList.remove("active")}))}},{key:"getSelectedValues",value:function(){return L(this.options.selectedValues)}},{key:"setSelectedValues",value:function(t){this.options.selectedValues=L(t),this.updateSelections(),this.options.storageKey&&localStorage.setItem(this.options.storageKey,JSON.stringify(this.options.selectedValues)),this.changeHandler&&this.changeHandler(this.options.selectedValues,null,null)}},{key:"selectAll",value:function(){var t=this.options.options.map((function(t){return t.value}));this.options.maxSelection&&t.length>this.options.maxSelection?console.log("[multi_select_component_engine] Cannot select all - exceeds maximum: ".concat(this.options.maxSelection)):this.setSelectedValues(t)}},{key:"clearAll",value:function(){this.options.minSelection&&this.options.minSelection>0?console.log("[multi_select_component_engine] Cannot clear all - minimum required: ".concat(this.options.minSelection)):this.setSelectedValues([])}},{key:"initializeHoverAnimations",value:function(){this.selector&&this._borderTop&&this._borderBottom&&(this.resetBorderAnimation(),this.initializeSelectorBackground(),this.setupMouseEvents(),this.startContinuousMonitoring())}},{key:"equalizeOptionWidths",value:function(){var t=this.selector.querySelectorAll(".option");if(t&&0!==t.length){var e=0;t.forEach((function(t){t.style.width="auto"})),t.forEach((function(t){var n=t.offsetWidth;e=Math.max(e,n)})),t.forEach((function(t){t.style.width="".concat(e,"px")})),this.calculateShortestTextWidth()}}},{key:"calculateShortestTextWidth",value:function(){var t=this.selector.querySelectorAll(".option");if(!t||0===t.length)return 100;var e=1/0,n=document.createElement("span");n.style.visibility="hidden",n.style.position="absolute",n.style.whiteSpace="nowrap";var i=this.selector.querySelector(".option h3");return i&&(n.style.font=getComputedStyle(i).font),document.body.appendChild(n),t.forEach((function(t){var i=t.querySelector("h3");if(i){n.textContent=i.textContent;var o=n.offsetWidth;e=Math.min(e,o)}})),document.body.removeChild(n),this.hoverState.shortestTextWidth=Math.max(e,50),this.hoverState.shortestTextWidth}},{key:"initializeSelectorBackground",value:function(){this._selectorBackground&&(this._selectorBackground.style.display="none")}},{key:"calculateBorderWidth",value:function(){return.9*this.hoverState.shortestTextWidth}},{key:"calculateBorderPosition",value:function(t,e){if(!t||!e)return 0;var n=t.getBoundingClientRect();return n.left-e.left+n.width/2-this.calculateBorderWidth()/2}},{key:"updateBorderTransform",value:function(t){if(this._borderTop&&this._borderBottom){var e="translateX(".concat(t,"px)");this._borderTop.style.transform=e,this._borderBottom.style.transform=e}}},{key:"setBorderTransition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._borderTop&&this._borderBottom&&(this._borderTop.style.transition=t?"none":"transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1)",this._borderBottom.style.transition=t?"none":"transform 0.8s cubic-bezier(0.1, 0.8, 0.2, 1)",t&&this._borderTop.offsetWidth)}},{key:"resetBorderAnimation",value:function(){if(this.selector&&this._borderTop&&this._borderBottom){var t=this.selector.getBoundingClientRect(),e=this.hoverState.entryDirection||"left",n=this.calculateBorderWidth();this._borderTop.style.width="".concat(n,"px"),this._borderBottom.style.width="".concat(n,"px"),this.setBorderTransition(!0),"left"===e?(this._borderTop.style.transform="translateX(-100%)",this._borderBottom.style.transform="translateX(-100%)"):(this._borderTop.style.transform="translateX(".concat(t.width,"px)"),this._borderBottom.style.transform="translateX(".concat(t.width,"px)")),this.setBorderTransition(!1),this.hoverState.currentHoveredOption=null,this.hoverState.isAnimating=!1}}},{key:"findHoveredOption",value:function(t){var e=this.selector.querySelectorAll(".option"),n=null;return e.forEach((function(e){var i=e.getBoundingClientRect();t>=i.left&&t<=i.right&&(n=e)})),n}},{key:"animateBordersIn",value:function(t,e){var n=this;if(t&&!this.hoverState.isAnimating&&this.selector){this.hoverState.isAnimating=!0,this.hoverState.entryDirection=e;var i=this.selector.getBoundingClientRect(),o=this.calculateBorderWidth(),r=this.calculateBorderPosition(t,i);this._borderTop&&this._borderBottom&&(this._borderTop.style.width="".concat(o,"px"),this._borderBottom.style.width="".concat(o,"px")),this.resetBorderAnimation(),this.updateBorderTransform(r),setTimeout((function(){if(n.hoverState.isAnimating=!1,n.hoverState.insideSelector){var e=b.getPosition().x,i=n.findHoveredOption(e);i&&i!==t&&n.updateBorderPosition(e)}else n.animateBordersOut()}),this.ANIMATION_DURATION),this.hoverState.currentHoveredOption=t}}},{key:"animateBordersOut",value:function(){var t=this;if(!this.hoverState.isAnimating&&this.selector){this.hoverState.isAnimating=!0;var e=this.hoverState.entryDirection,n=this.selector.getBoundingClientRect();"left"===e?(this._borderTop.style.transform="translateX(-100%)",this._borderBottom.style.transform="translateX(-100%)"):(this._borderTop.style.transform="translateX(".concat(n.width,"px)"),this._borderBottom.style.transform="translateX(".concat(n.width,"px)")),setTimeout((function(){t.hoverState.isAnimating=!1,t.hoverState.currentHoveredOption=null}),this.ANIMATION_DURATION)}}},{key:"updateBorderPosition",value:function(t){if(!this.hoverState.isAnimating&&this.selector){var e=this.selector.getBoundingClientRect(),n=this.findHoveredOption(t);if(n&&n!==this.hoverState.currentHoveredOption){this.hoverState.currentHoveredOption=n;var i=this.calculateBorderPosition(n,e);this.updateBorderTransform(i)}}}},{key:"handleMousePositionUpdate",value:function(){var t=Date.now();if(!(t-this.hoverState.lastCheckTime<this.MONITOR_INTERVAL)&&(this.hoverState.lastCheckTime=t,this.selector)){var e=this.selector.getBoundingClientRect(),n=b.isInsideBounds(e);if(n!==this.hoverState.insideSelector)this.updateSelectorState(n);else if(n&&!this.hoverState.isAnimating){var i=b.getPosition().x;this.updateBorderPosition(i)}}}},{key:"updateSelectorState",value:function(t){if(this.hoverState.insideSelector=t,this.selector)if(t){var e=this.selector.getBoundingClientRect(),n=b.getRelativeDirection(e);if(this.hoverState.mouseEnteredFromRight="right"===n,!this.hoverState.isAnimating&&!this.hoverState.currentHoveredOption){var i=b.getPosition().x,o=this.findHoveredOption(i);if(o){var r="right"===n?"right":"left";this.animateBordersIn(o,r)}}}else!this.hoverState.isAnimating&&this.hoverState.currentHoveredOption&&this.animateBordersOut()}},{key:"setupMouseEvents",value:function(){var t=this;this.selector&&(this.selector.addEventListener("mouseenter",(function(){t.updateSelectorState(!0);var e=b.getPosition().x,n=t.findHoveredOption(e);if(n&&!t.hoverState.isAnimating){var i=t.selector.getBoundingClientRect(),o="right"===b.getRelativeDirection(i)?"right":"left";t.animateBordersIn(n,o)}})),this.selector.addEventListener("mousemove",(function(){if(t.hoverState.insideSelector&&!t.hoverState.isAnimating){var e=b.getPosition().x;t.updateBorderPosition(e)}})),this.selector.addEventListener("mouseleave",(function(){t.updateSelectorState(!1)})))}},{key:"startContinuousMonitoring",value:function(){var t=this;setInterval((function(){t.handleMousePositionUpdate()}),this.MONITOR_INTERVAL)}},{key:"destroy",value:function(){var t=this.container.querySelector(".".concat(this.options.containerClass));t&&t.parentNode&&t.parentNode.removeChild(t),this.container&&this.container.classList.remove("multi-select-container"),this.container=null,this.selector=null,this.optionElements.clear(),this._borderTop=null,this._borderBottom=null,this._selectorBackground=null,console.log("[multi_select_component_engine] Destroyed:",this.options.id)}}],e&&q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),Y=function(t,e){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Y(t,e)};function X(t,e){function n(){this.constructor=t}Y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Z=function(){return Z=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Z.apply(this,arguments)};function J(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}var Q=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function K(t){console.error("[BScroll warn]: "+t)}var $="undefined"!=typeof window,tt=$&&navigator.userAgent.toLowerCase(),et=!(!tt||!/wechatdevtools/.test(tt)),nt=tt&&tt.indexOf("android")>0,it=function(){if("string"==typeof tt){var t=/os (\d\d?_\d(_\d)?)/.exec(tt);if(!t)return!1;var e=t[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===e[0]&&e[1]>=4)}return!1}(),ot=!1;if($)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){ot=!0}}),window.addEventListener("test-passive",(function(){}),rt)}catch(t){}function st(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var at=function(t,e){for(var n in e)t[n]=e[n];return t};function lt(t){return null==t}function ht(t,e,n){return t<e?e:t>n?n:t}var ct=$&&document.createElement("div").style,ut=function(){if(!$)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var n=e[t];if(void 0!==ct[n.value])return n.key}return!1}();function dt(t){return!1===ut?t:"standard"===ut?"transitionEnd"===t?"transitionend":t:ut+t.charAt(0).toUpperCase()+t.substr(1)}function pt(t){return"string"==typeof t?document.querySelector(t):t}function mt(t,e,n,i){var o=ot?{passive:!1,capture:!!i}:!!i;t.addEventListener(e,n,o)}function gt(t,e,n,i){t.removeEventListener(e,n,{capture:!!i})}function ft(t){t.cancelable&&t.preventDefault()}function yt(t){for(var e=0,n=0;t;)e-=t.offsetLeft,n-=t.offsetTop,t=t.offsetParent;return{left:e,top:n}}ut&&"standard"!==ut&&ut.toLowerCase();var vt=dt("transform"),bt=dt("transition"),xt=$&&dt("perspective")in ct,wt=$&&("ontouchstart"in window||et),Et=$&&bt in ct,St={transform:vt,transition:bt,transitionTimingFunction:dt("transitionTimingFunction"),transitionDuration:dt("transitionDuration"),transitionDelay:dt("transitionDelay"),transformOrigin:dt("transformOrigin"),transitionEnd:dt("transitionEnd"),transitionProperty:dt("transitionProperty")},Tt={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function kt(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}function Mt(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1}var Ct=Mt;function Dt(t,e){var n;void 0===e&&(e="click"),"mouseup"===t.type?n=t:"touchend"!==t.type&&"touchcancel"!==t.type||(n=t.changedTouches[0]);var i,o={};n&&(o.screenX=n.screenX||0,o.screenY=n.screenY||0,o.clientX=n.clientX||0,o.clientY=n.clientY||0);var r=!0,s=!0,a={ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey};if("undefined"!=typeof MouseEvent)try{i=new MouseEvent(e,at(Z({bubbles:r,cancelable:s},a),o))}catch(t){l()}else l();function l(){(i=document.createEvent("Event")).initEvent(e,r,s),at(i,o)}i.forwardedTouchEvent=!0,i._constructed=!0,t.target.dispatchEvent(i)}var Pt={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},zt=1e3/60,Rt=$&&window;function At(){}var _t,It,Ot,Bt,Ht=$?Rt.requestAnimationFrame||Rt.webkitRequestAnimationFrame||Rt.mozRequestAnimationFrame||Rt.oRequestAnimationFrame||function(t){return window.setTimeout(t,t.interval||zt)}:At,Ft=$?Rt.cancelAnimationFrame||Rt.webkitCancelAnimationFrame||Rt.mozCancelAnimationFrame||Rt.oCancelAnimationFrame||function(t){window.clearTimeout(t)}:At,Lt=function(t){},Vt={enumerable:!0,configurable:!0,get:Lt,set:Lt},Wt=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,n){return void 0===n&&(n=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,n]),this},t.prototype.once=function(t,e,n){var i=this;void 0===n&&(n=this),this.hasType(t);var o=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];i.off(t,o);var a=e.apply(n,r);if(!0===a)return a};return o.fn=e,this.on(t,o),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var n=this.events[t];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===e||n[i][0]&&n[i][0].fn===e)&&n.splice(i,1);return this}},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.hasType(t);var i=this.events[t];if(i)for(var o,r=i.length,s=J(i),a=0;a<r;a++){var l=s[a],h=l[0],c=l[1];if(h&&!0===(o=h.apply(c,e)))return o}},t.prototype.registerType=function(t){var e=this;t.forEach((function(t){e.eventTypes[t]=t}))},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype.hasType=function(t){var e=this.eventTypes;e[t]===t||K('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map((function(t){return JSON.stringify(t)}))+"]")},t}(),Nt=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(mt)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(gt)},t.prototype.handleDOMEvents=function(t){var e=this,n=this.wrapper;this.events.forEach((function(i){t(n,i.name,e,!!i.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(n){return n.name===e&&(n.handler(t),!0)}))},t}(),jt=function(t){function e(){var e=t.call(this)||this;return e.startX=0,e.startY=0,e.scrollX=!1,e.scrollY=!0,e.freeScroll=!1,e.directionLockThreshold=0,e.eventPassthrough="",e.click=!1,e.dblclick=!1,e.tap="",e.bounce={top:!0,bottom:!0,left:!0,right:!0},e.bounceTime=800,e.momentum=!0,e.momentumLimitTime=300,e.momentumLimitDistance=15,e.swipeTime=2500,e.swipeBounceTime=500,e.deceleration=.0015,e.flickLimitTime=200,e.flickLimitDistance=100,e.resizePolling=60,e.probeType=0,e.stopPropagation=!1,e.preventDefault=!0,e.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},e.tagException={tagName:/^TEXTAREA$/},e.HWCompositing=!0,e.useTransition=!0,e.bindToWrapper=!1,e.bindToTarget=!1,e.disableMouse=wt,e.disableTouch=!wt,e.autoBlur=!0,e.autoEndDistance=5,e.outOfBoundaryDampingFactor=1/3,e.specifiedIndexAsContent=0,e.quadrant=1,e}return X(e,t),e.prototype.merge=function(t){if(!t)return this;for(var e in t)"bounce"!==e?this[e]=t[e]:this.bounce=this.resolveBounce(t[e]);return this},e.prototype.process=function(){return this.translateZ=this.HWCompositing&&xt?" translateZ(1px)":"",this.useTransition=this.useTransition&&Et,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},e.prototype.resolveBounce=function(t){var e={top:!0,right:!0,bottom:!0,left:!0};return"object"==typeof t?at(e,t):t?e:{top:!1,right:!1,bottom:!1,left:!1}},e}((function(){})),qt=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new Wt(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return t.prototype.handleDOMEvents=function(){var t=this.options,e=t.bindToWrapper,n=t.disableMouse,i=t.disableTouch,o=t.click,r=this.wrapper,s=e?r:window,a=[],l=[],h=!i,c=!n;o&&a.push({name:"click",handler:this.click.bind(this),capture:!0}),h&&(a.push({name:"touchstart",handler:this.start.bind(this)}),l.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),c&&(a.push({name:"mousedown",handler:this.start.bind(this)}),l.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new Nt(r,a),this.targetEventRegister=new Nt(s,l)},t.prototype.beforeHandler=function(t,e){var n=this.options,i=n.preventDefault,o=n.stopPropagation,r=n.preventDefaultException;({start:function(){return i&&!Mt(t.target,r)},end:function(){return i&&!Mt(t.target,r)},move:function(){return i}})[e]()&&t.preventDefault(),o&&t.stopPropagation()},t.prototype.setInitiated=function(t){void 0===t&&(t=0),this.initiated=t},t.prototype.start=function(t){var e=Tt[t.type];if(!this.initiated||this.initiated===e)if(this.setInitiated(e),Ct(t.target,this.options.tagException))this.setInitiated();else if((2!==e||0===t.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,t)){this.beforeHandler(t,"start");var n=t.touches?t.touches[0]:t;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,t)}},t.prototype.move=function(t){if(Tt[t.type]===this.initiated){this.beforeHandler(t,"move");var e=t.touches?t.touches[0]:t,n=e.pageX-this.pointX,i=e.pageY-this.pointY;if(this.pointX=e.pageX,this.pointY=e.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:i,e:t})){var o=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,r=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,s=this.pointX-o,a=this.pointY-r,l=this.options.autoEndDistance;(s>document.documentElement.clientWidth-l||a>document.documentElement.clientHeight-l||s<l||a<l)&&this.end(t)}}},t.prototype.end=function(t){Tt[t.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(t,"end"),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.click=function(t){this.hooks.trigger(this.hooks.eventTypes.click,t)},t.prototype.setContent=function(t){t!==this.wrapper&&(this.wrapper=t,this.rebindDOMEvents())},t.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},t.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},t}(),Gt={x:["translateX","px"],y:["translateY","px"]},Ut=function(){function t(t){this.setContent(t),this.hooks=new Wt(["beforeTranslate","translate"])}return t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.content,null)[St.transform].split(")")[0].split(", ");return{x:+(t[12]||t[4])||0,y:+(t[13]||t[5])||0}},t.prototype.translate=function(t){var e=[];Object.keys(t).forEach((function(n){if(Gt[n]){var i=Gt[n][0];if(i){var o=Gt[n][1],r=t[n];e.push(i+"("+r+o+")")}}})),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,e,t),this.style[St.transform]=e.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,t)},t.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),Yt=function(){function t(t,e,n){this.translater=e,this.options=n,this.timer=0,this.hooks=new Wt(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(t)}return t.prototype.translate=function(t){this.translater.translate(t)},t.prototype.setPending=function(t){this.pending=t},t.prototype.setForceStopped=function(t){this.forceStopped=t},t.prototype.setCallStop=function(t){this.callStopWhenPending=t},t.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style,this.stop())},t.prototype.clearTimer=function(){this.timer&&(Ft(this.timer),this.timer=0)},t.prototype.destroy=function(){this.hooks.destroy(),Ft(this.timer)},t}(),Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.prototype.startProbe=function(t,e){var n=this,i=t,o=function(){var r=n.translater.getComputedPosition();(function(t,e,n,i){var o=function(t,e){var n=t-e;return n>0?-1:n<0?1:0},r=o(e.x,t.x),s=o(e.y,t.y),a=n.x-i.x,l=n.y-i.y;return r*a<=0&&s*l<=0})(t,e,r,i)&&n.hooks.trigger(n.hooks.eventTypes.move,r),n.pending||(n.callStopWhenPending?n.callStopWhenPending=!1:n.hooks.trigger(n.hooks.eventTypes.end,r)),i=r,n.pending&&(n.timer=Ht(o))};this.callStopWhenPending&&this.setCallStop(!1),Ft(this.timer),o()},e.prototype.transitionTime=function(t){void 0===t&&(t=0),this.style[St.transitionDuration]=t+"ms",this.hooks.trigger(this.hooks.eventTypes.time,t)},e.prototype.transitionTimingFunction=function(t){this.style[St.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},e.prototype.transitionProperty=function(){this.style[St.transitionProperty]=St.transform},e.prototype.move=function(t,e,n,i){this.setPending(n>0),this.transitionTimingFunction(i),this.transitionProperty(),this.transitionTime(n),this.translate(e);var o=3===this.options.probeType;n&&o&&this.startProbe(t,e),n||(this._reflow=this.content.offsetHeight,o&&this.hooks.trigger(this.hooks.eventTypes.move,e),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),Ft(this.timer);var e=this.translater.getComputedPosition(),n=e.x,i=e.y;this.transitionTime(),this.translate({x:n,y:i}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:n,y:i})}return t},e.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(Yt),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.prototype.move=function(t,e,n,i){if(!n)return this.translate(e),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,e),void this.hooks.trigger(this.hooks.eventTypes.end,e);this.animate(t,e,n,i)},e.prototype.animate=function(t,e,n,i){var o=this,r=st(),s=r+n,a=3===this.options.probeType,l=function(){var h=st();if(h>=s)return o.translate(e),a&&o.hooks.trigger(o.hooks.eventTypes.move,e),void o.hooks.trigger(o.hooks.eventTypes.end,e);var c=i(h=(h-r)/n),u={};Object.keys(e).forEach((function(n){var i=t[n],o=e[n];u[n]=(o-i)*c+i})),o.translate(u),a&&o.hooks.trigger(o.hooks.eventTypes.move,u),o.pending&&(o.timer=Ht(l)),o.pending||(o.callStopWhenPending?o.callStopWhenPending=!1:o.hooks.trigger(o.hooks.eventTypes.end,e))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),Ft(this.timer),l()},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),Ft(this.timer);var e=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,e)}return t},e.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(Yt),Jt=function(){function t(t,e,n){this.wrapper=t,this.options=n,this.hooks=new Wt(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(e)}return t.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},t.prototype.move=function(t){return t=this.hasScroll?t:0,this.setMovingDirection(t),this.performDampingAlgorithm(t,this.options.outOfBoundaryDampingFactor)},t.prototype.setMovingDirection=function(t){this.movingDirection=t>0?-1:t<0?1:0},t.prototype.setDirection=function(t){this.direction=t>0?-1:t<0?1:0},t.prototype.performDampingAlgorithm=function(t,e){var n=this.currentPos+t;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n=n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+t*e:n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},t.prototype.end=function(t){var e={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&t<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var i=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0;e=this.hasScroll?this.momentum(this.currentPos,this.startPos,t,this.maxScrollPos,this.minScrollPos,i,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,e);return e},t.prototype.momentum=function(t,e,n,i,o,r,s){void 0===s&&(s=this.options);var a=t-e,l=Math.abs(a)/n,h=s.deceleration,c=s.swipeBounceTime,u=s.swipeTime,d={destination:t+l*l/h*(a<0?-1:1),duration:Math.min(u,2*l/h),rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,d,a),d.destination<i?(d.destination=r?Math.max(i-r/4,i-r/d.rate*l):i,d.duration=c):d.destination>o&&(d.destination=r?Math.min(o+r/4,o+r/d.rate*l):o,d.duration=c),d.destination=Math.round(d.destination),d},t.prototype.updateDirection=function(){var t=this.currentPos-this.absStartPos;this.setDirection(t)},t.prototype.refresh=function(t){var e=this.options.rect,n=e.size,i=e.position,o="static"===window.getComputedStyle(this.wrapper,null).position,r=kt(this.wrapper);this.wrapperSize=this.wrapper["width"===n?"clientWidth":"clientHeight"],this.setContent(t);var s=kt(this.content);this.contentSize=s[n],this.relativeOffset=s[i],o&&(this.relativeOffset-=r[i]),this.computeBoundary(),this.setDirection(0)},t.prototype.setContent=function(t){t!==this.content&&(this.content=t,this.resetState())},t.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},t.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var t={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};t.maxScrollPos<0&&(t.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(t.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,t),this.minScrollPos=t.minScrollPos,this.maxScrollPos=t.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},t.prototype.updatePosition=function(t){this.currentPos=t},t.prototype.getCurrentPos=function(){return this.currentPos},t.prototype.checkInBoundary=function(){var t=this.adjustPosition(this.currentPos);return{position:t,inBoundary:t===this.getCurrentPos()}},t.prototype.adjustPosition=function(t){return this.hasScroll||this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?t>this.minScrollPos?t=this.minScrollPos:t<this.maxScrollPos&&(t=this.maxScrollPos):t=this.minScrollPos,t},t.prototype.updateStartPos=function(){this.startPos=this.currentPos},t.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},t.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},t.prototype.getAbsDist=function(t){return this.dist+=t,Math.abs(this.dist)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),Qt=((_t={}).yes=function(t){return!0},_t.no=function(t){return ft(t),!1},_t),Kt=((It={}).horizontal=((Ot={}).yes="horizontal",Ot.no="vertical",Ot),It.vertical=((Bt={}).yes="vertical",Bt.no="horizontal",Bt),It),$t=function(){function t(t,e,n){this.directionLockThreshold=t,this.freeScroll=e,this.eventPassthrough=n,this.reset()}return t.prototype.reset=function(){this.directionLocked=""},t.prototype.checkMovingDirection=function(t,e,n){return this.computeDirectionLock(t,e),this.handleEventPassthrough(n)},t.prototype.adjustDelta=function(t,e){return"horizontal"===this.directionLocked?e=0:"vertical"===this.directionLocked&&(t=0),{deltaX:t,deltaY:e}},t.prototype.computeDirectionLock=function(t,e){""!==this.directionLocked||this.freeScroll||(t>e+this.directionLockThreshold?this.directionLocked="horizontal":e>=t+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},t.prototype.handleEventPassthrough=function(t){var e=Kt[this.directionLocked];if(e){if(this.eventPassthrough===e.yes)return Qt.yes(t);if(this.eventPassthrough===e.no)return Qt.no(t)}return!1},t}(),te=function(){function t(t,e,n,i,o){this.hooks=new Wt(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=t,this.scrollBehaviorY=e,this.actionsHandler=n,this.animater=i,this.options=o,this.directionLockAction=new $t(o.directionLockThreshold,o.freeScroll,o.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return t.prototype.bindActionsHandler=function(){var t=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,(function(e){return!t.enabled||t.handleStart(e)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,(function(e){var n=e.deltaX,i=e.deltaY,o=e.e;if(!t.enabled)return!0;var r=function(t,e,n){return 2===n?[e,-t]:3===n?[-t,-e]:4===n?[-e,t]:[t,e]}(n,i,t.options.quadrant),s={deltaX:r[0],deltaY:r[1]};return t.hooks.trigger(t.hooks.eventTypes.coordinateTransformation,s),t.handleMove(s.deltaX,s.deltaY,o)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,(function(e){return!t.enabled||t.handleEnd(e)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,(function(e){t.enabled&&!e._constructed&&t.handleClick(e)}))},t.prototype.handleStart=function(t){var e=st();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=e,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,t)},t.prototype.handleMove=function(t,e,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var i=this.scrollBehaviorX.getAbsDist(t),o=this.scrollBehaviorY.getAbsDist(e),r=st();if(this.checkMomentum(i,o,r))return!0;if(this.directionLockAction.checkMovingDirection(i,o,n))return this.actionsHandler.setInitiated(),!0;var s=this.directionLockAction.adjustDelta(t,e),a=this.scrollBehaviorX.getCurrentPos(),l=this.scrollBehaviorX.move(s.deltaX),h=this.scrollBehaviorY.getCurrentPos(),c=this.scrollBehaviorY.move(s.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var u=l!==a||c!==h;this.contentMoved||u||this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&u&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&u&&(this.animater.translate({x:l,y:c}),this.dispatchScroll(r))}}},t.prototype.dispatchScroll=function(t){t-this.startTime>this.options.momentumLimitTime&&(this.startTime=t,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},t.prototype.checkMomentum=function(t,e,n){return n-this.endTime>this.options.momentumLimitTime&&e<this.options.momentumLimitDistance&&t<this.options.momentumLimitDistance},t.prototype.handleEnd=function(t){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,t)){var e=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,t,e))return!0;e=this.ensureIntegerPos(e),this.animater.translate(e),this.endTime=st();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,e,n)}},t.prototype.ensureIntegerPos=function(t){this.ensuringInteger=!0;var e=t.x,n=t.y,i=this.scrollBehaviorX,o=i.minScrollPos,r=i.maxScrollPos,s=this.scrollBehaviorY,a=s.minScrollPos,l=s.maxScrollPos;return e=e>0?Math.ceil(e):Math.floor(e),n=n>0?Math.ceil(n):Math.floor(n),{x:e=ht(e,r,o),y:n=ht(n,l,a)}},t.prototype.handleClick=function(t){Mt(t.target,this.options.preventDefaultException)||(ft(t),t.stopPropagation())},t.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},t.prototype.refresh=function(){this.endTime=0},t.prototype.destroy=function(){this.hooks.destroy()},t}();function ee(t,e,n,i){var o=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce((function(e,n){return e[n]=t[n],e}),{});return o.scrollable=!!t[e],o.bounces=n,o.rect=i,o}function ne(t,e,n){n.forEach((function(n){var i,o;"string"==typeof n?i=o=n:(i=n.source,o=n.target),t.on(i,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.trigger.apply(e,J([o],t))}))}))}var ie=function(){function t(t,e,n){this.wrapper=t,this.content=e,this.resizeTimeout=0,this.hooks=new Wt(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var i,o=this.options.bounce,r=o.left,s=o.right,a=o.top,l=o.bottom;this.scrollBehaviorX=new Jt(t,e,ee(n,"scrollX",[r,s],{size:"width",position:"left"})),this.scrollBehaviorY=new Jt(t,e,ee(n,"scrollY",[a,l],{size:"height",position:"top"})),this.translater=new Ut(this.content),this.animater=function(t,e,n){var i=n.useTransition,o={};return Object.defineProperty(o,"probeType",{enumerable:!0,configurable:!1,get:function(){return n.probeType}}),i?new Xt(t,e,o):new Zt(t,e,o)}(this.content,this.translater,this.options),this.actionsHandler=new qt(this.options.bindToTarget?this.content:t,(i=this.options,["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce((function(t,e){return t[e]=i[e],t}),{}))),this.actions=new te(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var h=this.resize.bind(this);this.resizeRegister=new Nt(window,[{name:"orientationchange",handler:h},{name:"resize",handler:h}]),this.registerTransitionEnd(),this.init()}return t.prototype.init=function(){var t=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,(function(){t.togglePointerEvents(!0)}))},t.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new Nt(this.content,[{name:St.transitionEnd,handler:this.transitionEnd.bind(this)}])},t.prototype.bindTranslater=function(){var t=this,e=this.translater.hooks;e.on(e.eventTypes.beforeTranslate,(function(e){t.options.translateZ&&e.push(t.options.translateZ)})),e.on(e.eventTypes.translate,(function(e){var n=t.getCurrentPos();t.updatePositions(e),!0!==t.actions.ensuringInteger?e.x===n.x&&e.y===n.y||t.togglePointerEvents(!1):t.actions.ensuringInteger=!1}))},t.prototype.bindAnimater=function(){var t=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,(function(e){t.resetPosition(t.options.bounceTime)||(t.animater.setPending(!1),t.hooks.trigger(t.hooks.eventTypes.scrollEnd,e))})),ne(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},t.prototype.bindActions=function(){var t=this,e=this.actions;ne(e.hooks,this.hooks,[{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:e.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:e.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:e.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:e.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),e.hooks.on(e.hooks.eventTypes.end,(function(n,i){return t.hooks.trigger(t.hooks.eventTypes.touchEnd,i),!!t.hooks.trigger(t.hooks.eventTypes.end,i)||!(e.fingerMoved||(t.hooks.trigger(t.hooks.eventTypes.scrollCancel),!t.checkClick(n)))||(t.resetPosition(t.options.bounceTime,Pt.bounce)?(t.animater.setForceStopped(!1),!0):void 0)})),e.hooks.on(e.hooks.eventTypes.scrollEnd,(function(n,i){var o=Math.abs(n.x-t.scrollBehaviorX.startPos),r=Math.abs(n.y-t.scrollBehaviorY.startPos);if(t.checkFlick(i,o,r))return t.animater.setForceStopped(!1),void t.hooks.trigger(t.hooks.eventTypes.flick);t.momentum(n,i)?t.animater.setForceStopped(!1):(e.contentMoved&&t.hooks.trigger(t.hooks.eventTypes.scrollEnd,n),t.animater.forceStopped&&t.animater.setForceStopped(!1))}))},t.prototype.checkFlick=function(t,e,n){if(this.hooks.events.flick.length>1&&t<this.options.flickLimitTime&&e<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>1||e>1))return!0},t.prototype.momentum=function(t,e){var n={time:0,easing:Pt.swiper,newX:t.x,newY:t.y},i=this.scrollBehaviorX.end(e),o=this.scrollBehaviorY.end(e);if(n.newX=lt(i.destination)?n.newX:i.destination,n.newY=lt(o.destination)?n.newY:o.destination,n.time=Math.max(i.duration,o.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==t.x||n.newY!==t.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=Pt.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},t.prototype.checkClick=function(t){var e=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!e){var n=this.options.dblclick,i=!1;if(n&&this.lastClickTime){var o=n.delay,r=void 0===o?300:o;st()-this.lastClickTime<r&&(i=!0,function(t){Dt(t,"dblclick")}(t))}return this.options.tap&&function(t,e){var n=document.createEvent("Event");n.initEvent(e,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)}(t,this.options.tap),this.options.click&&!Mt(t.target,this.options.preventDefaultException)&&Dt(t),this.lastClickTime=i?null:st(),!0}return!1},t.prototype.resize=function(){var t=this;this.actions.enabled&&(nt&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){t.hooks.trigger(t.hooks.eventTypes.resize)}),this.options.resizePolling))},t.prototype.transitionEnd=function(t){t.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,Pt.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},t.prototype.togglePointerEvents=function(t){void 0===t&&(t=!0);for(var e=this.content.children.length?this.content.children:[this.content],n=t?"auto":"none",i=0;i<e.length;i++){var o=e[i];o.isBScrollContainer||(o.style.pointerEvents=n)}},t.prototype.refresh=function(t){var e=this.setContent(t);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(t),this.scrollBehaviorY.refresh(t),e&&(this.translater.setContent(t),this.animater.setContent(t),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(t)),this.actions.refresh(),this.wrapperOffset=yt(this.wrapper)},t.prototype.setContent=function(t){var e=t!==this.content;return e&&(this.content=t),e},t.prototype.scrollBy=function(t,e,n,i){void 0===n&&(n=0);var o=this.getCurrentPos(),r=o.x,s=o.y;i=i||Pt.bounce,t+=r,e+=s,this.scrollTo(t,e,n,i)},t.prototype.scrollTo=function(t,e,n,i,o){void 0===n&&(n=0),void 0===i&&(i=Pt.bounce),void 0===o&&(o={start:{},end:{}});var r=this.options.useTransition?i.style:i.fn,s=this.getCurrentPos(),a=Z({x:s.x,y:s.y},o.start),l=Z({x:t,y:e},o.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!function(t,e){for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];if(t[o]!==e[o])return!1}return!0}(a,l)){var h=Math.abs(l.x-a.x),c=Math.abs(l.y-a.y);h<1&&c<1&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(a,l,n,r)}},t.prototype.scrollToElement=function(t,e,n,i,o){var r=pt(t),s=yt(r),a=function(t,e,n){return"number"==typeof t?t:t?Math.round(e/2-n/2):0};n=a(n,r.offsetWidth,this.wrapper.offsetWidth),i=a(i,r.offsetHeight,this.wrapper.offsetHeight);var l=function(t,e,n,i){return t-=e,i.adjustPosition(t-n)};s.left=l(s.left,this.wrapperOffset.left,n,this.scrollBehaviorX),s.top=l(s.top,this.wrapperOffset.top,i,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,r,s)||this.scrollTo(s.left,s.top,e,o)},t.prototype.resetPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=Pt.bounce);var n=this.scrollBehaviorX.checkInBoundary(),i=n.position,o=n.inBoundary,r=this.scrollBehaviorY.checkInBoundary(),s=r.position,a=r.inBoundary;return!(o&&a||(it&&this.reflow(),this.scrollTo(i,s,t,e),0))},t.prototype.reflow=function(){this._reflow=this.content.offsetHeight},t.prototype.updatePositions=function(t){this.scrollBehaviorX.updatePosition(t.x),this.scrollBehaviorY.updatePosition(t.y)},t.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},t.prototype.enable=function(){this.actions.enabled=!0},t.prototype.disable=function(){Ft(this.animater.timer),this.actions.enabled=!1},t.prototype.destroy=function(){var t=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach((function(e){return t[e].destroy()}))},t}(),oe=function(t){function e(e,n){var i=t.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,o=pt(e);return o?(i.plugins={},i.options=(new jt).merge(n).process(),i.setContent(o).valid?(i.hooks=new Wt(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),i.init(o),i):i):(K("Can not resolve the wrapper DOM."),i)}return X(e,t),e.use=function(t){var n=t.pluginName;return e.plugins.some((function(e){return t===e.ctor}))?e:lt(n)?(K("Plugin Class must specify plugin's name in static property by 'pluginName' field."),e):(e.pluginsMap[n]=!0,e.plugins.push({name:n,applyOrder:t.applyOrder,ctor:t}),e)},e.prototype.setContent=function(t){var e=!1,n=!0,i=t.children[this.options.specifiedIndexAsContent];return i?(e=this.content!==i)&&(this.content=i):(K("The wrapper need at least one child element to be content element to scroll."),n=!1),{valid:n,contentChanged:e}},e.prototype.init=function(t){var e=this;this.wrapper=t,t.isBScrollContainer=!0,this.scroller=new ie(t,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,(function(){e.refresh()})),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(Q),this.applyPlugins(),this.refreshWithoutReset(this.content);var n=this.options,i={x:n.startX,y:n.startY};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,i)||this.scroller.scrollTo(i.x,i.y)},e.prototype.applyPlugins=function(){var t=this,n=this.options;e.plugins.sort((function(t,e){var n,i=((n={}).pre=-1,n.post=1,n);return(t.applyOrder?i[t.applyOrder]:0)-(e.applyOrder?i[e.applyOrder]:0)})).forEach((function(e){var i=e.ctor;n[e.name]&&"function"==typeof i&&(t.plugins[e.name]=new i(t))}))},e.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,(function(){var t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||t.blur()}))},e.prototype.eventBubbling=function(){ne(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},e.prototype.refreshWithoutReset=function(t){this.scroller.refresh(t),this.hooks.trigger(this.hooks.eventTypes.refresh,t),this.trigger(this.eventTypes.refresh,t)},e.prototype.proxy=function(t){var e=this;t.forEach((function(t){var n=t.key,i=t.sourceKey;!function(t,e,n){Vt.get=function(){return function(t,e){for(var n=e.split("."),i=0;i<n.length-1;i++)if("object"!=typeof(t=t[n[i]])||!t)return;var o=n.pop();return"function"==typeof t[o]?function(){return t[o].apply(t,arguments)}:t[o]}(this,e)},Vt.set=function(t){!function(t,e,n){for(var i,o=e.split("."),r=0;r<o.length-1;r++)t[i=o[r]]||(t[i]={}),t=t[i];t[o.pop()]=n}(this,e,t)},Object.defineProperty(t,n,Vt)}(e,i,n)}))},e.prototype.refresh=function(){var t=this.setContent(this.wrapper),e=t.contentChanged;if(t.valid){var n=this.content;this.refreshWithoutReset(n),e&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,n),this.trigger(this.eventTypes.contentChanged,n)),this.scroller.resetPosition()}},e.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},e.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},e.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},e.prototype.eventRegister=function(t){this.registerType(t)},e.plugins=[],e.pluginsMap={},e}(Wt);function re(t,e){return new oe(t,e)}re.use=oe.use,re.plugins=oe.plugins,re.pluginsMap=oe.pluginsMap;var se=re,ae="undefined"!=typeof window,le=ae&&navigator.userAgent.toLowerCase();if(le&&/wechatdevtools/.test(le),le&&le.indexOf("android"),function(){if("string"==typeof le){var t=/os (\d\d?_\d(_\d)?)/.exec(le);if(!t)return!1;var e=t[1].split("_").map((function(t){return parseInt(t,10)}));13===e[0]&&e[1]}}(),ae)try{var he={};Object.defineProperty(he,"passive",{get:function(){}}),window.addEventListener("test-passive",(function(){}),he)}catch(t){}var ce=ae&&document.createElement("div").style,ue=function(){if(!ae)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var n=e[t];if(void 0!==ce[n.value])return n.key}return!1}();function de(t){return!1===ue?t:"standard"===ue?"transitionEnd"===t?"transitionend":t:ue+t.charAt(0).toUpperCase()+t.substr(1)}ue&&"standard"!==ue&&ue.toLowerCase();var pe=de("transform");de("transition"),ae&&de("perspective");var me=pe,ge=de("transitionTimingFunction"),fe=de("transitionDuration");function ye(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}de("transitionDelay"),de("transformOrigin"),de("transitionEnd"),de("transitionProperty");var ve={style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},be=[{key:"wheelTo",name:"wheelTo"},{key:"getSelectedIndex",name:"getSelectedIndex"},{key:"restorePosition",name:"restorePosition"}].map((function(t){return{key:t.key,sourceKey:"plugins.wheel."+t.name}})),xe="wheelIndexChanged",we=function(){function t(t){this.scroll=t,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.refreshBoundary(),this.setSelectedIndex(this.options.selectedIndex)},t.prototype.handleBScroll=function(){this.scroll.proxy(be),this.scroll.registerType([xe])},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.wheel?{}:this.scroll.options.wheel;this.options=function(t,e){for(var n in e)t[n]=e[n];return t}({wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item",rotate:25,adjustTime:400,selectedIndex:0,wheelDisabledItemClass:"wheel-disabled-item"},t)},t.prototype.handleHooks=function(){var t=this,e=this.scroll,n=this.scroll.scroller,i=n.actionsHandler,o=n.scrollBehaviorX,r=n.scrollBehaviorY,s=n.animater,a=n.content;e.on(e.eventTypes.scrollEnd,(function(e){var i=t.findNearestValidWheel(e.y).index;if(n.animater.forceStopped&&!t.isAdjustingPosition)return t.target=t.items[i],!0;t.setSelectedIndex(i),t.isAdjustingPosition&&(t.isAdjustingPosition=!1)})),this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh,(function(e){e!==a&&(a=e,t.setSelectedIndex(t.options.selectedIndex,!0)),t.rotateX(t.scroll.y),t.wheelTo(t.selectedIndex,0)})),this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo,(function(e){e.x=0,e.y=-t.selectedIndex*t.itemHeight})),n.hooks.on(n.hooks.eventTypes.checkClick,(function(){var e,n=(e=t.items,Array.prototype.slice.call(e,0)).indexOf(t.target);return-1===n||t.wheelTo(n,t.options.adjustTime,ve),!0})),n.hooks.on(n.hooks.eventTypes.scrollTo,(function(e){e.y=t.findNearestValidWheel(e.y).y})),n.hooks.on(n.hooks.eventTypes.minDistanceScroll,(function(){var t=n.animater;!0===t.forceStopped&&(t.forceStopped=!1)})),n.hooks.on(n.hooks.eventTypes.scrollToElement,(function(e,n){if(!ye(e,t.options.wheelItemClass))return!0;n.top=t.findNearestValidWheel(n.top).y})),i.hooks.on(i.hooks.eventTypes.beforeStart,(function(e){t.target=e.target})),o.hooks.on(o.hooks.eventTypes.computeBoundary,(function(t){t.maxScrollPos=0,t.minScrollPos=0})),r.hooks.on(r.hooks.eventTypes.computeBoundary,(function(e){t.items=t.scroll.scroller.content.children,t.checkWheelAllDisabled(),t.itemHeight=t.items.length>0?r.contentSize/t.items.length:0,e.maxScrollPos=-t.itemHeight*(t.items.length-1),e.minScrollPos=0})),r.hooks.on(r.hooks.eventTypes.momentum,(function(e){e.rate=4,e.destination=t.findNearestValidWheel(e.destination).y})),r.hooks.on(r.hooks.eventTypes.end,(function(e){var n=t.findNearestValidWheel(r.currentPos);e.destination=n.y,e.duration=t.options.adjustTime})),s.hooks.on(s.hooks.eventTypes.time,(function(e){t.transitionDuration(e)})),s.hooks.on(s.hooks.eventTypes.timeFunction,(function(e){t.timeFunction(e)})),s.hooks.on(s.hooks.eventTypes.callStop,(function(){var e=t.findNearestValidWheel(t.scroll.y).index;t.isAdjustingPosition=!0,t.wheelTo(e,0)})),s.translater.hooks.on(s.translater.hooks.eventTypes.translate,(function(e){t.rotateX(e.y)}))},t.prototype.refreshBoundary=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,n=t.scrollBehaviorY,i=t.content;e.refresh(i),n.refresh(i)},t.prototype.setSelectedIndex=function(t,e){void 0===e&&(e=!1);var n=this.selectedIndex;this.selectedIndex=t,n===t||e||this.scroll.trigger(xe,t)},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.wheelTo=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var i=-t*this.itemHeight;this.scroll.scrollTo(0,i,e,n)},t.prototype.restorePosition=function(){if(this.scroll.pending){var t=this.getSelectedIndex();this.scroll.scroller.animater.clearTimer(),this.wheelTo(t,0)}},t.prototype.transitionDuration=function(t){for(var e=0;e<this.items.length;e++)this.items[e].style[fe]=t+"ms"},t.prototype.timeFunction=function(t){for(var e=0;e<this.items.length;e++)this.items[e].style[ge]=t},t.prototype.rotateX=function(t){for(var e=this.options.rotate,n=void 0===e?25:e,i=0;i<this.items.length;i++){var o=(n*(t/this.itemHeight+i)).toFixed(3);this.items[i].style[me]="rotateX("+o+"deg)"}},t.prototype.findNearestValidWheel=function(t){t=t>0?0:t<this.scroll.maxScrollY?this.scroll.maxScrollY:t;for(var e=Math.abs(Math.round(-t/this.itemHeight)),n=e,i=this.items,o=this.options.wheelDisabledItemClass;e>=0&&ye(i[e],o);)e--;if(e<0)for(e=n;e<=i.length-1&&ye(i[e],o);)e++;return e===i.length&&(e=n),{index:this.wheelItemsAllDisabled?-1:e,y:-e*this.itemHeight}},t.prototype.checkWheelAllDisabled=function(){var t=this.options.wheelDisabledItemClass,e=this.items;this.wheelItemsAllDisabled=!0;for(var n=0;n<e.length;n++)if(!ye(e[n],t)){this.wheelItemsAllDisabled=!1;break}},t.pluginName="wheel",t}(),Ee="undefined"!=typeof window,Se=Ee&&navigator.userAgent.toLowerCase();if(Se&&/wechatdevtools/.test(Se),Se&&Se.indexOf("android"),function(){if("string"==typeof Se){var t=/os (\d\d?_\d(_\d)?)/.exec(Se);if(!t)return!1;var e=t[1].split("_").map((function(t){return parseInt(t,10)}));13===e[0]&&e[1]}}(),Ee)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){}}),window.addEventListener("test-passive",(function(){}),Te)}catch(t){}var ke=Ee&&document.createElement("div").style,Me=function(){if(!Ee)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var n=e[t];if(void 0!==ke[n.value])return n.key}return!1}();function Ce(t){return!1===Me?t:"standard"===Me?"transitionEnd"===t?"transitionend":t:Me+t.charAt(0).toUpperCase()+t.substr(1)}Me&&"standard"!==Me&&Me.toLowerCase(),Ce("transform"),Ce("transition"),Ee&&Ce("perspective"),Ce("transitionTimingFunction"),Ce("transitionDuration"),Ce("transitionDelay"),Ce("transformOrigin"),Ce("transitionEnd"),Ce("transitionProperty");var De={style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}},Pe=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}].map((function(t){return{key:t.key,sourceKey:"plugins.pullDownRefresh."+t.name}})),ze="pullingDown",Re="enterThreshold",Ae="leaveThreshold",_e=function(){function t(t){this.scroll=t,this.pulling=0,this.thresholdBoundary=0,this.init()}return t.prototype.setPulling=function(t){this.pulling=t},t.prototype.setThresholdBoundary=function(t){this.thresholdBoundary=t},t.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},t.prototype.handleBScroll=function(){this.scroll.registerType([ze,Re,Ae]),this.scroll.proxy(Pe)},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t,this.options=function(t,e){for(var n in e)t[n]=e[n];return t}({threshold:90,stop:40},t),this.scroll.options.probeType=3},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller,n=e.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=n.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.finishPullDown()})),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,(function(e){e.maxScrollPos>0&&(e.maxScrollPos=-1),e.minScrollPos=t.currentMinScrollY})),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,(function(t){t.discreteTime=300,t.easeTime=350})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(){e.hooks.trigger(e.hooks.eventTypes.end)})))},t.prototype.registerHooks=function(t,e,n){t.on(e,n,this),this.hooksFn.push([t,e,n])},t.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},t.prototype.watch=function(){var t=this.scroll.scroller;this.watching=!0,this.registerHooks(t.hooks,t.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},t.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},t.prototype.checkLocationOfThresholdBoundary=function(){if(1===this.pulling){var t=this.scroll,e=1!==this.thresholdBoundary&&this.locateInsideThresholdBoundary(),n=2!==this.thresholdBoundary&&!this.locateInsideThresholdBoundary();e&&(this.setThresholdBoundary(1),t.trigger(Re)),n&&(this.setThresholdBoundary(2),t.trigger(Ae))}},t.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},t.prototype.unwatch=function(){var t=this.scroll,e=t.scroller;this.watching=!1,e.hooks.off(e.hooks.eventTypes.end,this.checkPullDown),t.off(t.eventTypes.scrollStart,this.resetStateBeforeScrollStart),t.off(t.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&t.off(t.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},t.prototype.checkPullDown=function(){var t=this.options,e=t.threshold,n=t.stop;return!(this.scroll.y<e)&&(1===this.pulling&&(this.modifyBehaviorYBoundary(n),this.setPulling(2),this.scroll.trigger(ze)),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,De),this.isFetchingStatus())},t.prototype.isFetchingStatus=function(){return 2===this.pulling},t.prototype.modifyBehaviorYBoundary=function(t){var e=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=e.minScrollPos,this.currentMinScrollY=t,e.computeBoundary()},t.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var t=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,t.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,De)}},t.prototype.openPullDown=function(t){void 0===t&&(t={}),this.handleOptions(t),this.watching||this.watch()},t.prototype.closePullDown=function(){this.unwatch()},t.prototype.autoPullDownRefresh=function(){var t=this.options,e=t.threshold,n=t.stop;!this.isFetchingStatus()&&this.watching&&(this.modifyBehaviorYBoundary(n),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,e),this.setPulling(2),this.scroll.trigger(ze),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,De))},t.pluginName="pullDownRefresh",t}(),Ie="undefined"!=typeof window,Oe=Ie&&navigator.userAgent.toLowerCase();Oe&&/wechatdevtools/.test(Oe),Oe&&Oe.indexOf("android"),function(){if("string"==typeof Oe){var t=/os (\d\d?_\d(_\d)?)/.exec(Oe);if(!t)return!1;var e=t[1].split("_").map((function(t){return parseInt(t,10)}));13===e[0]&&e[1]}}();var Be=!1;if(Ie)try{var He={};Object.defineProperty(He,"passive",{get:function(){Be=!0}}),window.addEventListener("test-passive",(function(){}),He)}catch(t){}var Fe=Ie&&document.createElement("div").style,Le=function(){if(!Ie)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var n=e[t];if(void 0!==Fe[n.value])return n.key}return!1}();function Ve(t){return!1===Le?t:"standard"===Le?"transitionEnd"===t?"transitionend":t:Le+t.charAt(0).toUpperCase()+t.substr(1)}function We(t,e,n,i){var o=Be?{passive:!1,capture:!!i}:!!i;t.addEventListener(e,n,o)}function Ne(t,e,n,i){t.removeEventListener(e,n,{capture:!!i})}Le&&"standard"!==Le&&Le.toLowerCase(),Ve("transform"),Ve("transition"),Ie&&Ve("perspective"),Ve("transitionTimingFunction"),Ve("transitionDuration"),Ve("transitionDelay"),Ve("transformOrigin"),Ve("transitionEnd"),Ve("transitionProperty");var je=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(We)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(Ne)},t.prototype.handleDOMEvents=function(t){var e=this,n=this.wrapper;this.events.forEach((function(i){t(n,i.name,e,!!i.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(n){return n.name===e&&(n.handler(t),!0)}))},t}(),qe=function(){function t(t){this.scroll=t,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},t.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel;this.mouseWheelOpt=function(t,e){for(var n in e)t[n]=e[n];return t}({speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1},t)},t.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},t.prototype.registerEvent=function(){this.eventRegister=new je(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},t.prototype.registerHooks=function(t,e,n){t.on(e,n,this),this.hooksFn.push([t,e,n])},t.prototype.wheelHandler=function(t){if(this.scroll.enabled){this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0);var e=this.getWheelDelta(t);this.wheelMoveHandler(e),this.wheelEndDetector(e)}},t.prototype.wheelStartHandler=function(t){this.cleanCache();var e=this.scroll.scroller,n=e.scrollBehaviorX,i=e.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},t.prototype.cleanCache=function(){this.deltaCache=[]},t.prototype.wheelMoveHandler=function(t){var e=this,n=this.mouseWheelOpt,i=n.throttleTime,o=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(t);else{var r=this.deltaCache.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0});this.cleanCache();var s=this.scroll.scroller,a=s.scrollBehaviorX,l=s.scrollBehaviorY;a.setMovingDirection(-t.directionX),l.setMovingDirection(-t.directionY),a.setDirection(t.x),l.setDirection(t.y);var h=a.performDampingAlgorithm(Math.round(t.x)+r.x,o),c=l.performDampingAlgorithm(Math.round(t.y)+r.x,o);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:h,y:c})){var u=this.getEaseTime();h===this.scroll.x&&c===this.scroll.y||this.scroll.scrollTo(h,c,u)}i&&(this.wheelMoveTimer=window.setTimeout((function(){e.wheelMoveTimer=0}),i))}},t.prototype.wheelEndDetector=function(t){var e=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){e.wheelStart=!1,window.clearTimeout(e.wheelMoveTimer),e.wheelMoveTimer=0,e.scroll.trigger(e.scroll.eventTypes.mousewheelEnd,t)}),this.mouseWheelOpt.discreteTime)},t.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,n=e.speed,i=0,o=0,r=e.invert?-1:1;switch(!0){case"deltaX"in t:1===t.deltaMode?(i=-t.deltaX*n,o=-t.deltaY*n):(i=-t.deltaX,o=-t.deltaY);break;case"wheelDeltaX"in t:i=t.wheelDeltaX/120*n,o=t.wheelDeltaY/120*n;break;case"wheelDelta"in t:i=o=t.wheelDelta/120*n;break;case"detail"in t:i=o=-t.detail/3*n}return i*=r,o*=r,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(i)&&(i=o),o=0),this.scroll.hasHorizontalScroll||(i=0),{x:i,y:o,directionX:i>0?-1:i<0?1:0,directionY:o>0?-1:o<0?1:0}},t.prototype.beforeHandler=function(t){var e=this.scroll.options,n=e.preventDefault,i=e.stopPropagation,o=e.preventDefaultException;n&&!function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1}(t.target,o)&&function(t){t.cancelable&&t.preventDefault()}(t),i&&t.stopPropagation()},t.prototype.getEaseTime=function(){var t=this.mouseWheelOpt.easeTime;return t<100&&console.error("[BScroll warn]: easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,100)},t.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(t){var e=t[0],n=t[1],i=t[2];e.off(n,i)}))},t.pluginName="mouseWheel",t.applyOrder="pre",t}();se.use(we),se.use(_e),se.use(qe);var Ge=n(494);function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Xe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xe=function(){return!!t})()}function Ze(t){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ze(t)}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Je(t,e)}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ke(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,tn(i.key),i)}}function $e(t,e,n){return e&&Ke(t.prototype,e),n&&Ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tn(t){var e=function(t){if("object"!=Ye(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ye(e)?e:e+""}var en=function(){return $e((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qe(this,t),this.container="string"==typeof e?document.getElementById(e):e,this.container?(this.config=this.mergeConfig(n),this.renderer=null,this.scene=null,this.camera=null,this.mesh=null,this.lights={},this.animationId=null,this.isInitialized=!1,this.isDragging=!1,this.isGesturing=!1,this.previousMousePosition={x:0,y:0},this.rotationVelocity={x:0,y:0},this.autoRotationTime=0,this.gestureState={type:"none",startTime:0,lastUpdateTime:0,transitionCooldown:100,swipeVelocity:{x:0,y:0},twistAngle:null,twistVelocity:0,pinchDistance:null,pinchVelocity:0},this.initialWidth=null,this.initialHeight=null,this.textureCanvas=null,this.textureContext=null,this.texture=null,this.fogPlane=null,this.fogTexture=null,this.fogCanvas=null,this.fogContext=null,this.decals=[],this.decalMaterials=new Map,this.numberMeshes=[],this.numberGroup=null,this.font=null,this.isLoading=!1,this.animate=this.animate.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onGestureStart=this.onGestureStart.bind(this),this.onGestureChange=this.onGestureChange.bind(this),this.onGestureEnd=this.onGestureEnd.bind(this)):console.error("[3D Component Engine] Container not found")}),[{key:"mergeConfig",value:function(t){return Object.assign({mode:"standard",width:100,height:100,responsive:!1,geometry:"roundedBox",geometryParams:{width:1,height:1,depth:1,radius:.15,smoothness:32,sphereRadius:.5,widthSegments:32,heightSegments:32,torusRadius:.5,tubeRadius:.2,radialSegments:16,tubularSegments:100,cylinderRadiusTop:.5,cylinderRadiusBottom:.5,cylinderHeight:1,cylinderRadialSegments:32},enableSubdivision:!0,subdivisionIterations:1,subdivisionParams:{split:!0,uvSmooth:!0,preserveEdges:!1,flatOnly:!1,maxTriangles:1e4},material:"physical",materialParams:{color:4210752,metalness:0,roughness:0,clearcoat:1,clearcoatRoughness:0,reflectivity:1,envMapIntensity:1.2},texture:"animated",textureParams:{animationSpeed:.001,tunnelRadius:15,tunnelCount:6,solidColor:16777215},enableAnimation:!0,rotationSpeed:0,enableInteraction:!0,restrictRotationAxis:null,lighting:"default",backgroundColor:0,cameraPosition:{x:0,y:0,z:1.9},cameraFOV:50,textDepth:.02,addBlockingCylinder:!1},t)}},{key:"init",value:function(){var t=this;this.isInitialized?console.warn("[3D Component Engine] Already initialized"):(console.log("[3D Component Engine] Initializing with config:",this.config),this.setupRenderer(),this.setupCamera(),this.setupScene(),this.setupLighting(),"textgeometry"===this.config.mode?this.initTextGeometryMode():(this.createFogPlane(),this.createTexture(),this.createGeometry(),this.createMaterial(),this.createMesh()),this.config.enableInteraction&&this.setupInteraction(),this.isInitialized=!0,this.animate(0),this.config.responsive&&this.updateResponsiveSize(),setTimeout((function(){console.log("[3D Engine] FINAL DIMENSIONS after init:"),console.log("[3D Engine] Container: ".concat(t.container.offsetWidth,"x").concat(t.container.offsetHeight)),console.log("[3D Engine] Canvas: ".concat(t.renderer.domElement.offsetWidth,"x").concat(t.renderer.domElement.offsetHeight)),console.log("[3D Engine] Gap width: ".concat(t.container.offsetWidth-t.renderer.domElement.offsetWidth,"px")),console.log("[3D Engine] Gap height: ".concat(t.container.offsetHeight-t.renderer.domElement.offsetHeight,"px"))}),100),console.log("[3D Component Engine] Initialization complete"))}},{key:"setupRenderer",value:function(){console.log("[3D Engine] Using THREE version: ".concat("undefined"!=typeof THREE?THREE.REVISION:"undefined")),console.log("[3D Engine] THREE source: ".concat("undefined"!=typeof THREE?"global window.THREE":"unknown")),console.log("[3D Engine] Responsive: ".concat(this.config.responsive)),this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio);var t=this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width;if(console.log("[3D Engine] Setting up renderer - responsive: ".concat(this.config.responsive,", calculated size: ").concat(t)),this.renderer.setSize(t,t),console.log("[3D Engine] After setSize - Canvas style.width: ".concat(this.renderer.domElement.style.width)),console.log("[3D Engine] After setSize - Canvas style.height: ".concat(this.renderer.domElement.style.height)),this.container.appendChild(this.renderer.domElement),this.config.responsive||(this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%"),this.renderer.domElement.style.display="block",console.log("[3D Engine] Canvas actual size: ".concat(this.renderer.domElement.width,"x").concat(this.renderer.domElement.height)),console.log("[3D Engine] Canvas style.width raw: '".concat(this.renderer.domElement.style.width,"'")),console.log("[3D Engine] Canvas style.height raw: '".concat(this.renderer.domElement.style.height,"'")),console.log("[3D Engine] Canvas style size FINAL: ".concat(this.renderer.domElement.style.width,"x").concat(this.renderer.domElement.style.height)),console.log("[3D Engine] Device pixel ratio: ".concat(window.devicePixelRatio)),console.log("[3D Engine] Container offsetWidth BEFORE flex: ".concat(this.container.offsetWidth)),console.log("[3D Engine] Container offsetHeight BEFORE flex: ".concat(this.container.offsetHeight)),console.log("[3D Engine] Container clientWidth BEFORE flex: ".concat(this.container.clientWidth)),console.log("[3D Engine] Container clientHeight BEFORE flex: ".concat(this.container.clientHeight)),this.container.style.display="flex",this.container.style.justifyContent="center",this.container.style.alignItems="center",this.container.style.flex="0 1 auto",this.container.style.maxWidth="100%",this.config.responsive||(this.container.style.width="".concat(this.config.width,"px"),this.container.style.height="".concat(this.config.height,"px")),this.container.style.position="relative",this.container.style.overflow="hidden",this.container.style.margin="0 auto",this.container.style.border="1px solid red",console.log("[3D Engine] Container setup complete. Responsive: ".concat(this.config.responsive)),console.log("[3D Engine] Container offsetWidth: ".concat(this.container.offsetWidth)),console.log("[3D Engine] Container offsetHeight: ".concat(this.container.offsetHeight)),console.log("[3D Engine] Canvas offsetWidth: ".concat(this.renderer.domElement.offsetWidth)),console.log("[3D Engine] Canvas offsetHeight: ".concat(this.renderer.domElement.offsetHeight)),console.log("[3D Engine] Parent offsetWidth: ".concat(this.container.parentElement?this.container.parentElement.offsetWidth:"N/A")),"undefined"!=typeof window&&window.getComputedStyle){var e=window.getComputedStyle(this.container);console.log("[3D Engine] Container computed styles:"),console.log("[3D Engine]   - padding: ".concat(e.padding)),console.log("[3D Engine]   - margin: ".concat(e.margin)),console.log("[3D Engine]   - box-sizing: ".concat(e.boxSizing)),console.log("[3D Engine]   - min-width: ".concat(e.minWidth)),console.log("[3D Engine]   - min-height: ".concat(e.minHeight)),console.log("[3D Engine]   - width: ".concat(e.width)),console.log("[3D Engine]   - height: ".concat(e.height))}}},{key:"setupCamera",value:function(){this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width,this.camera=new THREE.PerspectiveCamera(this.config.cameraFOV,1,.1,100),this.camera.position.set(this.config.cameraPosition.x,this.config.cameraPosition.y,this.config.cameraPosition.z),this.camera.lookAt(0,0,0)}},{key:"setupScene",value:function(){this.scene=new THREE.Scene;var t=new THREE.PMREMGenerator(this.renderer);this.scene.environment=t.fromScene(this.createEnvironment()).texture}},{key:"setupLighting",value:function(){"none"!==this.config.lighting&&"default"===this.config.lighting&&(this.lights.main=new THREE.PointLight(16777215,2.5),this.lights.main.position.set(-1.5,1.7,2),this.scene.add(this.lights.main),this.lights.front=new THREE.DirectionalLight(16777215,.3),this.lights.front.position.set(.5,.5,3),this.lights.front.target.position.set(0,0,0),this.scene.add(this.lights.front),this.lights.leftFill=new THREE.DirectionalLight(16777215,.2),this.lights.leftFill.position.set(-3,0,1),this.lights.leftFill.target.position.set(0,0,0),this.scene.add(this.lights.leftFill),this.lights.rightFill=new THREE.DirectionalLight(16777215,.15),this.lights.rightFill.position.set(3,-.5,1),this.lights.rightFill.target.position.set(0,0,0),this.scene.add(this.lights.rightFill),this.lights.ambient=new THREE.AmbientLight(16777215,.15),this.scene.add(this.lights.ambient),this.lights.rim=new THREE.DirectionalLight(16777215,1.5),this.lights.rim.position.set(0,-2,-2),this.lights.rim.target.position.set(0,0,0),this.scene.add(this.lights.rim))}},{key:"createFogPlane",value:function(){var t=new THREE.Vector2;this.renderer.getSize(t);var e=this.camera.position.z- -1.5,n=this.config.cameraFOV*Math.PI/180,i=2*Math.tan(n/2)*e,o=t.x/t.y,r=i*o,s=1.05*r,a=1.05*i;console.log("[3D Engine] Creating fog plane based on renderer pixels"),console.log("[3D Engine] Renderer size: ".concat(t.x,"x").concat(t.y,"px")),console.log("[3D Engine] Aspect ratio: ".concat(o.toFixed(2))),console.log("[3D Engine] Camera FOV: ".concat(this.config.cameraFOV,"°")),console.log("[3D Engine] Camera position: z=".concat(this.camera.position.z)),console.log("[3D Engine] Distance from camera to fog plane: ".concat(e)),console.log("[3D Engine] Visible area at fog plane: ".concat(r.toFixed(2)," x ").concat(i.toFixed(2)," units")),console.log("[3D Engine] Fog plane size (with 5% padding): ".concat(s.toFixed(2)," x ").concat(a.toFixed(2)," units")),console.log("[3D Engine] Responsive mode: ".concat(this.config.responsive));var l=new THREE.PlaneGeometry(s,a,32,32);this.fogCanvas=document.createElement("canvas"),this.fogCanvas.width=512,this.fogCanvas.height=512,this.fogContext=this.fogCanvas.getContext("2d"),this.fogTexture=new THREE.CanvasTexture(this.fogCanvas);var h=new THREE.MeshBasicMaterial({map:this.fogTexture,transparent:!0,opacity:.8,side:THREE.DoubleSide,blending:THREE.AdditiveBlending});this.fogPlane=new THREE.Mesh(l,h),this.fogPlane.position.set(0,0,-1.5),this.scene.add(this.fogPlane);var c=new THREE.EdgesGeometry(l),u=new THREE.LineBasicMaterial({color:65280}),d=new THREE.LineSegments(c,u);this.fogPlane.add(d)}},{key:"createEnvironment",value:function(){var t=new THREE.Scene,e=new THREE.DirectionalLight(16777215,2);e.position.set(1,1,1),t.add(e);var n=new THREE.DirectionalLight(16777215,1);n.position.set(-1,1,-1),t.add(n);var i=new THREE.AmbientLight(16777215,1);return t.add(i),t}},{key:"createTexture",value:function(){if("none"!==this.config.texture)if("animated"===this.config.texture)console.log("[3D Component Engine] Creating animated texture for geometry:",this.config.geometry),"cylinder"===this.config.geometry?this.createCylinderTextures():"tube"===this.config.geometry?(console.log("[3D Component Engine] Calling createTubeTextures for tube geometry"),this.createTubeTextures()):"cone"===this.config.geometry?this.createConeTextures():(this.textureCanvas=document.createElement("canvas"),this.textureCanvas.width=512,this.textureCanvas.height=512,this.textureContext=this.textureCanvas.getContext("2d"),this.texture=new THREE.CanvasTexture(this.textureCanvas),console.log("[3D Component Engine] Using square texture for geometry:",this.config.geometry));else if("solid"===this.config.texture){var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");e.fillStyle="#".concat(this.config.textureParams.solidColor.toString(16).padStart(6,"0")),e.fillRect(0,0,1,1),this.texture=new THREE.CanvasTexture(t)}}},{key:"createCylinderTextures",value:function(){var t=this.config.geometryParams,e=512,n=(t.cylinderRadiusTop+t.cylinderRadiusBottom)/2,i=2*Math.PI*n/t.cylinderHeight,o=Math.round(e*i);this.sideCanvas=document.createElement("canvas"),this.sideCanvas.width=o,this.sideCanvas.height=512,this.sideContext=this.sideCanvas.getContext("2d"),this.sideTexture=new THREE.CanvasTexture(this.sideCanvas),this.capCanvas=document.createElement("canvas"),this.capCanvas.width=e,this.capCanvas.height=e,this.capContext=this.capCanvas.getContext("2d"),this.capTexture=new THREE.CanvasTexture(this.capCanvas),console.log("[3D Component Engine] Cylinder textures created:"),console.log("  Side texture: ".concat(o,"x").concat(512,"px (aspect ").concat(i.toFixed(2),":1)")),console.log("  Cap texture: ".concat(e,"x").concat(e,"px (square)")),this.textureCanvas=this.sideCanvas,this.textureContext=this.sideContext}},{key:"createTubeTextures",value:function(){var t=this.config.geometryParams,e=t.tubeRadius||.25,n=2*Math.PI*e/(t.tubeLength||2),i=Math.round(512*n);this.textureCanvas=document.createElement("canvas"),this.textureCanvas.width=i,this.textureCanvas.height=512,this.textureContext=this.textureCanvas.getContext("2d"),this.texture=new THREE.CanvasTexture(this.textureCanvas),console.log("[3D Component Engine] Tube texture created:"),console.log("  Side texture: ".concat(i,"x").concat(512,"px (aspect ").concat(n.toFixed(2),":1)")),console.log("  No caps - tube is open-ended")}},{key:"createConeTextures",value:function(){var t=this.config.geometryParams,e=512,n=t.coneRadius||.5,i=t.coneHeight||1,o=Math.sqrt(i*i+n*n),r=2*Math.PI*n/o,s=Math.round(e*r);this.sideCanvas=document.createElement("canvas"),this.sideCanvas.width=s,this.sideCanvas.height=512,this.sideContext=this.sideCanvas.getContext("2d"),this.sideTexture=new THREE.CanvasTexture(this.sideCanvas),this.baseCanvas=document.createElement("canvas"),this.baseCanvas.width=e,this.baseCanvas.height=e,this.baseContext=this.baseCanvas.getContext("2d"),this.baseTexture=new THREE.CanvasTexture(this.baseCanvas),console.log("[3D Component Engine] Cone textures created (sophisticated approach):"),console.log("  Side texture: ".concat(s,"x").concat(512,"px (aspect ").concat(r.toFixed(2),":1)")),console.log("  Base texture: ".concat(e,"x").concat(e,"px (square)")),console.log("  Cone dimensions: radius=".concat(n,", height=").concat(i,", slantHeight=").concat(o.toFixed(2))),this.textureCanvas=this.sideCanvas,this.textureContext=this.sideContext}},{key:"createTorusTextures",value:function(){console.log("[3D Component Engine] Torus texture generation - not yet implemented")}},{key:"createSphereTextures",value:function(){console.log("[3D Component Engine] Sphere texture generation - not yet implemented")}},{key:"createCustomMeshTextures",value:function(){console.log("[3D Component Engine] Custom mesh texture generation - not yet implemented")}},{key:"createParametricSurfaceTextures",value:function(){console.log("[3D Component Engine] Parametric surface texture generation - not yet implemented")}},{key:"createGeometry",value:function(){var t,e=this.config.geometryParams;switch(this.config.geometry){case"roundedBox":t=this.createRoundedBoxGeometry(e.width,e.height,e.depth,e.radius,e.smoothness);break;case"sphere":t=new THREE.SphereGeometry(e.sphereRadius,e.widthSegments,e.heightSegments);break;case"torus":t=new THREE.TorusGeometry(e.torusRadius,e.tubeRadius,e.radialSegments,e.tubularSegments);break;case"cylinder":t=new THREE.CylinderGeometry(e.cylinderRadiusTop,e.cylinderRadiusBottom,e.cylinderHeight,e.cylinderRadialSegments);break;case"cone":t=new THREE.ConeGeometry(e.coneRadius||.5,e.coneHeight||1,e.coneRadialSegments||32);break;case"tube":t=new THREE.CylinderGeometry(e.tubeRadius||.25,e.tubeRadius||.25,e.tubeLength||2,e.tubeRadialSegments||32,1,!0);break;default:console.warn("[3D Component Engine] Unknown geometry type: ".concat(this.config.geometry)),t=new THREE.BoxGeometry(1,1,1)}this.config.enableSubdivision&&"roundedBox"===this.config.geometry&&(console.log("[3D Component Engine] Applying subdivision..."),t=g.S.modify(t,this.config.subdivisionIterations,this.config.subdivisionParams),console.log("[3D Component Engine] Subdivision complete, vertices:",t.attributes.position.count)),this.geometry=t}},{key:"createRoundedBoxGeometry",value:function(t,e,n,i,o){var r=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;Qe(this,t);var h,c,u,d=Math.ceil(4*r/Math.min(n,i,o))+1;s=Math.max(d,s),a=Math.max(d,a),l=Math.max(d,l),h=this,u=[n,i,o,s,a,l],c=Ze(c=t),e=function(t,e){if(e&&("object"==Ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(h,Xe()?Reflect.construct(c,u||[],Ze(h).constructor):c.apply(h,u)),r=Math.min(r,Math.min(n,i,o)/2);for(var p=e.attributes.position,m=e.attributes.normal,g=function(t,e,s){var a=Math.abs(t),l=Math.abs(e),h=Math.abs(s),c=n/2,u=i/2,d=o/2,p=a>c-r,m=l>u-r,g=h>d-r;if(p&&m&&g){var f=(c-r)*Math.sign(t),y=(u-r)*Math.sign(e),v=(d-r)*Math.sign(s),b=t-f,x=e-y,w=s-v,E=Math.sqrt(b*b+x*x+w*w);if(E>0){var S=r/E;return{x:f+b*S,y:y+x*S,z:v+w*S,nx:b/E,ny:x/E,nz:w/E}}}else if(p&&m){var T=(c-r)*Math.sign(t),k=(u-r)*Math.sign(e),M=t-T,C=e-k,D=Math.sqrt(M*M+C*C);if(D>0){var P=r/D;return{x:T+M*P,y:k+C*P,z:s,nx:M/D,ny:C/D,nz:0}}}else if(p&&g){var z=(c-r)*Math.sign(t),R=(d-r)*Math.sign(s),A=t-z,_=s-R,I=Math.sqrt(A*A+_*_);if(I>0){var O=r/I;return{x:z+A*O,y:e,z:R+_*O,nx:A/I,ny:0,nz:_/I}}}else if(m&&g){var B=(u-r)*Math.sign(e),H=(d-r)*Math.sign(s),F=e-B,L=s-H,V=Math.sqrt(F*F+L*L);if(V>0){var W=r/V;return{x:t,y:B+F*W,z:H+L*W,nx:0,ny:F/V,nz:L/V}}}return{x:t,y:e,z:s,nx:0,ny:0,nz:0}},f=0;f<p.count;f++){var y=g(p.getX(f),p.getY(f),p.getZ(f));p.setXYZ(f,y.x,y.y,y.z),0===y.nx&&0===y.ny&&0===y.nz||m.setXYZ(f,y.nx,y.ny,y.nz)}return p.needsUpdate=!0,m.needsUpdate=!0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}(t,THREE.BoxGeometry),$e(t)}();return new r(t,e,n,i,o,o,o)}},{key:"createMaterial",value:function(){if("cylinder"===this.config.geometry&&"animated"===this.config.texture){var t,e,n=Object.assign({},this.config.materialParams),i=Object.assign({},n,{map:this.sideTexture,side:THREE.DoubleSide}),o=Object.assign({},n,{map:this.capTexture,side:THREE.DoubleSide});switch(this.config.material){case"physical":default:t=new THREE.MeshPhysicalMaterial(i),e=new THREE.MeshPhysicalMaterial(o);break;case"standard":t=new THREE.MeshStandardMaterial(i),e=new THREE.MeshStandardMaterial(o);break;case"basic":t=new THREE.MeshBasicMaterial(i),e=new THREE.MeshBasicMaterial(o)}this.material=[t,e,e],console.log("[3D Component Engine] Created multi-material array for cylinder")}else if("cone"===this.config.geometry&&"animated"===this.config.texture){var r,s,a=Object.assign({},this.config.materialParams),l=Object.assign({},a,{map:this.sideTexture,side:THREE.DoubleSide}),h=Object.assign({},a,{map:this.baseTexture,side:THREE.DoubleSide});switch(this.config.material){case"physical":default:r=new THREE.MeshPhysicalMaterial(l),s=new THREE.MeshPhysicalMaterial(h);break;case"standard":r=new THREE.MeshStandardMaterial(l),s=new THREE.MeshStandardMaterial(h);break;case"basic":r=new THREE.MeshBasicMaterial(l),s=new THREE.MeshBasicMaterial(h)}this.material=[r,s],console.log("[3D Component Engine] Created multi-material array for cone")}else if("tube"===this.config.geometry&&"animated"===this.config.texture){var c=Object.assign({},this.config.materialParams);switch(c.map=this.texture,c.side=THREE.DoubleSide,this.config.material){case"physical":default:this.material=new THREE.MeshPhysicalMaterial(c);break;case"standard":this.material=new THREE.MeshStandardMaterial(c);break;case"basic":this.material=new THREE.MeshBasicMaterial(c)}console.log("[3D Component Engine] Created single double-sided material for tube (no caps)")}else{var u=Object.assign({},this.config.materialParams);switch(u.side=THREE.DoubleSide,this.texture&&(u.map=this.texture),this.config.material){case"physical":default:this.material=new THREE.MeshPhysicalMaterial(u);break;case"standard":this.material=new THREE.MeshStandardMaterial(u);break;case"basic":this.material=new THREE.MeshBasicMaterial(u)}}}},{key:"createMesh",value:function(){this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.rotation.x=.349,this.mesh.rotation.y=-.55,this.scene.add(this.mesh),this.resizeContainerToFitContent()}},{key:"resizeContainerToFitContent",value:function(){if(this.config.responsive){var t=Math.max(50,Math.min(500,.15*window.innerWidth));return this.initialWidth=t,this.initialHeight=t,void console.log("[3D Engine] Responsive component - skipping resizeContainerToFitContent, using ".concat(t,"px"))}var e=new THREE.WebGLRenderer({antialias:!0,alpha:!0});e.setSize(1e3,1e3);var n=new THREE.PerspectiveCamera(this.config.cameraFOV,1,.1,100);n.position.copy(this.camera.position),n.lookAt(0,0,0),e.render(this.scene,n);var i=(new THREE.Box3).setFromObject(this.scene).getSize(new THREE.Vector3),o=n.position.z,r=n.fov*Math.PI/180,s=1e3/(2*Math.tan(r/2)*o),a=Math.ceil(i.x*s),l=Math.ceil(i.y*s);e.dispose(),this.config.width=a,this.config.height=l,this.initialWidth=a,this.initialHeight=l,this.renderer.setSize(a,l),this.camera.aspect=a/l,this.camera.updateProjectionMatrix(),this.updateFogPlaneSize()}},{key:"setupInteraction",value:function(){var t=this;this.renderer.domElement.style.cursor="grab",this.renderer.domElement.addEventListener("pointerdown",this.onPointerDown),this.renderer.domElement.addEventListener("pointermove",this.onPointerMove),this.renderer.domElement.addEventListener("pointerup",this.onPointerUp),this.renderer.domElement.addEventListener("pointerleave",this.onPointerUp),this.renderer.domElement.addEventListener("touchstart",this.onTouchStart.bind(this)),this.renderer.domElement.addEventListener("touchmove",this.onTouchMove.bind(this)),this.renderer.domElement.addEventListener("touchend",this.onTouchEnd.bind(this)),"GestureEvent"in window?(console.log("[3D Component Engine] GestureEvent is supported - adding listeners"),this.renderer.domElement.addEventListener("gesturestart",this.onGestureStart.bind(this)),this.renderer.domElement.addEventListener("gesturechange",this.onGestureChange.bind(this)),this.renderer.domElement.addEventListener("gestureend",this.onGestureEnd.bind(this))):console.log("[3D Component Engine] GestureEvent is NOT supported in this browser"),this.renderer.domElement.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),this.touches=[],this.lastPinchDistance=null,this.lastTouchAngle=null,this.baseScale=1,this.gestureRotation=0,this.gestureScale=1,this.raycaster=new THREE.Raycaster,this.grabbedPoint=null,this.grabbedLocalPoint=null,this.previousQuaternion=null,this.rotationHistory=[],this.maxHistoryLength=5,this.wheelGestureTimeout=null,this.config.responsive&&(this.resizeHandler=function(){return t.updateResponsiveSize()},window.addEventListener("resize",this.resizeHandler))}},{key:"detectGestureType",value:function(t,e,n,i){var o=Date.now();if(this.gestureState.lastUpdateTime,o-this.gestureState.startTime<this.gestureState.transitionCooldown)return this.gestureState.type;var r=0,s=0,a=!1,l=!1;return null!==this.gestureState.pinchDistance&&(a=(r=Math.abs(n-this.gestureState.pinchDistance))>.02*n),null!==this.gestureState.twistAngle&&((s=Math.abs(i-this.gestureState.twistAngle))>Math.PI&&(s=2*Math.PI-s),l=s>.02),a&&!l?"pinch":l&&!a?"twist":a&&l?r/n>s/Math.PI?"pinch":"twist":"swipe"}},{key:"transitionGesture",value:function(t){this.gestureState.type!==t&&(console.log("[3D Component] Gesture transition: ".concat(this.gestureState.type," -> ").concat(t)),this.gestureState.type=t,this.gestureState.startTime=Date.now(),"swipe"!==t&&(this.gestureState.swipeVelocity={x:0,y:0}),"twist"!==t&&(this.gestureState.twistVelocity=0),"pinch"!==t&&(this.gestureState.pinchVelocity=0))}},{key:"onPointerDown",value:function(t){var e=this.renderer.domElement.getBoundingClientRect();this.previousMousePosition={x:t.clientX-e.left,y:t.clientY-e.top};var n=new THREE.Vector2;if(n.x=this.previousMousePosition.x/e.width*2-1,n.y=-this.previousMousePosition.y/e.height*2+1,this.raycaster.setFromCamera(n,this.camera),0!==this.raycaster.intersectObject(this.fogPlane).length){this.isDragging=!0;var i=this.raycaster.intersectObject(this.mesh);if(i.length>0){this.grabbedPoint=i[0].point.clone();var o=this.grabbedPoint.clone();this.mesh.worldToLocal(o),this.grabbedLocalPoint=o}else{var r=new THREE.Vector3;this.mesh.getWorldPosition(r);var s=this.raycaster.ray,a=r.clone().sub(s.origin),l=s.origin.clone().add(s.direction.clone().multiplyScalar(a.dot(s.direction))).clone().sub(r).normalize(),h=this.mesh.geometry.boundingSphere.radius*this.mesh.scale.x;this.grabbedPoint=r.clone().add(l.clone().multiplyScalar(h));var c=this.grabbedPoint.clone();this.mesh.worldToLocal(c),this.grabbedLocalPoint=c}this.rotationVelocity={x:0,y:0},this.autoRotationTime=0,this.renderer.domElement.style.cursor="grabbing",this.previousQuaternion=this.mesh.quaternion.clone(),this.rotationHistory=[]}}},{key:"onPointerMove",value:function(t){if(this.isDragging&&this.grabbedLocalPoint){var e=this.renderer.domElement.getBoundingClientRect(),n={x:t.clientX-e.left,y:t.clientY-e.top};if("x"===this.config.restrictRotationAxis){var i=.01*(n.y-this.previousMousePosition.y);return this.mesh.rotateX(i),this.rotationVelocity.x=i,this.rotationVelocity.y=0,void(this.previousMousePosition=n)}var o=this.mesh.quaternion.clone(),r=new THREE.Vector2;r.x=n.x/e.width*2-1,r.y=-n.y/e.height*2+1,this.applyStickyRotation(r);var s=new THREE.Quaternion;s.multiplyQuaternions(this.mesh.quaternion,o.conjugate()),this.rotationHistory.push({quaternion:s,time:Date.now()}),this.rotationHistory.length>this.maxHistoryLength&&this.rotationHistory.shift(),this.calculateVelocityFromRotation(),this.previousMousePosition=n}}},{key:"applyStickyRotation",value:function(t){var e=this.grabbedLocalPoint.clone();this.mesh.localToWorld(e),this.raycaster.setFromCamera(t,this.camera);var n=this.raycaster.ray,i=new THREE.Vector3;this.mesh.getWorldPosition(i);var o=e.clone().sub(i),r=(this.camera.position.clone().sub(i),i.clone().sub(this.camera.position).normalize(),o.length()),s=i.clone().sub(n.origin),a=s.dot(n.direction),l=s.lengthSq()-a*a,h=r*r;if(l>h){var c=n.origin.clone().add(n.direction.clone().multiplyScalar(a)).clone().sub(i).normalize(),u=i.clone().add(c.multiplyScalar(r)),d=o.normalize(),p=u.clone().sub(i).normalize(),m=d.clone().cross(p),g=d.angleTo(p);if(m.length()>.001&&g>.001){m.normalize();var f=new THREE.Quaternion;f.setFromAxisAngle(m,g),this.mesh.quaternion.multiplyQuaternions(f,this.mesh.quaternion)}}else{var y=Math.sqrt(h-l),v=a-y,b=v>0?v:a+y;if(b>0){var x=n.origin.clone().add(n.direction.clone().multiplyScalar(b)),w=o.normalize(),E=x.clone().sub(i).normalize(),S=w.clone().cross(E),T=w.angleTo(E);if(S.length()>.001&&T>.001){S.normalize();var k=new THREE.Quaternion;k.setFromAxisAngle(S,T),this.mesh.quaternion.multiplyQuaternions(k,this.mesh.quaternion)}}}}},{key:"calculateVelocityFromRotation",value:function(){if(this.rotationHistory.length<2)this.rotationVelocity={x:0,y:0};else{var t=this.rotationHistory.slice(-3);if(!(t.length<2)){var e=(t[t.length-1].time-t[0].time)/1e3;if(e<=0)this.rotationVelocity={x:0,y:0};else{for(var n=new THREE.Quaternion,i=0;i<t.length;i++)n.multiply(t[i].quaternion);var o=new THREE.Vector3,r=0;if(n.w>.9999)this.rotationVelocity={x:0,y:0};else{r=2*Math.acos(n.w);var s=Math.sqrt(1-n.w*n.w);if(s<.001?o.set(n.x,n.y,n.z):o.set(n.x/s,n.y/s,n.z/s),r>Math.PI&&(r=2*Math.PI-r,o.multiplyScalar(-1)),Math.abs(r)>.01){var a=r/e;this.rotationVelocity.y=o.y*a*.5,this.rotationVelocity.x=o.x*a*.5;this.rotationVelocity.x=Math.max(-.02,Math.min(.02,this.rotationVelocity.x)),this.rotationVelocity.y=Math.max(-.02,Math.min(.02,this.rotationVelocity.y))}else this.rotationVelocity={x:0,y:0}}}}}}},{key:"onPointerUp",value:function(){this.isDragging=!1,this.renderer.domElement.style.cursor="grab",this.grabbedPoint=null,this.grabbedLocalPoint=null}},{key:"onTouchStart",value:function(t){if(t.preventDefault(),this.touches=Array.from(t.touches),1===this.touches.length)this.gestureState.type="drag";else if(2===this.touches.length){this.isGesturing=!0;var e=this.touches[0].clientX-this.touches[1].clientX,n=this.touches[0].clientY-this.touches[1].clientY;this.lastPinchDistance=Math.sqrt(e*e+n*n),this.lastTouchAngle=Math.atan2(n,e),this.gestureState.pinchDistance=this.lastPinchDistance,this.gestureState.twistAngle=this.lastTouchAngle,this.gestureState.lastUpdateTime=Date.now(),this.gestureState.type="none"}}},{key:"onTouchMove",value:function(t){if(t.preventDefault(),this.touches=Array.from(t.touches),2===this.touches.length){var e=this.touches[0].clientX-this.touches[1].clientX,n=this.touches[0].clientY-this.touches[1].clientY,i=Math.sqrt(e*e+n*n),o=Math.atan2(n,e),r=this.detectGestureType(e,n,i,o);if(this.transitionGesture(r),"twist"===this.gestureState.type&&null!==this.lastTouchAngle){var s=o-this.lastTouchAngle;if(s>Math.PI?s-=2*Math.PI:s<-Math.PI&&(s+=2*Math.PI),Math.abs(s)>.02){if("x"===this.config.restrictRotationAxis)this.mesh.rotateX(s);else{var a=new THREE.Vector3;this.camera.getWorldDirection(a);var l=new THREE.Quaternion;l.setFromAxisAngle(a,s),this.mesh.quaternion.multiplyQuaternions(l,this.mesh.quaternion)}this.autoRotationTime=0}}"none"!==this.gestureState.type&&(this.lastPinchDistance=i,this.lastTouchAngle=o,this.gestureState.pinchDistance=i,this.gestureState.twistAngle=o,this.gestureState.lastUpdateTime=Date.now())}}},{key:"onTouchEnd",value:function(t){this.touches=Array.from(t.touches),this.touches.length<2&&(this.lastPinchDistance=null,this.lastTouchAngle=null,this.isGesturing=!1,this.gestureState.type="none",this.gestureState.startTime=0,this.gestureState.pinchDistance=null,this.gestureState.twistAngle=null)}},{key:"onGestureStart",value:function(t){t.preventDefault(),this.isGesturing=!0,this.gestureRotation=t.rotation||0,this.gestureScale=t.scale||1,console.log("[3D Component Engine] Gesture start - rotation:",this.gestureRotation,"scale:",this.gestureScale)}},{key:"onGestureChange",value:function(t){if(t.preventDefault(),void 0!==t.rotation){var e=(t.rotation-this.gestureRotation)*Math.PI/180;if(console.log("[3D Component Engine] Gesture change - rotation:",t.rotation,"delta (radians):",e),Math.abs(e)>.01){if("x"===this.config.restrictRotationAxis)this.mesh.rotateX(e);else{var n=new THREE.Vector3;this.camera.getWorldDirection(n);var i=new THREE.Quaternion;i.setFromAxisAngle(n,e),this.mesh.quaternion.multiplyQuaternions(i,this.mesh.quaternion)}this.autoRotationTime=0,console.log("[3D Component Engine] Rotation applied!")}this.gestureRotation=t.rotation}}},{key:"onGestureEnd",value:function(t){t.preventDefault(),this.gestureRotation=0,this.gestureScale=1,this.isGesturing=!1}},{key:"isCursorInFogPlane",value:function(t){var e=this.renderer.domElement.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,o=new THREE.Vector2;return o.x=n/e.width*2-1,o.y=-i/e.height*2+1,this.raycaster.setFromCamera(o,this.camera),this.raycaster.intersectObject(this.fogPlane).length>0}},{key:"onWheel",value:function(t){var e=this;if(this.isCursorInFogPlane(t)){t.preventDefault(),this.isGesturing=!0;var n=Date.now();this.transitionGesture("swipe");var i=.01,o=new THREE.Quaternion;o.setFromAxisAngle(new THREE.Vector3(0,1,0),-t.deltaX*i);var r=new THREE.Vector3;this.camera.getWorldDirection(r);var s=new THREE.Vector3;s.crossVectors(this.camera.up,r).normalize();var a=new THREE.Quaternion;if(a.setFromAxisAngle(s,t.deltaY*i),"x"===this.config.restrictRotationAxis){var l=-t.deltaX*i-t.deltaY*i;this.mesh.rotateY(l)}else this.mesh.quaternion.multiplyQuaternions(o,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(a,this.mesh.quaternion);this.autoRotationTime=0,this.gestureState.lastUpdateTime=n,this.wheelGestureTimeout&&clearTimeout(this.wheelGestureTimeout),this.wheelGestureTimeout=setTimeout((function(){e.isGesturing=!1,e.gestureState.type="none",e.gestureState.startTime=0}),150)}}},{key:"updateAnimatedTexture",value:function(t){"cylinder"===this.config.geometry&&this.sideContext&&this.capContext?this.updateCylinderTextures(t):"cone"===this.config.geometry&&this.sideContext&&this.baseContext?this.updateConeTextures(t):this.textureContext&&this.updateSingleTexture(t,this.textureContext,this.textureCanvas,this.texture)}},{key:"updateCylinderTextures",value:function(t){this.config.textureParams,this.updateSingleTexture(t,this.sideContext,this.sideCanvas,this.sideTexture),this.updateSingleTexture(t,this.capContext,this.capCanvas,this.capTexture)}},{key:"updateConeTextures",value:function(t){this.updateSingleTexture(t,this.sideContext,this.sideCanvas,this.sideTexture),this.updateSingleTexture(t,this.baseContext,this.baseCanvas,this.baseTexture)}},{key:"updateSingleTexture",value:function(t,e,n,i){var o=this.config.textureParams,r=n.width,s=n.height;e.fillStyle="#0a0a0a",e.fillRect(0,0,r,s);var a,l,h=r/s,c=o.tunnelCount||6;h>1?(a=Math.round(c*h),l=c):h<1?(a=c,l=Math.round(c/h)):(a=c,l=c);for(var u=t*o.animationSpeed,d=0;d<a;d++)for(var p=0;p<l;p++){var m=(d+.5)*(r/a),g=(p+.5)*(s/l),f=o.tunnelRadius+10*Math.sin(u+.5*d+.5*p),y=e.createRadialGradient(m,g,0,m,g,f),v=(50*u+30*d+30*p)%360;y.addColorStop(0,"hsl(".concat(v,", 100%, 95%)")),y.addColorStop(.2,"hsl(".concat(v,", 90%, 85%)")),y.addColorStop(.4,"hsl(".concat(v,", 80%, 65%)")),y.addColorStop(.7,"hsl(".concat(v,", 70%, 45%)")),y.addColorStop(.9,"hsl(".concat(v,", 60%, 25%)")),y.addColorStop(1,"#0a0a0a"),e.beginPath(),e.arc(m,g,f,0,2*Math.PI),e.fillStyle=y,e.fill(),e.beginPath(),e.arc(m,g,f,0,2*Math.PI);var b=e.createRadialGradient(m,g,.8*f,m,g,f);b.addColorStop(0,"transparent"),b.addColorStop(.8,"transparent"),b.addColorStop(1,"hsla(".concat(v,", 80%, 60%, 0.6)")),e.strokeStyle=b,e.lineWidth=3,e.stroke()}i&&(i.needsUpdate=!0)}},{key:"updateFogTexture",value:function(t){if(this.fogContext&&this.fogTexture){var e=this.fogContext,n=e.canvas.width,i=e.canvas.height;e.clearRect(0,0,n,i);for(var o=n/2,r=i/2,s=.35*Math.min(n,i),a=0;a<5;a++){var l=.001*t+1.5*a,h=.3*l+a*(2*Math.PI/5),c=(.3*Math.sin(.5*l+2*a)+.7)*s,u=o+Math.cos(h)*c,d=r+Math.sin(h)*c,p=60*(.5*Math.sin(.5*l+2*a)+.5)+60,m=e.createRadialGradient(u,d,0,u,d,p);m.addColorStop(0,"rgba(100, 150, 255, 0.3)"),m.addColorStop(.5,"rgba(50, 100, 200, 0.1)"),m.addColorStop(1,"rgba(0, 50, 150, 0)"),e.fillStyle=m,e.fillRect(u-p,d-p,2*p,2*p)}this.fogTexture.needsUpdate=!0}}},{key:"animate",value:function(t){if(this.isInitialized){if(!this.viewportLogged){var e=this.renderer.getContext();console.log("[3D Engine] First frame render - Responsive: ".concat(this.config.responsive)),console.log("[3D Engine] WebGL viewport: ".concat(e.drawingBufferWidth," x ").concat(e.drawingBufferHeight)),console.log("[3D Engine] Renderer size: ".concat(this.renderer.getSize(new THREE.Vector2).x," x ").concat(this.renderer.getSize(new THREE.Vector2).y)),console.log("[3D Engine] Pixel ratio: ".concat(this.renderer.getPixelRatio())),this.viewportLogged=!0}if(this.animationId=requestAnimationFrame(this.animate),"animated"===this.config.texture&&this.updateAnimatedTexture(t),this.fogTexture&&this.updateFogTexture(t),!this.isDragging&&!this.isGesturing&&this.config.enableAnimation)if(Math.abs(this.rotationVelocity.x)>1e-4||Math.abs(this.rotationVelocity.y)>1e-4){var n=new THREE.Quaternion;n.setFromAxisAngle(new THREE.Vector3(0,1,0),this.rotationVelocity.y);var i=new THREE.Vector3;this.camera.getWorldDirection(i);var o=new THREE.Vector3;o.crossVectors(this.camera.up,i).normalize();var r=new THREE.Quaternion;r.setFromAxisAngle(o,this.rotationVelocity.x),this.mesh.quaternion.multiplyQuaternions(n,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(r,this.mesh.quaternion),this.rotationVelocity.x*=.995,this.rotationVelocity.y*=.995}else{this.autoRotationTime+=.01*this.config.rotationSpeed;var s=new THREE.Quaternion;s.setFromAxisAngle(new THREE.Vector3(0,1,0),.01*this.autoRotationTime*this.config.rotationSpeed);var a=new THREE.Quaternion;a.setFromAxisAngle(new THREE.Vector3(1,0,0),.002*Math.sin(.1*this.autoRotationTime)*this.config.rotationSpeed),this.mesh.quaternion.multiplyQuaternions(s,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(a,this.mesh.quaternion)}this.renderer.render(this.scene,this.camera)}}},{key:"setRotationSpeed",value:function(t){this.config.rotationSpeed=t,console.log("[3D Component Engine] Rotation speed set to:",t)}},{key:"updateResponsiveSize",value:function(){if(this.config.responsive){var t=Math.max(50,Math.min(500,.15*window.innerWidth));this.renderer.setSize(t,t),this.camera.aspect=1,this.camera.updateProjectionMatrix(),this.updateFogPlaneSize()}}},{key:"updateFogPlaneSize",value:function(){if(this.fogPlane){var t=new THREE.Vector2;this.renderer.getSize(t);var e=this.camera.position.z- -1.5,n=this.config.cameraFOV*Math.PI/180,i=2*Math.tan(n/2)*e,o=i*(t.x/t.y)*1.05,r=1.05*i,s=new THREE.PlaneGeometry(o,r,32,32);if(this.fogPlane.geometry.dispose(),this.fogPlane.geometry=s,this.fogPlane.children.length>0){var a=new THREE.EdgesGeometry(s),l=this.fogPlane.children[0];l.geometry.dispose(),l.geometry=a}console.log("[3D Engine] Updated fog plane size: ".concat(o.toFixed(2)," x ").concat(r.toFixed(2)," units"))}}},{key:"setLightPosition",value:function(t,e,n){this.lights[t]&&(this.lights[t].position[e]=n,console.log("[3D Component Engine] ".concat(t," light ").concat(e," set to:"),n))}},{key:"createTextTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("canvas"),i=n.getContext("2d"),o=Object.assign({},{fontSize:64,fontFamily:"Arial, sans-serif",color:"#ffffff",backgroundColor:"transparent",padding:10,bold:!1},e),r=o.bold?"bold ":"";i.font="".concat(r).concat(o.fontSize,"px ").concat(o.fontFamily);var s=i.measureText(String(t)).width+2*o.padding,a=o.fontSize+2*o.padding;n.width=Math.pow(2,Math.ceil(Math.log2(s))),n.height=Math.pow(2,Math.ceil(Math.log2(a))),"transparent"!==o.backgroundColor&&(i.fillStyle=o.backgroundColor,i.fillRect(0,0,n.width,n.height)),i.font="".concat(r).concat(o.fontSize,"px ").concat(o.fontFamily),i.fillStyle=o.color,i.textAlign="center",i.textBaseline="middle",i.fillText(String(t),n.width/2,n.height/2);var l=new THREE.CanvasTexture(n);return l.needsUpdate=!0,console.log('[3D Component Engine] Created text texture: "'.concat(t,'" (').concat(n.width,"x").concat(n.height,"px)")),l}},{key:"createCircularDecals",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.mesh){var i={radius:.52,textStyle:{fontSize:72,fontFamily:"Arial, sans-serif",color:"#ffffff",backgroundColor:"#000000",padding:15},decalSize:new THREE.Vector3(.2,.2,.1)},o=Object.assign({},i,n);o.decalSize instanceof THREE.Vector3||(o.decalSize&&"object"===Ye(o.decalSize)?o.decalSize=new THREE.Vector3(o.decalSize.x||.2,o.decalSize.y||.2,o.decalSize.z||.1):o.decalSize=new THREE.Vector3(.2,.2,.1)),this.clearDecals();var r=2*Math.PI/t.length;t.forEach((function(t,n){var i=n*r,s=new THREE.Vector3(Math.cos(i)*o.radius,0,Math.sin(i)*o.radius),a=new THREE.Euler(0,-i+Math.PI/2,Math.PI/2);e.createDecal({text:t,position:s,orientation:a,size:o.decalSize,textStyle:o.textStyle})&&console.log('[3D Component Engine] Created decal "'.concat(t,'" at angle ').concat((180*i/Math.PI).toFixed(1),"°"))})),console.log("[3D Component Engine] Created ".concat(t.length," circular decals"))}else console.error("[3D Component Engine] Cannot create decals - no mesh available")}},{key:"createDecal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.mesh)return console.error("[3D Component Engine] Cannot create decal - no mesh available"),null;var e={text:"0",position:new THREE.Vector3(0,0,.5),orientation:new THREE.Euler(0,0,0),size:new THREE.Vector3(.3,.3,.1),textStyle:{fontSize:64,fontFamily:"Arial, sans-serif",color:"#ffffff",backgroundColor:"transparent",padding:10}},n=Object.assign({},e,t);n.size instanceof THREE.Vector3||(n.size&&"object"===Ye(n.size)?n.size=new THREE.Vector3(n.size.x||.3,n.size.y||.3,n.size.z||.1):n.size=new THREE.Vector3(.3,.3,.1));var i=this.createTextTexture(n.text,n.textStyle),o=new THREE.MeshStandardMaterial({map:i,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4,side:THREE.FrontSide});this.decalMaterials.set(i,o);var r=new Ge.w(this.mesh,n.position,n.orientation,n.size),s=new THREE.Mesh(r,o);return s.renderOrder=1,this.mesh.add(s),this.decals.push(s),console.log('[3D Component Engine] Created decal: "'.concat(n.text,'" attached to mesh')),s}},{key:"clearDecals",value:function(){var t=this;this.decals.forEach((function(e){e.geometry&&e.geometry.dispose(),e.material&&(e.material.map&&e.material.map.dispose(),e.material.dispose()),t.mesh?t.mesh.remove(e):t.scene.remove(e)})),this.decals=[],this.decalMaterials.clear(),console.log("[3D Component Engine] Cleared all decals")}},{key:"updateDecal",value:function(t,e){if(t<0||t>=this.decals.length)console.error("[3D Component Engine] Invalid decal index: ".concat(t));else{var n=this.decals[t],i=n.material.map,o=this.createTextTexture(e,{fontSize:96,color:"#ffffff"});n.material.map=o,n.material.needsUpdate=!0,i&&i.dispose(),console.log("[3D Component Engine] Updated decal ".concat(t,' to "').concat(e,'"'))}}},{key:"dispose",value:function(){console.log("[3D Component Engine] Disposing..."),this.clearDecals(),this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&(this.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown),this.renderer.domElement.removeEventListener("pointermove",this.onPointerMove),this.renderer.domElement.removeEventListener("pointerup",this.onPointerUp),this.renderer.domElement.removeEventListener("pointerleave",this.onPointerUp),this.renderer.domElement.removeEventListener("touchstart",this.onTouchStart),this.renderer.domElement.removeEventListener("touchmove",this.onTouchMove),this.renderer.domElement.removeEventListener("touchend",this.onTouchEnd),"GestureEvent"in window&&(this.renderer.domElement.removeEventListener("gesturestart",this.onGestureStart),this.renderer.domElement.removeEventListener("gesturechange",this.onGestureChange),this.renderer.domElement.removeEventListener("gestureend",this.onGestureEnd)),this.renderer.domElement.removeEventListener("wheel",this.onWheel),this.config.responsive&&this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.renderer.dispose(),this.container.removeChild(this.renderer.domElement)),this.wheelGestureTimeout&&clearTimeout(this.wheelGestureTimeout),this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.texture&&this.texture.dispose(),this.isInitialized=!1}},{key:"initTextGeometryMode",value:function(){console.log("[3D Component Engine] Initializing TextGeometry mode"),this.mesh&&(this.scene.remove(this.mesh),this.mesh.geometry&&this.mesh.geometry.dispose(),this.mesh.material&&(Array.isArray(this.mesh.material)?this.mesh.material.forEach((function(t){return t.dispose()})):this.mesh.material.dispose()),this.mesh=null),this.numberGroup=new THREE.Group,this.scene.add(this.numberGroup),this.numberGroup.rotation.z=-Math.PI/2,this.mesh=this.numberGroup,this.loadFontAndCreateNumbers()}},{key:"loadFontAndCreateNumbers",value:function(){var t=this;if(window.THREE){if(!window.THREE.FontLoader)return console.warn("[3D Component Engine TextGeometry] FontLoader not available, using fallback boxes"),void this.createFallbackNumbers();var e=new THREE.FontLoader;this.isLoading=!0,e.load("https://cdn.jsdelivr.net/npm/three@0.128.0/examples/fonts/helvetiker_regular.typeface.json",(function(e){console.log("[3D Component Engine TextGeometry] Font loaded successfully"),t.font=e,t.createTextGeometryNumbers(),t.isLoading=!1}),(function(t){console.log("[3D Component Engine TextGeometry] Loading font...",t)}),(function(e){console.error("[3D Component Engine TextGeometry] Error loading font:",e),t.createFallbackNumbers(),t.isLoading=!1}))}else console.error("[3D Component Engine TextGeometry] Three.js not loaded")}},{key:"createTextGeometryNumbers",value:function(){if(this.font){this.clearNumbers();for(var t=2*Math.PI/10,e=0;e<10;e++){var n=getComputedStyle(document.documentElement),i=parseFloat(n.fontSize)*(parseFloat(n.getPropertyValue("--component-font-size"))||.9),o=i*(2.5/(this.container.clientHeight||300))*.4;console.log("[3D Component Engine TextGeometry] Computed:",i+"px","→",o+" units");var r=new THREE.TextGeometry(e.toString(),{font:this.font,size:o,height:void 0!==this.config.textDepth?this.config.textDepth:.02,curveSegments:12,bevelEnabled:!1});r.center(),r.rotateZ(Math.PI/2);for(var s=r.attributes.position,a=new THREE.Vector3,l=0;l<s.count;l++){a.x=s.getX(l),a.y=s.getY(l),a.z=s.getZ(l);var h=e*t+-5*a.x*(.8*t),c=.3+a.z;s.setX(l,Math.cos(h)*c),s.setZ(l,Math.sin(h)*c)}r.attributes.position.needsUpdate=!0,r.computeVertexNormals(),r.clearGroups();var u=r.index?r.index.count/3:r.attributes.position.count/3,d=Math.floor(.4*u);r.addGroup(0,3*d,0),r.addGroup(3*u-3*d,3*d,1),r.addGroup(3*d,3*(u-2*d),0);var p=[new THREE.MeshStandardMaterial({color:16777215,emissive:4473924,emissiveIntensity:.2,side:THREE.FrontSide}),new THREE.MeshStandardMaterial({transparent:!0,opacity:0})],m=new THREE.Mesh(r,p);this.numberGroup.add(m),this.numberMeshes.push(m),console.log("[3D Component Engine TextGeometry] Created curved TextGeometry for ".concat(e))}console.log("[3D Component Engine TextGeometry] All curved TextGeometry numbers created"),this.config.addBlockingCylinder&&this.createBlockingCylinder()}else console.error("[3D Component Engine TextGeometry] No font loaded")}},{key:"createBlockingCylinder",value:function(){var t,e=0,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ue(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}(this.numberMeshes);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i){var o=(new THREE.Box3).setFromObject(i),r=o.max.y-o.min.y;e=Math.max(e,r)}}}catch(t){n.e(t)}finally{n.f()}var s=1.05*e;console.log("[3D Component Engine TextGeometry] Auto-sized drum width:",s,"based on max text height:",e);var a=new THREE.CylinderGeometry(.28,.28,s,32,1,!0),l=new THREE.MeshPhysicalMaterial({color:0,metalness:0,roughness:0,clearcoat:1,clearcoatRoughness:0,reflectivity:1,envMapIntensity:1.2,side:THREE.DoubleSide}),h=new THREE.Mesh(a,l);this.numberGroup.add(h),console.log("[3D Component Engine TextGeometry] Added blocking cylinder")}},{key:"createFallbackNumbers",value:function(){console.log("[3D Component Engine TextGeometry] Creating fallback box placeholders"),this.clearNumbers();for(var t=2*Math.PI/10,e=0;e<10;e++){var n=new THREE.BoxGeometry(.1,.15,.02),i=new THREE.MeshStandardMaterial({color:16777215,emissive:4473924,emissiveIntensity:.2,side:THREE.FrontSide}),o=new THREE.Mesh(n,i),r=e*t;o.position.x=.3*Math.cos(r),o.position.z=.3*Math.sin(r),o.position.y=0,o.rotation.y=r+Math.PI/2,o.rotation.z=Math.PI/2,this.numberGroup.add(o),this.numberMeshes.push(o)}console.log("[3D Component Engine TextGeometry] Fallback boxes created")}},{key:"clearNumbers",value:function(){var t=this;this.numberMeshes&&(this.numberMeshes.forEach((function(e){e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((function(t){return t.dispose()})):e.material.dispose()),t.numberGroup&&t.numberGroup.remove(e)})),this.numberMeshes=[])}},{key:"getCurrentValue",value:function(){if(!this.numberGroup)return 0;var t=(this.numberGroup.rotation.x%(2*Math.PI)+2*Math.PI)%(2*Math.PI),e=2*Math.PI/10;return Math.round(t/e)%10}}])}();function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function on(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(on=function(){return!!t})()}function rn(t){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rn(t)}function sn(t,e){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sn(t,e)}var an=function(t){function e(t){var n,i,o,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,o=e,r=[t,Object.assign({mode:"textgeometry",texture:"none",enableInteraction:!0,rotationSpeed:0,backgroundColor:1710618},s)],o=rn(o),n=function(t,e){if(e&&("object"==nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(i,on()?Reflect.construct(o,r||[],rn(i).constructor):o.apply(i,r)),console.log("[TextGeometry Drum Engine] Initialized using parent engine TextGeometry mode"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sn(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(en);function ln(t){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}function hn(t,e){if(t){if("string"==typeof t)return cn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(t,e):void 0}}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function dn(t,e,n){return(e=mn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,mn(i.key),i)}}function mn(t){var e=function(t){if("object"!=ln(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ln(e)?e:e+""}var gn=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?un(Object(n),!0).forEach((function(e){dn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:e.id||"file-upload-".concat(Date.now()),text:e.text||"Drag & Drop To Upload or Select to Browse",acceptedFiles:e.acceptedFiles||"*",multiple:e.multiple||!1,maxSize:e.maxSize||10485760,maxFiles:e.maxFiles||10,showFileList:!1!==e.showFileList,icon:e.icon||"📁"},e),this.changeHandler=n,this.element=null,this.container=null,this.fileInput=null,this.fileListElement=null,this.selectedFiles=[],this.isDragging=!1,console.log("[file_upload_input_component_engine] Initialized with options:",this.options)},e=[{key:"render",value:function(t){var e="string"==typeof t?document.getElementById(t):t;return e?(this.container=document.createElement("div"),this.container.className="file-upload-container",this.container.style.cssText="\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin: 5px 0;\n      gap: 10px;\n    ",this.element=document.createElement("div"),this.element.className="file-upload-selector",this.element.id=this.options.id,this.applyStyles(),this.element.innerHTML='\n      <div class="border-container">\n        <div class="border-segment border-top"></div>\n        <div class="border-segment border-bottom"></div>\n      </div>\n      <div class="upload-background"></div>\n      <div class="upload-content">\n        <span class="upload-icon">'.concat(this.options.icon,"</span>\n        <h3>").concat(this.options.text,"</h3>\n      </div>\n    "),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.id="".concat(this.options.id,"-input"),this.fileInput.accept=this.options.acceptedFiles,this.fileInput.multiple=this.options.multiple,this.fileInput.style.display="none",this.options.showFileList&&(this.fileListElement=document.createElement("div"),this.fileListElement.className="file-upload-list",this.fileListElement.style.cssText="\n        display: none;\n        width: 100%;\n        max-width: 400px;\n        margin-top: 5px;\n      "),this.attachEventListeners(),this.container.appendChild(this.fileInput),this.container.appendChild(this.element),this.fileListElement&&this.container.appendChild(this.fileListElement),e.appendChild(this.container),console.log("[file_upload_input_component_engine] Rendered file upload:",this.options.id),this.element):(console.error("[file_upload_input_component_engine] Container not found:",t),null)}},{key:"applyStyles",value:function(){if(this.element.style.cssText="\n      display: inline-flex;\n      position: relative;\n      height: auto;\n      border-radius: 9999px;\n      background: linear-gradient(\n        -25deg,\n        var(--light-slider-start) 0%,\n        var(--light-slider-end) 100%\n      );\n      overflow: visible;\n      padding: 0;\n      cursor: pointer;\n      transition: all 0.3s ease;\n    ",!document.getElementById("file-upload-engine-styles")){var t=document.createElement("style");t.id="file-upload-engine-styles",t.textContent='\n        /* Dark theme support */\n        body[data-theme="dark"] .file-upload-selector {\n          background: linear-gradient(\n            -25deg,\n            var(--dark-slider-start) 0%,\n            var(--dark-slider-end) 100%\n          );\n        }\n        \n        /* Border container */\n        .file-upload-selector .border-container {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          pointer-events: none;\n          z-index: 1;\n          clip-path: inset(0 0 0 0 round 9999px);\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n        \n        /* Show borders on hover and drag */\n        .file-upload-selector:hover .border-container,\n        .file-upload-selector.dragging .border-container {\n          opacity: 1;\n        }\n        \n        /* Border segments */\n        .file-upload-selector .border-segment {\n          position: absolute;\n          background: linear-gradient(\n            to right,\n            var(--active-button-start),\n            var(--active-button-end)\n          );\n          height: 1px;\n          width: 100%;\n          transition: transform 0.3s ease;\n        }\n        \n        .file-upload-selector .border-top {\n          top: 0;\n        }\n        \n        .file-upload-selector .border-bottom {\n          bottom: 0;\n        }\n        \n        /* Upload background */\n        .file-upload-selector .upload-background {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          height: 100%;\n          width: 100%;\n          border-radius: 9999px;\n          background: linear-gradient(\n            145deg,\n            var(--active-button-start),\n            var(--active-button-end)\n          );\n          z-index: 0;\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n        \n        /* Show background when dragging */\n        .file-upload-selector.dragging .upload-background {\n          opacity: 0.5;\n        }\n        \n        /* Upload content */\n        .file-upload-selector .upload-content {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          position: relative;\n          z-index: 2;\n          padding: 4px 20px;\n          gap: 8px;\n        }\n        \n        .file-upload-selector .upload-content h3 {\n          white-space: nowrap;\n          overflow: visible;\n          text-overflow: clip;\n          max-width: none;\n          font-size: clamp(0.5rem, 1.2vw, 2.3rem);\n          margin: 0;\n          font-weight: bold;\n          color: #ffffff;\n          transition: color 0.3s ease;\n        }\n        \n        /* Icon styling */\n        .file-upload-selector .upload-icon {\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          font-size: inherit;\n          color: inherit;\n        }\n        \n        /* File list styling */\n        .file-upload-list {\n          background: rgba(0, 0, 0, 0.1);\n          border-radius: 10px;\n          padding: 10px;\n        }\n        \n        body[data-theme="dark"] .file-upload-list {\n          background: rgba(255, 255, 255, 0.1);\n        }\n        \n        .file-upload-list-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 5px 10px;\n          margin: 5px 0;\n          background: linear-gradient(\n            -25deg,\n            var(--light-slider-start) 0%,\n            var(--light-slider-end) 100%\n          );\n          border-radius: 9999px;\n          color: #ffffff;\n          font-size: clamp(0.4rem, 1vw, 2rem);\n        }\n        \n        body[data-theme="dark"] .file-upload-list-item {\n          background: linear-gradient(\n            -25deg,\n            var(--dark-slider-start) 0%,\n            var(--dark-slider-end) 100%\n          );\n        }\n        \n        .file-upload-list-item button {\n          background: none;\n          border: none;\n          color: #ffffff;\n          cursor: pointer;\n          padding: 0 5px;\n          font-size: inherit;\n          opacity: 0.8;\n          transition: opacity 0.2s;\n        }\n        \n        .file-upload-list-item button:hover {\n          opacity: 1;\n        }\n        \n        /* Drag state visual feedback */\n        .file-upload-selector.dragging {\n          transform: scale(1.05);\n        }\n      ',document.head.appendChild(t)}}},{key:"attachEventListeners",value:function(){var t=this;this.element.addEventListener("click",(function(e){e.preventDefault(),t.fileInput.click()})),this.fileInput.addEventListener("change",(function(e){t.handleFiles(e.target.files)})),this.element.addEventListener("dragover",(function(e){e.preventDefault(),e.stopPropagation(),t.isDragging||(t.isDragging=!0,t.element.classList.add("dragging"))})),this.element.addEventListener("dragleave",(function(e){e.preventDefault(),e.stopPropagation(),t.element.contains(e.relatedTarget)||(t.isDragging=!1,t.element.classList.remove("dragging"))})),this.element.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation(),t.isDragging=!1,t.element.classList.remove("dragging");var n=e.dataTransfer.files;t.handleFiles(n)})),this.element.addEventListener("selectstart",(function(t){t.preventDefault()}))}},{key:"handleFiles",value:function(t){var e,n=this,i=[],o=[],r=Array.from(t);!this.options.multiple&&r.length>1&&(o.push("Only one file allowed"),r.splice(1)),this.options.multiple&&r.length>this.options.maxFiles&&(o.push("Maximum ".concat(this.options.maxFiles," files allowed")),r.splice(this.options.maxFiles)),r.forEach((function(t){if(t.size>n.options.maxSize)o.push("".concat(t.name," exceeds maximum size of ").concat(n.formatFileSize(n.options.maxSize)));else{if("*"!==n.options.acceptedFiles){var e,r=n.options.acceptedFiles.split(",").map((function(t){return t.trim()})),s="."+t.name.split(".").pop().toLowerCase(),a=t.type,l=!1,h=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=hn(t))){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==e.return||e.return()}finally{if(s)throw o}}}}(r);try{for(h.s();!(e=h.n()).done;){var c=e.value;if(c.startsWith(".")&&s===c.toLowerCase()){l=!0;break}if(c.endsWith("/*")&&a.startsWith(c.slice(0,-2))){l=!0;break}if(a===c){l=!0;break}}}catch(t){h.e(t)}finally{h.f()}if(!l)return void o.push("".concat(t.name," is not an accepted file type"))}i.push(t)}})),this.options.multiple?this.selectedFiles=[].concat(function(t){if(Array.isArray(t))return cn(t)}(e=this.selectedFiles)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||hn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i):this.selectedFiles=i,this.updateFileList(),this.changeHandler&&this.changeHandler(this.selectedFiles,o),console.log("[file_upload_input_component_engine] Files selected:",this.selectedFiles),o.length>0&&console.warn("[file_upload_input_component_engine] File errors:",o)}},{key:"updateFileList",value:function(){var t=this;this.fileListElement&&(0!==this.selectedFiles.length?(this.fileListElement.style.display="block",this.fileListElement.innerHTML="",this.selectedFiles.forEach((function(e,n){var i=document.createElement("div");i.className="file-upload-list-item",i.innerHTML="\n        <span>".concat(e.name," (").concat(t.formatFileSize(e.size),')</span>\n        <button data-index="').concat(n,'">✕</button>\n      '),i.querySelector("button").addEventListener("click",(function(e){e.stopPropagation(),t.removeFile(n)})),t.fileListElement.appendChild(i)}))):this.fileListElement.style.display="none")}},{key:"removeFile",value:function(t){this.selectedFiles.splice(t,1),this.updateFileList(),this.fileInput.value="",this.changeHandler&&this.changeHandler(this.selectedFiles,[])}},{key:"formatFileSize",value:function(t){if(0===t)return"0 Bytes";var e=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB"][e]}},{key:"clearFiles",value:function(){this.selectedFiles=[],this.fileInput.value="",this.updateFileList()}},{key:"getFiles",value:function(){return this.selectedFiles}},{key:"setText",value:function(t){this.options.text=t;var e=this.element.querySelector(".upload-content h3");e&&(e.textContent=t)}},{key:"destroy",value:function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.element=null,this.container=null,this.fileInput=null,this.fileListElement=null,this.selectedFiles=[],console.log("[file_upload_input_component_engine] Destroyed:",this.options.id)}}],e&&pn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function fn(t){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(t)}function yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function bn(t,e,n){return(e=wn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wn(i.key),i)}}function wn(t){var e=function(t){if("object"!=fn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fn(e)?e:e+""}var En=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(n),!0).forEach((function(e){bn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:e.id||"wheel-time-".concat(Date.now()),value:e.value||"12:00",format:e.format||"24hr",minuteInterval:e.minuteInterval||1,storageKey:e.storageKey||null,disabled:e.disabled||!1},e),this.changeHandler=n,this.element=null,this.container=null,this.hourWheel=null,this.minuteWheel=null,this.periodWheel=null,this.hourIndex=0,this.minuteIndex=0,this.periodIndex=0,this.isScrolling=!1,this.parseTime(this.options.value),console.log("[wheel_time_selector_component_engine] Initialized with options:",this.options)},e=[{key:"parseTime",value:function(t){var e,n,i=(e=t.split(":").map((function(t){return parseInt(t,10)})),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,s,a=[],l=!0,h=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){h=!0,o=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(h)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return yn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],r=i[1];this.hourIndex=o||0;var s=r||0;this.minuteIndex=Math.round(s/this.options.minuteInterval)}},{key:"render",value:function(t){var e="string"==typeof t?document.getElementById(t):t;if(!e)return console.error("[wheel_time_selector_component_engine] Container not found:",t),null;this.container=document.createElement("div"),this.container.className="wheel-time-container",this.container.style.cssText="\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      margin: 5px 0;\n      gap: 10px;\n    ",this.element=document.createElement("div"),this.element.className="wheel-time-selector",this.element.id=this.options.id,this.applyStyles();var n=document.createElement("div");n.className="wheels-container",n.style.cssText="\n      display: flex;\n      align-items: center;\n      gap: 5px;\n      padding: 10px 20px;\n      position: relative;\n      z-index: 2;\n    ",this.hourWheel=this.createWheel("hour",this.generateHours()),n.appendChild(this.hourWheel);var i=document.createElement("div");if(i.className="time-separator",i.textContent=":",i.style.cssText="\n      color: #ffffff;\n      font-weight: bold;\n      font-size: clamp(0.6rem, 1.4vw, 2.6rem);\n      padding: 0 5px;\n    ",n.appendChild(i),this.minuteWheel=this.createWheel("minute",this.generateMinutes()),n.appendChild(this.minuteWheel),"12hr"===this.options.format){var o=document.createElement("div");o.style.cssText="width: 10px;",n.appendChild(o),this.periodWheel=this.createWheel("period",["AM","PM"]),n.appendChild(this.periodWheel)}if(this.element.innerHTML='\n      <div class="border-container">\n        <div class="border-segment border-top"></div>\n        <div class="border-segment border-bottom"></div>\n      </div>\n      <div class="wheel-background"></div>\n    ',this.element.appendChild(n),this.container.appendChild(this.element),e.appendChild(this.container),this.options.storageKey){var r=localStorage.getItem(this.options.storageKey);r&&this.setValue(r)}return this.updateWheelPositions(),console.log("[wheel_time_selector_component_engine] Rendered time selector:",this.options.id),this.element}},{key:"createWheel",value:function(t,e){var n=document.createElement("div");n.className="time-wheel wheel-".concat(t),n.style.cssText="\n      height: 150px;\n      width: ".concat("period"===t?"80px":"60px",";\n      overflow: hidden;\n      position: relative;\n      cursor: pointer;\n    ");var i=document.createElement("div");i.className="wheel-scroll-content",i.style.cssText="\n      padding: 60px 0;\n      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    ",e.forEach((function(t,e){var n=document.createElement("div");n.className="wheel-item",n.dataset.value=t,n.dataset.index=e,n.textContent=t,n.style.cssText="\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #ffffff;\n        font-size: clamp(0.5rem, 1.2vw, 2.3rem);\n        font-weight: bold;\n        opacity: 0.3;\n        transition: opacity 0.3s ease, transform 0.3s ease;\n        cursor: pointer;\n      ",i.appendChild(n)})),n.appendChild(i);var o=document.createElement("div");o.className="wheel-highlight",o.style.cssText="\n      position: absolute;\n      top: 50%;\n      left: 0;\n      right: 0;\n      height: 30px;\n      transform: translateY(-50%);\n      background: linear-gradient(\n        145deg,\n        var(--active-button-start),\n        var(--active-button-end)\n      );\n      opacity: 0.3;\n      border-radius: 15px;\n      pointer-events: none;\n      z-index: 1;\n    ",n.appendChild(o);var r=document.createElement("div");r.className="wheel-gradient-top",r.style.cssText="\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 60px;\n      background: linear-gradient(\n        to bottom,\n        rgba(0, 0, 0, 0.8),\n        transparent\n      );\n      pointer-events: none;\n      z-index: 2;\n    ",n.appendChild(r);var s=document.createElement("div");return s.className="wheel-gradient-bottom",s.style.cssText="\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 60px;\n      background: linear-gradient(\n        to top,\n        rgba(0, 0, 0, 0.8),\n        transparent\n      );\n      pointer-events: none;\n      z-index: 2;\n    ",n.appendChild(s),this.attachWheelListeners(n,t,e),n}},{key:"attachWheelListeners",value:function(t,e,n){var i=this,o=0,r=0,s=!1,a=0,l=0,h=Date.now(),c=null,u=t.querySelector(".wheel-scroll-content"),d=function(){return"hour"===e?i.hourIndex:"minute"===e?i.minuteIndex:"period"===e?i.periodIndex:0},p=function(t){var o=n.length-1;t=Math.max(0,Math.min(o,t)),"hour"===e?i.hourIndex=t:"minute"===e?i.minuteIndex=t:"period"===e&&(i.periodIndex=t),i.updateValue()},m=function(t){t.preventDefault(),s=!0,o=t.type.includes("mouse")?t.clientY:t.touches[0].clientY,r=o,l=o,h=Date.now(),a=0,c&&(cancelAnimationFrame(c),c=null),u.style.transition="none"},g=function(e){if(s){var n=e.type.includes("mouse")?e.clientY:e.touches[0].clientY,c=n-o;r=n;var p=Date.now(),m=p-h;m>0&&(a=(n-l)/m),l=n,h=p;var g=d(),f=30*-g+c;u.style.transform="translateY(".concat(f,"px)"),i.updateWheelItemOpacities(t,g-c/30)}},f=function(){if(s){s=!1;var n=r-o,l=d();if(Math.abs(a)>.5){var h=n+150*a,c=l+Math.round(-h/30);p(c),i.animateToIndex(t,e,c)}else{var u=l+Math.round(-n/30);p(u),i.animateToIndex(t,e,u)}}};t.addEventListener("mousedown",m),window.addEventListener("mousemove",g),window.addEventListener("mouseup",f),t.addEventListener("touchstart",m),window.addEventListener("touchmove",g),window.addEventListener("touchend",f),t.addEventListener("wheel",(function(n){n.preventDefault();var o=d()+(n.deltaY>0?1:-1);p(o),i.animateToIndex(t,e,o)})),t.addEventListener("click",(function(n){var o=n.target.closest(".wheel-item");if(o){var r=parseInt(o.dataset.index,10);p(r),i.animateToIndex(t,e,r)}}))}},{key:"animateToIndex",value:function(t,e,n){var i=t.querySelector(".wheel-scroll-content");i.style.transition="transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",i.style.transform="translateY(".concat(30*-n,"px)"),this.updateWheelItemOpacities(t,n)}},{key:"updateWheelItemOpacities",value:function(t,e){t.querySelectorAll(".wheel-item").forEach((function(t,n){var i=Math.abs(n-e),o=Math.max(.3,1-.3*i),r=Math.max(.8,1-.1*i);t.style.opacity=o,t.style.transform="scale(".concat(r,")")}))}},{key:"updateWheelPositions",value:function(){this.animateToIndex(this.hourWheel,"hour",this.hourIndex),this.animateToIndex(this.minuteWheel,"minute",this.minuteIndex),this.periodWheel&&this.animateToIndex(this.periodWheel,"period",this.periodIndex)}},{key:"generateHours",value:function(){for(var t=[],e="24hr"===this.options.format?24:12,n="24hr"===this.options.format?0:1,i=n;i<e+n;i++){var o=i%(e+("24hr"===this.options.format?0:1));t.push(o.toString().padStart(2,"0"))}return t}},{key:"generateMinutes",value:function(){for(var t=[],e=0;e<60;e+=this.options.minuteInterval)t.push(e.toString().padStart(2,"0"));return t}},{key:"updateValue",value:function(){var t=this.generateHours()[this.hourIndex],e=this.generateMinutes()[this.minuteIndex],n="".concat(t,":").concat(e);if("12hr"===this.options.format&&this.periodWheel){var i=["AM","PM"][this.periodIndex];n+=" ".concat(i)}this.options.value=n,this.options.storageKey&&localStorage.setItem(this.options.storageKey,n),this.changeHandler&&this.changeHandler(n,this.options.id),console.log("[wheel_time_selector_component_engine] Time updated:",n)}},{key:"applyStyles",value:function(){if(this.element.style.cssText="\n      display: inline-flex;\n      position: relative;\n      border-radius: 9999px;\n      background: linear-gradient(\n        -25deg,\n        var(--light-slider-start) 0%,\n        var(--light-slider-end) 100%\n      );\n      overflow: hidden;\n      cursor: pointer;\n      transition: all 0.3s ease;\n    ",!document.getElementById("wheel-time-engine-styles")){var t=document.createElement("style");t.id="wheel-time-engine-styles",t.textContent='\n        /* Dark theme support */\n        body[data-theme="dark"] .wheel-time-selector {\n          background: linear-gradient(\n            -25deg,\n            var(--dark-slider-start) 0%,\n            var(--dark-slider-end) 100%\n          );\n        }\n        \n        /* Border container */\n        .wheel-time-selector .border-container {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          pointer-events: none;\n          z-index: 3;\n          clip-path: inset(0 0 0 0 round 9999px);\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n        \n        /* Show borders on hover */\n        .wheel-time-selector:hover .border-container {\n          opacity: 1;\n        }\n        \n        /* Border segments */\n        .wheel-time-selector .border-segment {\n          position: absolute;\n          background: linear-gradient(\n            to right,\n            var(--active-button-start),\n            var(--active-button-end)\n          );\n          height: 1px;\n          width: 100%;\n        }\n        \n        .wheel-time-selector .border-top {\n          top: 0;\n        }\n        \n        .wheel-time-selector .border-bottom {\n          bottom: 0;\n        }\n        \n        /* Background */\n        .wheel-time-selector .wheel-background {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          border-radius: 9999px;\n          background: linear-gradient(\n            145deg,\n            var(--active-button-start),\n            var(--active-button-end)\n          );\n          opacity: 0;\n          transition: opacity 0.3s ease;\n          z-index: 0;\n        }\n        \n        /* Active state */\n        .wheel-time-selector.active .wheel-background {\n          opacity: 0.1;\n        }\n        \n        /* Disabled state */\n        .wheel-time-selector.disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n        \n        .wheel-time-selector.disabled .time-wheel {\n          pointer-events: none;\n        }\n        \n        /* Dark theme gradients */\n        body[data-theme="dark"] .wheel-gradient-top {\n          background: linear-gradient(\n            to bottom,\n            rgba(0, 0, 0, 0.9),\n            transparent\n          ) !important;\n        }\n        \n        body[data-theme="dark"] .wheel-gradient-bottom {\n          background: linear-gradient(\n            to top,\n            rgba(0, 0, 0, 0.9),\n            transparent\n          ) !important;\n        }\n      ',document.head.appendChild(t)}}},{key:"setValue",value:function(t){this.parseTime(t),this.updateWheelPositions(),this.updateValue()}},{key:"getValue",value:function(){return this.options.value}},{key:"enable",value:function(){this.options.disabled=!1,this.element.classList.remove("disabled")}},{key:"disable",value:function(){this.options.disabled=!0,this.element.classList.add("disabled")}},{key:"destroy",value:function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.element=null,this.container=null,this.hourWheel=null,this.minuteWheel=null,this.periodWheel=null,console.log("[wheel_time_selector_component_engine] Destroyed:",this.options.id)}}],e&&xn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Sn(t){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sn(t)}function Tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function kn(t,e,n){return(e=Cn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Cn(i.key),i)}}function Cn(t){var e=function(t){if("object"!=Sn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sn(e)?e:e+""}var Dn=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(n),!0).forEach((function(e){kn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:e.id||"wheel-date-".concat(Date.now()),value:e.value||(new Date).toISOString().split("T")[0],format:e.format||"dd-MMM-yyyy",minDate:e.minDate||null,maxDate:e.maxDate||null,yearRange:e.yearRange||100,storageKey:e.storageKey||null,disabled:e.disabled||!1},e),this.changeHandler=n,this.element=null,this.container=null,this.dayWheel=null,this.monthWheel=null,this.yearWheel=null,this.dayIndex=0,this.monthIndex=0,this.yearIndex=0,this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.monthNamesShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.parseDate(this.options.value),console.log("[wheel_date_picker_component_engine] Initialized with options:",this.options)},e=[{key:"parseDate",value:function(t){var e;e=t.match(/^\d{4}-\d{2}-\d{2}$/)?new Date(t+"T00:00:00"):new Date(t),isNaN(e.getTime())&&(e=new Date),this.dayIndex=e.getDate()-1,this.monthIndex=e.getMonth(),this.yearIndex=this.getYearIndex(e.getFullYear())}},{key:"getYearIndex",value:function(t){return t-((new Date).getFullYear()-this.options.yearRange)}},{key:"getYearFromIndex",value:function(t){return(new Date).getFullYear()-this.options.yearRange+t}},{key:"render",value:function(t){var e="string"==typeof t?document.getElementById(t):t;if(!e)return console.error("[wheel_date_picker_component_engine] Container not found:",t),null;this.container=document.createElement("div"),this.container.className="wheel-date-container",this.container.style.cssText="\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      margin: 5px 0;\n      gap: 10px;\n    ",this.element=document.createElement("div"),this.element.className="wheel-date-picker",this.element.id=this.options.id,this.applyStyles();var n=document.createElement("div");if(n.className="wheels-container",n.style.cssText="\n      display: flex;\n      align-items: center;\n      gap: 5px;\n      padding: 10px 20px;\n      position: relative;\n      z-index: 2;\n    ",this.createWheelsByFormat(n),this.element.innerHTML='\n      <div class="border-container">\n        <div class="border-segment border-top"></div>\n        <div class="border-segment border-bottom"></div>\n      </div>\n      <div class="wheel-background"></div>\n    ',this.element.appendChild(n),this.container.appendChild(this.element),e.appendChild(this.container),this.options.storageKey){var i=localStorage.getItem(this.options.storageKey);i&&this.setValue(i)}return this.updateWheelPositions(),console.log("[wheel_date_picker_component_engine] Rendered date picker:",this.options.id),this.element}},{key:"createWheelsByFormat",value:function(t){var e=document.createElement("div");e.className="date-separator",e.style.cssText="\n      color: #ffffff;\n      font-weight: bold;\n      font-size: clamp(0.6rem, 1.4vw, 2.6rem);\n      padding: 0 5px;\n    ";var n=e.cloneNode(!0);switch(this.options.format){case"dd-MMM-yyyy":e.textContent="-",n.textContent="-",this.dayWheel=this.createWheel("day",this.generateDays()),t.appendChild(this.dayWheel),t.appendChild(e),this.monthWheel=this.createWheel("month-short",this.monthNamesShort),t.appendChild(this.monthWheel),t.appendChild(n),this.yearWheel=this.createWheel("year",this.generateYears()),t.appendChild(this.yearWheel);break;case"dd-mm-yyyy":e.textContent="-",n.textContent="-",this.dayWheel=this.createWheel("day",this.generateDays()),t.appendChild(this.dayWheel),t.appendChild(e),this.monthWheel=this.createWheel("month-numeric",this.generateMonthNumbers()),t.appendChild(this.monthWheel),t.appendChild(n),this.yearWheel=this.createWheel("year",this.generateYears()),t.appendChild(this.yearWheel);break;case"yyyy-mm-dd":e.textContent="-",n.textContent="-",this.yearWheel=this.createWheel("year",this.generateYears()),t.appendChild(this.yearWheel),t.appendChild(e),this.monthWheel=this.createWheel("month-numeric",this.generateMonthNumbers()),t.appendChild(this.monthWheel),t.appendChild(n),this.dayWheel=this.createWheel("day",this.generateDays()),t.appendChild(this.dayWheel)}}},{key:"createWheel",value:function(t,e){var n=document.createElement("div");n.className="date-wheel wheel-".concat(t);var i="60px";"year"===t?i="80px":"month-short"===t&&(i="70px"),n.style.cssText="\n      height: 150px;\n      width: ".concat(i,";\n      overflow: hidden;\n      position: relative;\n      cursor: pointer;\n    ");var o=document.createElement("div");o.className="wheel-scroll-content",o.style.cssText="\n      padding: 60px 0;\n      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    ",e.forEach((function(t,e){var n=document.createElement("div");n.className="wheel-item",n.dataset.value=t,n.dataset.index=e,n.textContent=t,n.style.cssText="\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #ffffff;\n        font-size: clamp(0.5rem, 1.2vw, 2.3rem);\n        font-weight: bold;\n        opacity: 0.3;\n        transition: opacity 0.3s ease, transform 0.3s ease;\n        cursor: pointer;\n      ",o.appendChild(n)})),n.appendChild(o);var r=document.createElement("div");r.className="wheel-highlight",r.style.cssText="\n      position: absolute;\n      top: 50%;\n      left: 0;\n      right: 0;\n      height: 30px;\n      transform: translateY(-50%);\n      background: linear-gradient(\n        145deg,\n        var(--active-button-start),\n        var(--active-button-end)\n      );\n      opacity: 0.3;\n      border-radius: 15px;\n      pointer-events: none;\n      z-index: 1;\n    ",n.appendChild(r);var s=document.createElement("div");s.className="wheel-gradient-top",s.style.cssText="\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 60px;\n      background: linear-gradient(\n        to bottom,\n        rgba(0, 0, 0, 0.8),\n        transparent\n      );\n      pointer-events: none;\n      z-index: 2;\n    ",n.appendChild(s);var a=document.createElement("div");return a.className="wheel-gradient-bottom",a.style.cssText="\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 60px;\n      background: linear-gradient(\n        to top,\n        rgba(0, 0, 0, 0.8),\n        transparent\n      );\n      pointer-events: none;\n      z-index: 2;\n    ",n.appendChild(a),this.attachWheelListeners(n,t,e),n}},{key:"attachWheelListeners",value:function(t,e,n){var i=this,o=0,r=0,s=!1,a=0,l=0,h=Date.now(),c=t.querySelector(".wheel-scroll-content"),u=function(){return"day"===e?i.dayIndex:e.includes("month")?i.monthIndex:"year"===e?i.yearIndex:0},d=function(t){var o=n.length-1;t=Math.max(0,Math.min(o,t)),"day"===e?(i.dayIndex=t,i.updateDaysInMonth()):e.includes("month")?(i.monthIndex=t,i.updateDaysInMonth()):"year"===e&&(i.yearIndex=t,i.updateDaysInMonth()),i.updateValue()},p=function(t){t.preventDefault(),s=!0,o=t.type.includes("mouse")?t.clientY:t.touches[0].clientY,r=o,l=o,h=Date.now(),a=0,c.style.transition="none"},m=function(e){if(s){var n=e.type.includes("mouse")?e.clientY:e.touches[0].clientY,d=n-o;r=n;var p=Date.now(),m=p-h;m>0&&(a=(n-l)/m),l=n,h=p;var g=u(),f=30*-g+d;c.style.transform="translateY(".concat(f,"px)"),i.updateWheelItemOpacities(t,g-d/30)}},g=function(){if(s){s=!1;var n=r-o,l=u();if(Math.abs(a)>.5){var h=n+150*a,c=l+Math.round(-h/30);d(c),i.animateToIndex(t,e,c)}else{var p=l+Math.round(-n/30);d(p),i.animateToIndex(t,e,p)}}};t.addEventListener("mousedown",p),window.addEventListener("mousemove",m),window.addEventListener("mouseup",g),t.addEventListener("touchstart",p),window.addEventListener("touchmove",m),window.addEventListener("touchend",g),t.addEventListener("wheel",(function(n){n.preventDefault();var o=u()+(n.deltaY>0?1:-1);d(o),i.animateToIndex(t,e,o)})),t.addEventListener("click",(function(n){var o=n.target.closest(".wheel-item");if(o){var r=parseInt(o.dataset.index,10);d(r),i.animateToIndex(t,e,r)}}))}},{key:"updateDaysInMonth",value:function(){if(this.dayWheel){var t=this.getYearFromIndex(this.yearIndex),e=this.monthIndex,n=new Date(t,e+1,0).getDate();if(this.dayWheel.querySelectorAll(".wheel-item").length!==n){var i=this.dayWheel.querySelector(".wheel-scroll-content");i.innerHTML="";for(var o=[],r=1;r<=n;r++)o.push(r.toString().padStart(2,"0"));o.forEach((function(t,e){var n=document.createElement("div");n.className="wheel-item",n.dataset.value=t,n.dataset.index=e,n.textContent=t,n.style.cssText="\n          height: 30px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #ffffff;\n          font-size: clamp(0.5rem, 1.2vw, 2.3rem);\n          font-weight: bold;\n          opacity: 0.3;\n          transition: opacity 0.3s ease, transform 0.3s ease;\n          cursor: pointer;\n        ",i.appendChild(n)})),this.dayIndex>=n&&(this.dayIndex=n-1),this.animateToIndex(this.dayWheel,"day",this.dayIndex)}}}},{key:"animateToIndex",value:function(t,e,n){var i=t.querySelector(".wheel-scroll-content");i.style.transition="transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",i.style.transform="translateY(".concat(30*-n,"px)"),this.updateWheelItemOpacities(t,n)}},{key:"updateWheelItemOpacities",value:function(t,e){t.querySelectorAll(".wheel-item").forEach((function(t,n){var i=Math.abs(n-e),o=Math.max(.3,1-.3*i),r=Math.max(.8,1-.1*i);t.style.opacity=o,t.style.transform="scale(".concat(r,")")}))}},{key:"updateWheelPositions",value:function(){this.animateToIndex(this.dayWheel,"day",this.dayIndex),this.animateToIndex(this.monthWheel,"month",this.monthIndex),this.animateToIndex(this.yearWheel,"year",this.yearIndex)}},{key:"generateDays",value:function(){for(var t=[],e=1;e<=31;e++)t.push(e.toString().padStart(2,"0"));return t}},{key:"generateMonthNumbers",value:function(){for(var t=[],e=1;e<=12;e++)t.push(e.toString().padStart(2,"0"));return t}},{key:"generateYears",value:function(){for(var t=[],e=(new Date).getFullYear(),n=e-this.options.yearRange,i=e+this.options.yearRange,o=n;o<=i;o++)t.push(o.toString());return t}},{key:"updateValue",value:function(){var t,e=(this.dayIndex+1).toString().padStart(2,"0"),n=this.getYearFromIndex(this.yearIndex);switch(this.options.format){case"dd-MMM-yyyy":var i=this.monthNamesShort[this.monthIndex];t="".concat(e,"-").concat(i,"-").concat(n);break;case"dd-mm-yyyy":var o=(this.monthIndex+1).toString().padStart(2,"0");t="".concat(e,"-").concat(o,"-").concat(n);break;case"yyyy-mm-dd":var r=(this.monthIndex+1).toString().padStart(2,"0");t="".concat(n,"-").concat(r,"-").concat(e)}if(this.options.value=t,this.options.storageKey&&localStorage.setItem(this.options.storageKey,t),this.changeHandler){var s=new Date(n,this.monthIndex,this.dayIndex+1);this.changeHandler(t,s,this.options.id)}console.log("[wheel_date_picker_component_engine] Date updated:",t)}},{key:"applyStyles",value:function(){if(this.element.style.cssText="\n      display: inline-flex;\n      position: relative;\n      border-radius: 9999px;\n      background: linear-gradient(\n        -25deg,\n        var(--light-slider-start) 0%,\n        var(--light-slider-end) 100%\n      );\n      overflow: hidden;\n      cursor: pointer;\n      transition: all 0.3s ease;\n    ",!document.getElementById("wheel-date-engine-styles")){var t=document.createElement("style");t.id="wheel-date-engine-styles",t.textContent='\n        /* Dark theme support */\n        body[data-theme="dark"] .wheel-date-picker {\n          background: linear-gradient(\n            -25deg,\n            var(--dark-slider-start) 0%,\n            var(--dark-slider-end) 100%\n          );\n        }\n        \n        /* Border container */\n        .wheel-date-picker .border-container {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          pointer-events: none;\n          z-index: 3;\n          clip-path: inset(0 0 0 0 round 9999px);\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n        \n        /* Show borders on hover */\n        .wheel-date-picker:hover .border-container {\n          opacity: 1;\n        }\n        \n        /* Border segments */\n        .wheel-date-picker .border-segment {\n          position: absolute;\n          background: linear-gradient(\n            to right,\n            var(--active-button-start),\n            var(--active-button-end)\n          );\n          height: 1px;\n          width: 100%;\n        }\n        \n        .wheel-date-picker .border-top {\n          top: 0;\n        }\n        \n        .wheel-date-picker .border-bottom {\n          bottom: 0;\n        }\n        \n        /* Background */\n        .wheel-date-picker .wheel-background {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          border-radius: 9999px;\n          background: linear-gradient(\n            145deg,\n            var(--active-button-start),\n            var(--active-button-end)\n          );\n          opacity: 0;\n          transition: opacity 0.3s ease;\n          z-index: 0;\n        }\n        \n        /* Active state */\n        .wheel-date-picker.active .wheel-background {\n          opacity: 0.1;\n        }\n        \n        /* Disabled state */\n        .wheel-date-picker.disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n        \n        .wheel-date-picker.disabled .date-wheel {\n          pointer-events: none;\n        }\n        \n        /* Dark theme gradients */\n        body[data-theme="dark"] .wheel-gradient-top {\n          background: linear-gradient(\n            to bottom,\n            rgba(0, 0, 0, 0.9),\n            transparent\n          ) !important;\n        }\n        \n        body[data-theme="dark"] .wheel-gradient-bottom {\n          background: linear-gradient(\n            to top,\n            rgba(0, 0, 0, 0.9),\n            transparent\n          ) !important;\n        }\n      ',document.head.appendChild(t)}}},{key:"setValue",value:function(t){this.parseDate(t),this.updateWheelPositions(),this.updateValue()}},{key:"getValue",value:function(){return this.options.value}},{key:"getDate",value:function(){var t=this.getYearFromIndex(this.yearIndex);return new Date(t,this.monthIndex,this.dayIndex+1)}},{key:"enable",value:function(){this.options.disabled=!1,this.element.classList.remove("disabled")}},{key:"disable",value:function(){this.options.disabled=!0,this.element.classList.add("disabled")}},{key:"destroy",value:function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.element=null,this.container=null,this.dayWheel=null,this.monthWheel=null,this.yearWheel=null,console.log("[wheel_date_picker_component_engine] Destroyed:",this.options.id)}}],e&&Mn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(t)}function zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Rn(t,e,n){return(e=_n(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function An(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_n(i.key),i)}}function _n(t){var e=function(t){if("object"!=Pn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pn(e)?e:e+""}var In=function(){return t=function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.componentId=n,this.config=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(n),!0).forEach((function(e){Rn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({label:i.label||"Date",defaultDate:i.defaultDate||new Date,minDate:i.minDate||null,maxDate:i.maxDate||null,firstDayOfWeek:i.firstDayOfWeek||1,onChange:i.onChange||function(){},onExpand:i.onExpand||function(){},expandable:!1!==i.expandable,monthsToShow:1},i),this.currentDate=new Date(this.config.defaultDate),this.selectedDate=new Date(this.config.defaultDate),this.viewDate=new Date(this.config.defaultDate),this.expanded=!1,this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.dayNames=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.init()},e=[{key:"init",value:function(){this.container.innerHTML="",this.render(),this.attachEventListeners()}},{key:"render",value:function(){var t='\n            <div class="calendar-picker-component" id="'.concat(this.componentId,'">\n                <div class="calendar-header">\n                    <button class="nav-button prev-month" aria-label="Previous month">\n                        <svg width="8" height="12" viewBox="0 0 8 12" fill="none">\n                            <path d="M7 1L2 6L7 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n                        </svg>\n                    </button>\n                    <div class="month-year-display">\n                        ').concat(this.monthNames[this.viewDate.getMonth()]," ").concat(this.viewDate.getFullYear(),'\n                    </div>\n                    <button class="nav-button next-month" aria-label="Next month">\n                        <svg width="8" height="12" viewBox="0 0 8 12" fill="none">\n                            <path d="M1 1L6 6L1 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n                        </svg>\n                    </button>\n                    ').concat(this.config.expandable?'\n                        <button class="expand-button" aria-label="Toggle calendar expansion">\n                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n                                <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n                            </svg>\n                        </button>\n                    ':"",'\n                </div>\n                <div class="calendar-container">\n                    ').concat(this.renderMonths(),"\n                </div>\n            </div>\n        ");this.container.innerHTML=t,this.addStyles()}},{key:"renderMonths",value:function(){for(var t=this.expanded?3:1,e="",n=0;n<t;n++){var i=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+n,1);e+=this.renderMonth(i)}return e}},{key:"renderMonth",value:function(t){var e=t.getFullYear(),n=t.getMonth(),i=new Date(e,n,1),o=new Date(e,n+1,0).getDate(),r=i.getDay()-this.config.firstDayOfWeek;r<0&&(r+=7);for(var s=new Date(e,n,0).getDate(),a=r,l='\n            <div class="calendar-month" data-month="'.concat(n,'" data-year="').concat(e,'">\n                ').concat(this.expanded?'<div class="month-label">'.concat(this.monthNames[n]," ").concat(e,"</div>"):"",'\n                <div class="calendar-grid">\n                    <div class="weekday-headers">\n                        ').concat(this.dayNames.map((function(t){return'<div class="weekday">'.concat(t,"</div>")})).join(""),'\n                    </div>\n                    <div class="days-grid">\n        '),h=a;h>0;h--){var c=new Date(e,n-1,s-h+1);l+=this.renderDay(c,"other-month")}for(var u=1;u<=o;u++){var d=new Date(e,n,u);l+=this.renderDay(d,"current-month")}for(var p=a+o,m=p%7==0?0:7-p%7,g=1;g<=m;g++){var f=new Date(e,n+1,g);l+=this.renderDay(f,"other-month")}return l+"\n                    </div>\n                </div>\n            </div>\n        "}},{key:"renderDay",value:function(t,e){var n=this.isSameDay(t,this.selectedDate),i=this.isSameDay(t,new Date),o=this.isDateDisabled(t),r=["calendar-day",e,n?"selected":"",i?"today":"",o?"disabled":""].filter(Boolean).join(" ");return'\n            <button class="'.concat(r,'" \n                    data-date="').concat(t.toISOString(),'"\n                    ').concat(o?"disabled":"",'\n                    aria-label="').concat(t.toLocaleDateString(),'">\n                ').concat(t.getDate(),"\n            </button>\n        ")}},{key:"isSameDay",value:function(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}},{key:"isDateDisabled",value:function(t){return!!(this.config.minDate&&t<this.config.minDate)||!!(this.config.maxDate&&t>this.config.maxDate)}},{key:"attachEventListeners",value:function(){var t=this,e=this.container.querySelector(".calendar-picker-component"),n=e.querySelector(".prev-month"),i=e.querySelector(".next-month");null==n||n.addEventListener("click",(function(){return t.navigateMonth(-1)})),null==i||i.addEventListener("click",(function(){return t.navigateMonth(1)}));var o=e.querySelector(".expand-button");null==o||o.addEventListener("click",(function(){return t.toggleExpanded()})),e.addEventListener("click",(function(e){var n=e.target.closest(".calendar-day:not(.disabled)");if(n){var i=new Date(n.dataset.date);t.selectDate(i)}}));var r=0;e.addEventListener("touchstart",(function(t){r=t.touches[0].clientX})),e.addEventListener("touchend",(function(e){var n=e.changedTouches[0].clientX,i=r-n;Math.abs(i)>50&&(i>0?t.navigateMonth(1):t.navigateMonth(-1))}))}},{key:"navigateMonth",value:function(t){this.viewDate.setMonth(this.viewDate.getMonth()+t),this.render(),this.attachEventListeners()}},{key:"toggleExpanded",value:function(){this.expanded=!this.expanded,this.config.onExpand(this.expanded),this.render(),this.attachEventListeners();var t=this.container.querySelector(".calendar-container");t.style.height="auto";var e=t.offsetHeight;t.style.height="0",t.offsetHeight,t.style.transition="height 0.3s ease",t.style.height=e+"px",setTimeout((function(){t.style.height="auto",t.style.transition=""}),300)}},{key:"selectDate",value:function(t){this.selectedDate=t,this.currentDate=t,this.container.querySelectorAll(".calendar-day").forEach((function(t){return t.classList.remove("selected")}));var e=this.container.querySelector('[data-date="'.concat(t.toISOString(),'"]'));null==e||e.classList.add("selected"),this.config.onChange(t)}},{key:"getValue",value:function(){return this.selectedDate}},{key:"setValue",value:function(t){this.selectedDate=new Date(t),this.currentDate=new Date(t),this.viewDate=new Date(t),this.render(),this.attachEventListeners()}},{key:"addStyles",value:function(){if(!document.getElementById("calendar-picker-styles")){var t=document.createElement("style");t.id="calendar-picker-styles",t.textContent="\n            .calendar-picker-component {\n                background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);\n                border-radius: 24px;\n                padding: 16px;\n                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n                user-select: none;\n                color: #ffffff;\n                min-width: 320px;\n            }\n            \n            .calendar-header {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                margin-bottom: 16px;\n                padding: 0 8px;\n            }\n            \n            .nav-button, .expand-button {\n                background: rgba(255, 255, 255, 0.1);\n                border: none;\n                border-radius: 8px;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                color: #ffffff;\n            }\n            \n            .nav-button:hover, .expand-button:hover {\n                background: rgba(255, 255, 255, 0.2);\n                transform: scale(1.05);\n            }\n            \n            .month-year-display {\n                font-size: 18px;\n                font-weight: 600;\n                color: #ffffff;\n                text-align: center;\n                flex: 1;\n            }\n            \n            .calendar-container {\n                overflow: hidden;\n            }\n            \n            .calendar-month {\n                margin-bottom: 24px;\n            }\n            \n            .calendar-month:last-child {\n                margin-bottom: 0;\n            }\n            \n            .month-label {\n                text-align: center;\n                font-size: 16px;\n                font-weight: 500;\n                margin-bottom: 12px;\n                color: rgba(255, 255, 255, 0.8);\n            }\n            \n            .calendar-grid {\n                background: rgba(0, 0, 0, 0.2);\n                border-radius: 16px;\n                padding: 12px;\n            }\n            \n            .weekday-headers {\n                display: grid;\n                grid-template-columns: repeat(7, 1fr);\n                gap: 4px;\n                margin-bottom: 8px;\n            }\n            \n            .weekday {\n                text-align: center;\n                font-size: 12px;\n                font-weight: 600;\n                color: rgba(255, 255, 255, 0.6);\n                padding: 4px;\n            }\n            \n            .days-grid {\n                display: grid;\n                grid-template-columns: repeat(7, 1fr);\n                gap: 4px;\n            }\n            \n            .calendar-day {\n                aspect-ratio: 1;\n                border: none;\n                border-radius: 8px;\n                background: transparent;\n                color: #ffffff;\n                font-size: 14px;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                position: relative;\n            }\n            \n            .calendar-day:hover:not(.disabled) {\n                background: rgba(255, 255, 255, 0.1);\n                transform: scale(1.05);\n            }\n            \n            .calendar-day.other-month {\n                color: rgba(255, 255, 255, 0.3);\n            }\n            \n            .calendar-day.today {\n                background: rgba(59, 130, 246, 0.2);\n                color: #60a5fa;\n                font-weight: 600;\n            }\n            \n            .calendar-day.selected {\n                background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n                color: #ffffff;\n                font-weight: 600;\n                box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);\n            }\n            \n            .calendar-day.disabled {\n                color: rgba(255, 255, 255, 0.2);\n                cursor: not-allowed;\n            }\n            \n            .calendar-day.disabled:hover {\n                background: transparent;\n                transform: none;\n            }\n            \n            /* Expanded state animation */\n            .calendar-picker-component.expanded .expand-button svg {\n                transform: rotate(180deg);\n            }\n            \n            .expand-button svg {\n                transition: transform 0.3s ease;\n            }\n            \n            /* Responsive adjustments */\n            @media (max-width: 480px) {\n                .calendar-picker-component {\n                    min-width: 280px;\n                    padding: 12px;\n                }\n                \n                .calendar-day {\n                    font-size: 13px;\n                }\n                \n                .month-year-display {\n                    font-size: 16px;\n                }\n            }\n        ",document.head.appendChild(t)}}}],e&&An(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function On(t){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(t)}function Bn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bn=function(){return!!t})()}function Hn(t){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hn(t)}function Fn(t,e){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fn(t,e)}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Nn(i.key),i)}}function Wn(t,e,n){return e&&Vn(t.prototype,e),n&&Vn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nn(t){var e=function(t){if("object"!=On(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=On(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==On(e)?e:e+""}var jn=function(){return Wn((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ln(this,t),this.container="string"==typeof e?document.getElementById(e):e,this.container?(this.config=this.mergeConfig(n),this.renderer=null,this.scene=null,this.camera=null,this.mesh=null,this.lights={},this.animationId=null,this.isInitialized=!1,this.isDragging=!1,this.isGesturing=!1,this.previousMousePosition={x:0,y:0},this.rotationVelocity={x:0,y:0},this.autoRotationTime=0,this.gestureState={type:"none",startTime:0,lastUpdateTime:0,transitionCooldown:100,swipeVelocity:{x:0,y:0},twistAngle:null,twistVelocity:0,pinchDistance:null,pinchVelocity:0},this.initialWidth=null,this.initialHeight=null,this.textureCanvas=null,this.textureContext=null,this.texture=null,this.fogPlane=null,this.fogTexture=null,this.fogCanvas=null,this.fogContext=null,this.animate=this.animate.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onGestureStart=this.onGestureStart.bind(this),this.onGestureChange=this.onGestureChange.bind(this),this.onGestureEnd=this.onGestureEnd.bind(this)):console.error("[Drum Selector Engine] Container not found")}),[{key:"mergeConfig",value:function(t){return Object.assign({width:100,height:100,responsive:!1,geometry:"roundedBox",geometryParams:{width:1,height:1,depth:1,radius:.15,smoothness:32,sphereRadius:.5,widthSegments:32,heightSegments:32,torusRadius:.5,tubeRadius:.2,radialSegments:16,tubularSegments:100,cylinderRadiusTop:.5,cylinderRadiusBottom:.5,cylinderHeight:1,cylinderRadialSegments:32},enableSubdivision:!0,subdivisionIterations:1,subdivisionParams:{split:!0,uvSmooth:!0,preserveEdges:!1,flatOnly:!1,maxTriangles:1e4},material:"physical",materialParams:{color:4210752,metalness:0,roughness:0,clearcoat:1,clearcoatRoughness:0,reflectivity:1,envMapIntensity:1.2},texture:"animated",textureParams:{animationSpeed:.001,tunnelRadius:15,tunnelCount:6,solidColor:16777215},enableAnimation:!0,rotationSpeed:0,enableInteraction:!0,rotationMode:"drum",lighting:"default",backgroundColor:0,cameraPosition:{x:0,y:0,z:1.9},cameraFOV:50},t)}},{key:"init",value:function(){var t=this;this.isInitialized?console.warn("[Drum Selector Engine] Already initialized"):(console.log("[Drum Selector Engine] Initializing with config:",this.config),this.setupRenderer(),this.setupCamera(),this.setupScene(),this.setupLighting(),this.createFogPlane(),this.createTexture(),this.createGeometry(),this.createMaterial(),this.createMesh(),this.config.enableInteraction&&this.setupInteraction(),this.isInitialized=!0,this.animate(0),this.config.responsive&&this.updateResponsiveSize(),setTimeout((function(){console.log("[3D Engine] FINAL DIMENSIONS after init:"),console.log("[3D Engine] Container: ".concat(t.container.offsetWidth,"x").concat(t.container.offsetHeight)),console.log("[3D Engine] Canvas: ".concat(t.renderer.domElement.offsetWidth,"x").concat(t.renderer.domElement.offsetHeight)),console.log("[3D Engine] Gap width: ".concat(t.container.offsetWidth-t.renderer.domElement.offsetWidth,"px")),console.log("[3D Engine] Gap height: ".concat(t.container.offsetHeight-t.renderer.domElement.offsetHeight,"px"))}),100),console.log("[Drum Selector Engine] Initialization complete"))}},{key:"setupRenderer",value:function(){console.log("[3D Engine] Using THREE version: ".concat("undefined"!=typeof THREE?THREE.REVISION:"undefined")),console.log("[3D Engine] THREE source: ".concat("undefined"!=typeof THREE?"global window.THREE":"unknown")),console.log("[3D Engine] Responsive: ".concat(this.config.responsive)),this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio);var t=this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width;if(console.log("[3D Engine] Setting up renderer - responsive: ".concat(this.config.responsive,", calculated size: ").concat(t)),this.renderer.setSize(t,t),console.log("[3D Engine] After setSize - Canvas style.width: ".concat(this.renderer.domElement.style.width)),console.log("[3D Engine] After setSize - Canvas style.height: ".concat(this.renderer.domElement.style.height)),this.container.appendChild(this.renderer.domElement),this.config.responsive||(this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%"),this.renderer.domElement.style.display="block",console.log("[3D Engine] Canvas actual size: ".concat(this.renderer.domElement.width,"x").concat(this.renderer.domElement.height)),console.log("[3D Engine] Canvas style.width raw: '".concat(this.renderer.domElement.style.width,"'")),console.log("[3D Engine] Canvas style.height raw: '".concat(this.renderer.domElement.style.height,"'")),console.log("[3D Engine] Canvas style size FINAL: ".concat(this.renderer.domElement.style.width,"x").concat(this.renderer.domElement.style.height)),console.log("[3D Engine] Device pixel ratio: ".concat(window.devicePixelRatio)),console.log("[3D Engine] Container offsetWidth BEFORE flex: ".concat(this.container.offsetWidth)),console.log("[3D Engine] Container offsetHeight BEFORE flex: ".concat(this.container.offsetHeight)),console.log("[3D Engine] Container clientWidth BEFORE flex: ".concat(this.container.clientWidth)),console.log("[3D Engine] Container clientHeight BEFORE flex: ".concat(this.container.clientHeight)),this.container.style.display="flex",this.container.style.justifyContent="center",this.container.style.alignItems="center",this.container.style.flex="0 1 auto",this.container.style.maxWidth="100%",this.config.responsive||(this.container.style.width="".concat(this.config.width,"px"),this.container.style.height="".concat(this.config.height,"px")),this.container.style.position="relative",this.container.style.overflow="hidden",this.container.style.margin="0 auto",this.container.style.border="1px solid red",console.log("[3D Engine] Container setup complete. Responsive: ".concat(this.config.responsive)),console.log("[3D Engine] Container offsetWidth: ".concat(this.container.offsetWidth)),console.log("[3D Engine] Container offsetHeight: ".concat(this.container.offsetHeight)),console.log("[3D Engine] Canvas offsetWidth: ".concat(this.renderer.domElement.offsetWidth)),console.log("[3D Engine] Canvas offsetHeight: ".concat(this.renderer.domElement.offsetHeight)),console.log("[3D Engine] Parent offsetWidth: ".concat(this.container.parentElement?this.container.parentElement.offsetWidth:"N/A")),"undefined"!=typeof window&&window.getComputedStyle){var e=window.getComputedStyle(this.container);console.log("[3D Engine] Container computed styles:"),console.log("[3D Engine]   - padding: ".concat(e.padding)),console.log("[3D Engine]   - margin: ".concat(e.margin)),console.log("[3D Engine]   - box-sizing: ".concat(e.boxSizing)),console.log("[3D Engine]   - min-width: ".concat(e.minWidth)),console.log("[3D Engine]   - min-height: ".concat(e.minHeight)),console.log("[3D Engine]   - width: ".concat(e.width)),console.log("[3D Engine]   - height: ".concat(e.height))}}},{key:"setupCamera",value:function(){this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width,this.camera=new THREE.PerspectiveCamera(this.config.cameraFOV,1,.1,100),this.camera.position.set(this.config.cameraPosition.x,this.config.cameraPosition.y,this.config.cameraPosition.z),this.camera.lookAt(0,0,0)}},{key:"setupScene",value:function(){this.scene=new THREE.Scene;var t=new THREE.PMREMGenerator(this.renderer);this.scene.environment=t.fromScene(this.createEnvironment()).texture}},{key:"setupLighting",value:function(){"none"!==this.config.lighting&&"default"===this.config.lighting&&(this.lights.main=new THREE.PointLight(16777215,2.5),this.lights.main.position.set(-1.5,1.7,2),this.scene.add(this.lights.main),this.lights.front=new THREE.DirectionalLight(16777215,.3),this.lights.front.position.set(.5,.5,3),this.lights.front.target.position.set(0,0,0),this.scene.add(this.lights.front),this.lights.leftFill=new THREE.DirectionalLight(16777215,.2),this.lights.leftFill.position.set(-3,0,1),this.lights.leftFill.target.position.set(0,0,0),this.scene.add(this.lights.leftFill),this.lights.rightFill=new THREE.DirectionalLight(16777215,.15),this.lights.rightFill.position.set(3,-.5,1),this.lights.rightFill.target.position.set(0,0,0),this.scene.add(this.lights.rightFill),this.lights.ambient=new THREE.AmbientLight(16777215,.15),this.scene.add(this.lights.ambient),this.lights.back=new THREE.PointLight(16777215,9),this.lights.back.position.set(0,0,-2),this.scene.add(this.lights.back),this.lights.rim=new THREE.DirectionalLight(16777215,1.5),this.lights.rim.position.set(0,-2,-2),this.lights.rim.target.position.set(0,0,0),this.scene.add(this.lights.rim))}},{key:"createFogPlane",value:function(){var t=new THREE.Vector2;this.renderer.getSize(t);var e=this.camera.position.z- -1.5,n=this.config.cameraFOV*Math.PI/180,i=2*Math.tan(n/2)*e,o=t.x/t.y,r=i*o,s=1.05*r,a=1.05*i;console.log("[3D Engine] Creating fog plane based on renderer pixels"),console.log("[3D Engine] Renderer size: ".concat(t.x,"x").concat(t.y,"px")),console.log("[3D Engine] Aspect ratio: ".concat(o.toFixed(2))),console.log("[3D Engine] Camera FOV: ".concat(this.config.cameraFOV,"°")),console.log("[3D Engine] Camera position: z=".concat(this.camera.position.z)),console.log("[3D Engine] Distance from camera to fog plane: ".concat(e)),console.log("[3D Engine] Visible area at fog plane: ".concat(r.toFixed(2)," x ").concat(i.toFixed(2)," units")),console.log("[3D Engine] Fog plane size (with 5% padding): ".concat(s.toFixed(2)," x ").concat(a.toFixed(2)," units")),console.log("[3D Engine] Responsive mode: ".concat(this.config.responsive));var l=new THREE.PlaneGeometry(s,a,32,32);this.fogCanvas=document.createElement("canvas"),this.fogCanvas.width=512,this.fogCanvas.height=512,this.fogContext=this.fogCanvas.getContext("2d"),this.fogTexture=new THREE.CanvasTexture(this.fogCanvas);var h=new THREE.MeshBasicMaterial({map:this.fogTexture,transparent:!0,opacity:.8,side:THREE.DoubleSide,blending:THREE.AdditiveBlending});this.fogPlane=new THREE.Mesh(l,h),this.fogPlane.position.set(0,0,-1.5),this.scene.add(this.fogPlane);var c=new THREE.EdgesGeometry(l),u=new THREE.LineBasicMaterial({color:65280}),d=new THREE.LineSegments(c,u);this.fogPlane.add(d)}},{key:"createEnvironment",value:function(){var t=new THREE.Scene,e=new THREE.DirectionalLight(16777215,2);e.position.set(1,1,1),t.add(e);var n=new THREE.DirectionalLight(16777215,1);n.position.set(-1,1,-1),t.add(n);var i=new THREE.AmbientLight(16777215,1);return t.add(i),t}},{key:"createTexture",value:function(){if("none"!==this.config.texture)if("animated"===this.config.texture)"cylinder"===this.config.geometry?this.createCylinderTextures():(this.textureCanvas=document.createElement("canvas"),this.textureCanvas.width=512,this.textureCanvas.height=512,this.textureContext=this.textureCanvas.getContext("2d"),this.texture=new THREE.CanvasTexture(this.textureCanvas),console.log("[Drum Selector Engine] Using square texture for geometry:",this.config.geometry));else if("solid"===this.config.texture){var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");e.fillStyle="#".concat(this.config.textureParams.solidColor.toString(16).padStart(6,"0")),e.fillRect(0,0,1,1),this.texture=new THREE.CanvasTexture(t)}}},{key:"createCylinderTextures",value:function(){var t=this.config.geometryParams,e=512,n=(t.cylinderRadiusTop+t.cylinderRadiusBottom)/2,i=2*Math.PI*n/t.cylinderHeight,o=Math.round(e*i);this.sideCanvas=document.createElement("canvas"),this.sideCanvas.width=o,this.sideCanvas.height=512,this.sideContext=this.sideCanvas.getContext("2d"),this.sideTexture=new THREE.CanvasTexture(this.sideCanvas),this.capCanvas=document.createElement("canvas"),this.capCanvas.width=e,this.capCanvas.height=e,this.capContext=this.capCanvas.getContext("2d"),this.capTexture=new THREE.CanvasTexture(this.capCanvas),console.log("[Drum Selector Engine] Cylinder textures created:"),console.log("  Side texture: ".concat(o,"x").concat(512,"px (aspect ").concat(i.toFixed(2),":1)")),console.log("  Cap texture: ".concat(e,"x").concat(e,"px (square)")),this.textureCanvas=this.sideCanvas,this.textureContext=this.sideContext}},{key:"createGeometry",value:function(){var t,e=this.config.geometryParams;switch(this.config.geometry){case"roundedBox":t=this.createRoundedBoxGeometry(e.width,e.height,e.depth,e.radius,e.smoothness);break;case"sphere":t=new THREE.SphereGeometry(e.sphereRadius,e.widthSegments,e.heightSegments);break;case"torus":t=new THREE.TorusGeometry(e.torusRadius,e.tubeRadius,e.radialSegments,e.tubularSegments);break;case"cylinder":t=new THREE.CylinderGeometry(e.cylinderRadiusTop,e.cylinderRadiusBottom,e.cylinderHeight,e.cylinderRadialSegments);break;default:console.warn("[Drum Selector Engine] Unknown geometry type: ".concat(this.config.geometry)),t=new THREE.BoxGeometry(1,1,1)}this.config.enableSubdivision&&"roundedBox"===this.config.geometry&&(console.log("[Drum Selector Engine] Applying subdivision..."),t=g.S.modify(t,this.config.subdivisionIterations,this.config.subdivisionParams),console.log("[Drum Selector Engine] Subdivision complete, vertices:",t.attributes.position.count)),this.geometry=t}},{key:"createRoundedBoxGeometry",value:function(t,e,n,i,o){var r=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;Ln(this,t);var h,c,u,d=Math.ceil(4*r/Math.min(n,i,o))+1;s=Math.max(d,s),a=Math.max(d,a),l=Math.max(d,l),h=this,u=[n,i,o,s,a,l],c=Hn(c=t),e=function(t,e){if(e&&("object"==On(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(h,Bn()?Reflect.construct(c,u||[],Hn(h).constructor):c.apply(h,u)),r=Math.min(r,Math.min(n,i,o)/2);for(var p=e.attributes.position,m=e.attributes.normal,g=function(t,e,s){var a=Math.abs(t),l=Math.abs(e),h=Math.abs(s),c=n/2,u=i/2,d=o/2,p=a>c-r,m=l>u-r,g=h>d-r;if(p&&m&&g){var f=(c-r)*Math.sign(t),y=(u-r)*Math.sign(e),v=(d-r)*Math.sign(s),b=t-f,x=e-y,w=s-v,E=Math.sqrt(b*b+x*x+w*w);if(E>0){var S=r/E;return{x:f+b*S,y:y+x*S,z:v+w*S,nx:b/E,ny:x/E,nz:w/E}}}else if(p&&m){var T=(c-r)*Math.sign(t),k=(u-r)*Math.sign(e),M=t-T,C=e-k,D=Math.sqrt(M*M+C*C);if(D>0){var P=r/D;return{x:T+M*P,y:k+C*P,z:s,nx:M/D,ny:C/D,nz:0}}}else if(p&&g){var z=(c-r)*Math.sign(t),R=(d-r)*Math.sign(s),A=t-z,_=s-R,I=Math.sqrt(A*A+_*_);if(I>0){var O=r/I;return{x:z+A*O,y:e,z:R+_*O,nx:A/I,ny:0,nz:_/I}}}else if(m&&g){var B=(u-r)*Math.sign(e),H=(d-r)*Math.sign(s),F=e-B,L=s-H,V=Math.sqrt(F*F+L*L);if(V>0){var W=r/V;return{x:t,y:B+F*W,z:H+L*W,nx:0,ny:F/V,nz:L/V}}}return{x:t,y:e,z:s,nx:0,ny:0,nz:0}},f=0;f<p.count;f++){var y=g(p.getX(f),p.getY(f),p.getZ(f));p.setXYZ(f,y.x,y.y,y.z),0===y.nx&&0===y.ny&&0===y.nz||m.setXYZ(f,y.nx,y.ny,y.nz)}return p.needsUpdate=!0,m.needsUpdate=!0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fn(t,e)}(t,THREE.BoxGeometry),Wn(t)}();return new r(t,e,n,i,o,o,o)}},{key:"fixUVCoordinatesForRotation",value:function(){if(this.geometry&&this.geometry.attributes.uv){for(var t=this.geometry.attributes.uv,e=t.array,n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];e[n]=o,e[n+1]=1-i}t.needsUpdate=!0,console.log("[Drum Selector Engine] UV coordinates fixed for horizontal orientation")}else console.warn("[Drum Selector Engine] No UV coordinates to fix")}},{key:"createMaterial",value:function(){if("cylinder"===this.config.geometry&&"animated"===this.config.texture){var t,e,n=Object.assign({},this.config.materialParams),i=Object.assign({},n,{map:this.sideTexture}),o=Object.assign({},n,{map:this.capTexture});switch(this.config.material){case"physical":default:t=new THREE.MeshPhysicalMaterial(i),e=new THREE.MeshPhysicalMaterial(o);break;case"standard":t=new THREE.MeshStandardMaterial(i),e=new THREE.MeshStandardMaterial(o);break;case"basic":t=new THREE.MeshBasicMaterial(i),e=new THREE.MeshBasicMaterial(o)}this.material=[t,e,e],console.log("[Drum Selector Engine] Created multi-material array for cylinder")}else{var r=Object.assign({},this.config.materialParams);switch(this.texture&&(r.map=this.texture),this.config.material){case"physical":default:this.material=new THREE.MeshPhysicalMaterial(r);break;case"standard":this.material=new THREE.MeshStandardMaterial(r);break;case"basic":this.material=new THREE.MeshBasicMaterial(r)}}}},{key:"createMesh",value:function(){this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.rotation.z=Math.PI/2,this.mesh.rotation.x=0,this.mesh.rotation.y=0,this.scene.add(this.mesh),this.resizeContainerToFitContent()}},{key:"resizeContainerToFitContent",value:function(){if(this.config.responsive){var t=Math.max(50,Math.min(500,.15*window.innerWidth));return this.initialWidth=t,this.initialHeight=t,void console.log("[3D Engine] Responsive component - skipping resizeContainerToFitContent, using ".concat(t,"px"))}var e=new THREE.WebGLRenderer({antialias:!0,alpha:!0});e.setSize(1e3,1e3);var n=new THREE.PerspectiveCamera(this.config.cameraFOV,1,.1,100);n.position.copy(this.camera.position),n.lookAt(0,0,0),e.render(this.scene,n);var i=(new THREE.Box3).setFromObject(this.scene).getSize(new THREE.Vector3),o=n.position.z,r=n.fov*Math.PI/180,s=1e3/(2*Math.tan(r/2)*o),a=Math.ceil(i.x*s),l=Math.ceil(i.y*s);e.dispose(),this.config.width=a,this.config.height=l,this.initialWidth=a,this.initialHeight=l,this.renderer.setSize(a,l),this.camera.aspect=a/l,this.camera.updateProjectionMatrix(),this.updateFogPlaneSize()}},{key:"setupInteraction",value:function(){var t=this;this.renderer.domElement.style.cursor="grab",this.renderer.domElement.addEventListener("pointerdown",this.onPointerDown),this.renderer.domElement.addEventListener("pointermove",this.onPointerMove),this.renderer.domElement.addEventListener("pointerup",this.onPointerUp),this.renderer.domElement.addEventListener("pointerleave",this.onPointerUp),this.renderer.domElement.addEventListener("touchstart",this.onTouchStart.bind(this)),this.renderer.domElement.addEventListener("touchmove",this.onTouchMove.bind(this)),this.renderer.domElement.addEventListener("touchend",this.onTouchEnd.bind(this)),"GestureEvent"in window?(console.log("[Drum Selector Engine] GestureEvent is supported - adding listeners"),this.renderer.domElement.addEventListener("gesturestart",this.onGestureStart.bind(this)),this.renderer.domElement.addEventListener("gesturechange",this.onGestureChange.bind(this)),this.renderer.domElement.addEventListener("gestureend",this.onGestureEnd.bind(this))):console.log("[Drum Selector Engine] GestureEvent is NOT supported in this browser"),this.renderer.domElement.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),this.touches=[],this.lastPinchDistance=null,this.lastTouchAngle=null,this.baseScale=1,this.gestureRotation=0,this.gestureScale=1,this.raycaster=new THREE.Raycaster,this.grabbedPoint=null,this.grabbedLocalPoint=null,this.previousQuaternion=null,this.rotationHistory=[],this.maxHistoryLength=5,this.wheelGestureTimeout=null,this.config.responsive&&(this.resizeHandler=function(){return t.updateResponsiveSize()},window.addEventListener("resize",this.resizeHandler))}},{key:"detectGestureType",value:function(t,e,n,i){var o=Date.now();if(this.gestureState.lastUpdateTime,o-this.gestureState.startTime<this.gestureState.transitionCooldown)return this.gestureState.type;var r=0,s=0,a=!1,l=!1;return null!==this.gestureState.pinchDistance&&(a=(r=Math.abs(n-this.gestureState.pinchDistance))>.02*n),null!==this.gestureState.twistAngle&&((s=Math.abs(i-this.gestureState.twistAngle))>Math.PI&&(s=2*Math.PI-s),l=s>.02),a&&!l?"pinch":l&&!a?"twist":a&&l?r/n>s/Math.PI?"pinch":"twist":"swipe"}},{key:"transitionGesture",value:function(t){this.gestureState.type!==t&&(console.log("[3D Component] Gesture transition: ".concat(this.gestureState.type," -> ").concat(t)),this.gestureState.type=t,this.gestureState.startTime=Date.now(),"swipe"!==t&&(this.gestureState.swipeVelocity={x:0,y:0}),"twist"!==t&&(this.gestureState.twistVelocity=0),"pinch"!==t&&(this.gestureState.pinchVelocity=0))}},{key:"onPointerDown",value:function(t){var e=this.renderer.domElement.getBoundingClientRect();this.previousMousePosition={x:t.clientX-e.left,y:t.clientY-e.top};var n=new THREE.Vector2;if(n.x=this.previousMousePosition.x/e.width*2-1,n.y=-this.previousMousePosition.y/e.height*2+1,this.raycaster.setFromCamera(n,this.camera),0!==this.raycaster.intersectObject(this.fogPlane).length){this.isDragging=!0;var i=this.raycaster.intersectObject(this.mesh);if(i.length>0){this.grabbedPoint=i[0].point.clone();var o=this.grabbedPoint.clone();this.mesh.worldToLocal(o),this.grabbedLocalPoint=o}else{var r=new THREE.Vector3;this.mesh.getWorldPosition(r);var s=this.raycaster.ray,a=r.clone().sub(s.origin),l=s.origin.clone().add(s.direction.clone().multiplyScalar(a.dot(s.direction))).clone().sub(r).normalize(),h=this.mesh.geometry.boundingSphere.radius*this.mesh.scale.x;this.grabbedPoint=r.clone().add(l.clone().multiplyScalar(h));var c=this.grabbedPoint.clone();this.mesh.worldToLocal(c),this.grabbedLocalPoint=c}this.rotationVelocity={x:0,y:0},this.autoRotationTime=0,this.renderer.domElement.style.cursor="grabbing",this.previousQuaternion=this.mesh.quaternion.clone(),this.rotationHistory=[]}}},{key:"onPointerMove",value:function(t){if(this.isDragging&&this.grabbedLocalPoint){var e=this.renderer.domElement.getBoundingClientRect(),n={x:t.clientX-e.left,y:t.clientY-e.top};if("drum"===this.config.rotationMode){var i=.01*-(n.y-this.previousMousePosition.y);return this.mesh.rotateOnWorldAxis(new THREE.Vector3(1,0,0),i),this.rotationVelocity.x=i,this.rotationVelocity.y=0,void(this.previousMousePosition=n)}var o=this.mesh.quaternion.clone(),r=new THREE.Vector2;r.x=n.x/e.width*2-1,r.y=-n.y/e.height*2+1,this.applyStickyRotation(r);var s=new THREE.Quaternion;s.multiplyQuaternions(this.mesh.quaternion,o.conjugate()),this.rotationHistory.push({quaternion:s,time:Date.now()}),this.rotationHistory.length>this.maxHistoryLength&&this.rotationHistory.shift(),this.calculateVelocityFromRotation(),this.previousMousePosition=n}}},{key:"applyStickyRotation",value:function(t){if("drum"!==this.config.rotationMode){var e=this.grabbedLocalPoint.clone();this.mesh.localToWorld(e),this.raycaster.setFromCamera(t,this.camera);var n=this.raycaster.ray,i=new THREE.Vector3;this.mesh.getWorldPosition(i);var o=e.clone().sub(i),r=(this.camera.position.clone().sub(i),i.clone().sub(this.camera.position).normalize(),o.length()),s=i.clone().sub(n.origin),a=s.dot(n.direction),l=s.lengthSq()-a*a,h=r*r;if(l>h){var c=n.origin.clone().add(n.direction.clone().multiplyScalar(a)).clone().sub(i).normalize(),u=i.clone().add(c.multiplyScalar(r)),d=o.normalize(),p=u.clone().sub(i).normalize(),m=d.clone().cross(p),g=d.angleTo(p);if(m.length()>.001&&g>.001){m.normalize();var f=new THREE.Quaternion;f.setFromAxisAngle(m,g),this.mesh.quaternion.multiplyQuaternions(f,this.mesh.quaternion)}}else{var y=Math.sqrt(h-l),v=a-y,b=v>0?v:a+y;if(b>0){var x=n.origin.clone().add(n.direction.clone().multiplyScalar(b)),w=o.normalize(),E=x.clone().sub(i).normalize(),S=w.clone().cross(E),T=w.angleTo(E);if(S.length()>.001&&T>.001){S.normalize();var k=new THREE.Quaternion;k.setFromAxisAngle(S,T),this.mesh.quaternion.multiplyQuaternions(k,this.mesh.quaternion)}}}}}},{key:"calculateVelocityFromRotation",value:function(){if(this.rotationHistory.length<2)this.rotationVelocity={x:0,y:0};else{var t=this.rotationHistory.slice(-3);if(!(t.length<2)){var e=(t[t.length-1].time-t[0].time)/1e3;if(e<=0)this.rotationVelocity={x:0,y:0};else{for(var n=new THREE.Quaternion,i=0;i<t.length;i++)n.multiply(t[i].quaternion);var o=new THREE.Vector3,r=0;if(n.w>.9999)this.rotationVelocity={x:0,y:0};else{r=2*Math.acos(n.w);var s=Math.sqrt(1-n.w*n.w);if(s<.001?o.set(n.x,n.y,n.z):o.set(n.x/s,n.y/s,n.z/s),r>Math.PI&&(r=2*Math.PI-r,o.multiplyScalar(-1)),Math.abs(r)>.01){var a=r/e;this.rotationVelocity.y=o.y*a*.5,this.rotationVelocity.x=o.x*a*.5;this.rotationVelocity.x=Math.max(-.02,Math.min(.02,this.rotationVelocity.x)),this.rotationVelocity.y=Math.max(-.02,Math.min(.02,this.rotationVelocity.y))}else this.rotationVelocity={x:0,y:0}}}}}}},{key:"onPointerUp",value:function(){this.isDragging=!1,this.renderer.domElement.style.cursor="grab",this.grabbedPoint=null,this.grabbedLocalPoint=null}},{key:"onTouchStart",value:function(t){if(t.preventDefault(),this.touches=Array.from(t.touches),1===this.touches.length)this.gestureState.type="drag";else if(2===this.touches.length){this.isGesturing=!0;var e=this.touches[0].clientX-this.touches[1].clientX,n=this.touches[0].clientY-this.touches[1].clientY;this.lastPinchDistance=Math.sqrt(e*e+n*n),this.lastTouchAngle=Math.atan2(n,e),this.gestureState.pinchDistance=this.lastPinchDistance,this.gestureState.twistAngle=this.lastTouchAngle,this.gestureState.lastUpdateTime=Date.now(),this.gestureState.type="none"}}},{key:"onTouchMove",value:function(t){if(t.preventDefault(),this.touches=Array.from(t.touches),"drum"===this.config.rotationMode&&this.isDragging&&1===this.touches.length){var e=this.touches[0],n=this.renderer.domElement.getBoundingClientRect(),i={x:e.clientX-n.left,y:e.clientY-n.top},o=.01*-(i.y-this.previousMousePosition.y);return this.mesh.rotateOnWorldAxis(new THREE.Vector3(1,0,0),o),this.rotationVelocity.x=o,this.rotationVelocity.y=0,void(this.previousMousePosition=i)}if(2===this.touches.length){var r=this.touches[0].clientX-this.touches[1].clientX,s=this.touches[0].clientY-this.touches[1].clientY,a=Math.sqrt(r*r+s*s),l=Math.atan2(s,r),h=this.detectGestureType(r,s,a,l);if(this.transitionGesture(h),"twist"===this.gestureState.type&&null!==this.lastTouchAngle){var c=l-this.lastTouchAngle;if(c>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),Math.abs(c)>.02){var u=new THREE.Vector3;this.camera.getWorldDirection(u);var d=new THREE.Quaternion;d.setFromAxisAngle(u,c),this.mesh.quaternion.multiplyQuaternions(d,this.mesh.quaternion),this.autoRotationTime=0}}"none"!==this.gestureState.type&&(this.lastPinchDistance=a,this.lastTouchAngle=l,this.gestureState.pinchDistance=a,this.gestureState.twistAngle=l,this.gestureState.lastUpdateTime=Date.now())}}},{key:"onTouchEnd",value:function(t){this.touches=Array.from(t.touches),this.touches.length<2&&(this.lastPinchDistance=null,this.lastTouchAngle=null,this.isGesturing=!1,this.gestureState.type="none",this.gestureState.startTime=0,this.gestureState.pinchDistance=null,this.gestureState.twistAngle=null)}},{key:"onGestureStart",value:function(t){t.preventDefault(),this.isGesturing=!0,this.gestureRotation=t.rotation||0,this.gestureScale=t.scale||1,console.log("[Drum Selector Engine] Gesture start - rotation:",this.gestureRotation,"scale:",this.gestureScale)}},{key:"onGestureChange",value:function(t){if(t.preventDefault(),"drum"!==this.config.rotationMode&&void 0!==t.rotation){var e=(t.rotation-this.gestureRotation)*Math.PI/180;if(console.log("[Drum Selector Engine] Gesture change - rotation:",t.rotation,"delta (radians):",e),Math.abs(e)>.01){var n=new THREE.Vector3;this.camera.getWorldDirection(n);var i=new THREE.Quaternion;i.setFromAxisAngle(n,e),this.mesh.quaternion.multiplyQuaternions(i,this.mesh.quaternion),this.autoRotationTime=0,console.log("[Drum Selector Engine] Rotation applied!")}this.gestureRotation=t.rotation}}},{key:"onGestureEnd",value:function(t){t.preventDefault(),this.gestureRotation=0,this.gestureScale=1,this.isGesturing=!1}},{key:"isCursorInFogPlane",value:function(t){var e=this.renderer.domElement.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,o=new THREE.Vector2;return o.x=n/e.width*2-1,o.y=-i/e.height*2+1,this.raycaster.setFromCamera(o,this.camera),this.raycaster.intersectObject(this.fogPlane).length>0}},{key:"onWheel",value:function(t){var e=this;if(this.isCursorInFogPlane(t)){t.preventDefault(),this.isGesturing=!0;var n=Date.now();if(this.transitionGesture("swipe"),"drum"===this.config.rotationMode){var i=.01*-t.deltaY;this.mesh.rotateOnWorldAxis(new THREE.Vector3(1,0,0),i),this.rotationVelocity.x=0,this.rotationVelocity.y=0}else{var o=new THREE.Quaternion;o.setFromAxisAngle(new THREE.Vector3(0,1,0),.01*-t.deltaX);var r=new THREE.Vector3;this.camera.getWorldDirection(r);var s=new THREE.Vector3;s.crossVectors(this.camera.up,r).normalize();var a=new THREE.Quaternion;a.setFromAxisAngle(s,.01*t.deltaY),this.mesh.quaternion.multiplyQuaternions(o,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(a,this.mesh.quaternion)}this.autoRotationTime=0,this.gestureState.lastUpdateTime=n,this.wheelGestureTimeout&&clearTimeout(this.wheelGestureTimeout),this.wheelGestureTimeout=setTimeout((function(){e.isGesturing=!1,e.gestureState.type="none",e.gestureState.startTime=0}),150)}}},{key:"updateAnimatedTexture",value:function(t){"cylinder"===this.config.geometry&&this.sideContext&&this.capContext?this.updateCylinderTextures(t):this.textureContext&&this.updateSingleTexture(t,this.textureContext,this.textureCanvas,this.texture)}},{key:"updateCylinderTextures",value:function(t){this.updateSingleTexture(t,this.sideContext,this.sideCanvas,this.sideTexture),this.updateSingleTexture(t,this.capContext,this.capCanvas,this.capTexture)}},{key:"updateSingleTexture",value:function(t,e,n,i){var o=n.width,r=n.height;e.fillStyle="#000000",e.fillRect(0,0,o,r);var s=["0","1","2","3","4","5","6","7","8","9"],a=(o-2*(s.length-1))/s.length,l=Math.min(.6*r,.8*a);e.fillStyle="#ffffff",e.font="".concat(l,"px Arial, sans-serif"),e.textAlign="center",e.textBaseline="middle";for(var h=0;h<s.length;h++){var c=h*a+a/2+2*h,u=r/2;e.save(),e.translate(c,u),e.rotate(Math.PI/2),e.fillText(s[h],0,0),e.restore()}i.needsUpdate=!0}},{key:"updateFogTexture",value:function(t){if(this.fogContext&&this.fogTexture){var e=this.fogContext,n=e.canvas.width,i=e.canvas.height;e.clearRect(0,0,n,i);for(var o=n/2,r=i/2,s=.35*Math.min(n,i),a=0;a<5;a++){var l=.001*t+1.5*a,h=.3*l+a*(2*Math.PI/5),c=(.3*Math.sin(.5*l+2*a)+.7)*s,u=o+Math.cos(h)*c,d=r+Math.sin(h)*c,p=60*(.5*Math.sin(.5*l+2*a)+.5)+60,m=e.createRadialGradient(u,d,0,u,d,p);m.addColorStop(0,"rgba(100, 150, 255, 0.3)"),m.addColorStop(.5,"rgba(50, 100, 200, 0.1)"),m.addColorStop(1,"rgba(0, 50, 150, 0)"),e.fillStyle=m,e.fillRect(u-p,d-p,2*p,2*p)}this.fogTexture.needsUpdate=!0}}},{key:"animate",value:function(t){if(this.isInitialized){if(!this.viewportLogged){var e=this.renderer.getContext();console.log("[3D Engine] First frame render - Responsive: ".concat(this.config.responsive)),console.log("[3D Engine] WebGL viewport: ".concat(e.drawingBufferWidth," x ").concat(e.drawingBufferHeight)),console.log("[3D Engine] Renderer size: ".concat(this.renderer.getSize(new THREE.Vector2).x," x ").concat(this.renderer.getSize(new THREE.Vector2).y)),console.log("[3D Engine] Pixel ratio: ".concat(this.renderer.getPixelRatio())),this.viewportLogged=!0}if(this.animationId=requestAnimationFrame(this.animate),"animated"===this.config.texture&&this.updateAnimatedTexture(t),this.fogTexture&&this.updateFogTexture(t),!this.isDragging&&!this.isGesturing&&this.config.enableAnimation)if("drum"===this.config.rotationMode)Math.abs(this.rotationVelocity.x)>1e-4?(this.mesh.rotateOnWorldAxis(new THREE.Vector3(1,0,0),this.rotationVelocity.x),this.rotationVelocity.x*=.995):this.config.rotationSpeed>0&&this.mesh.rotateOnWorldAxis(new THREE.Vector3(1,0,0),.01*this.config.rotationSpeed),this.rotationVelocity.y=0;else if(Math.abs(this.rotationVelocity.x)>1e-4||Math.abs(this.rotationVelocity.y)>1e-4){var n=new THREE.Quaternion;n.setFromAxisAngle(new THREE.Vector3(0,1,0),this.rotationVelocity.y);var i=new THREE.Vector3;this.camera.getWorldDirection(i);var o=new THREE.Vector3;o.crossVectors(this.camera.up,i).normalize();var r=new THREE.Quaternion;r.setFromAxisAngle(o,this.rotationVelocity.x),this.mesh.quaternion.multiplyQuaternions(n,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(r,this.mesh.quaternion),this.rotationVelocity.x*=.995,this.rotationVelocity.y*=.995}else{this.autoRotationTime+=.01*this.config.rotationSpeed;var s=new THREE.Quaternion;s.setFromAxisAngle(new THREE.Vector3(0,1,0),.01*this.autoRotationTime*this.config.rotationSpeed);var a=new THREE.Quaternion;a.setFromAxisAngle(new THREE.Vector3(1,0,0),.002*Math.sin(.1*this.autoRotationTime)*this.config.rotationSpeed),this.mesh.quaternion.multiplyQuaternions(s,this.mesh.quaternion),this.mesh.quaternion.multiplyQuaternions(a,this.mesh.quaternion)}this.renderer.render(this.scene,this.camera)}}},{key:"setRotationSpeed",value:function(t){this.config.rotationSpeed=t,console.log("[Drum Selector Engine] Rotation speed set to:",t)}},{key:"updateResponsiveSize",value:function(){if(this.config.responsive){var t=Math.max(50,Math.min(500,.15*window.innerWidth));this.renderer.setSize(t,t),this.camera.aspect=1,this.camera.updateProjectionMatrix(),this.updateFogPlaneSize()}}},{key:"updateFogPlaneSize",value:function(){if(this.fogPlane){var t=new THREE.Vector2;this.renderer.getSize(t);var e=this.camera.position.z- -1.5,n=this.config.cameraFOV*Math.PI/180,i=2*Math.tan(n/2)*e,o=i*(t.x/t.y)*1.05,r=1.05*i,s=new THREE.PlaneGeometry(o,r,32,32);if(this.fogPlane.geometry.dispose(),this.fogPlane.geometry=s,this.fogPlane.children.length>0){var a=new THREE.EdgesGeometry(s),l=this.fogPlane.children[0];l.geometry.dispose(),l.geometry=a}console.log("[3D Engine] Updated fog plane size: ".concat(o.toFixed(2)," x ").concat(r.toFixed(2)," units"))}}},{key:"setLightPosition",value:function(t,e,n){this.lights[t]&&(this.lights[t].position[e]=n,console.log("[Drum Selector Engine] ".concat(t," light ").concat(e," set to:"),n))}},{key:"dispose",value:function(){console.log("[Drum Selector Engine] Disposing..."),this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&(this.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown),this.renderer.domElement.removeEventListener("pointermove",this.onPointerMove),this.renderer.domElement.removeEventListener("pointerup",this.onPointerUp),this.renderer.domElement.removeEventListener("pointerleave",this.onPointerUp),this.renderer.domElement.removeEventListener("touchstart",this.onTouchStart),this.renderer.domElement.removeEventListener("touchmove",this.onTouchMove),this.renderer.domElement.removeEventListener("touchend",this.onTouchEnd),"GestureEvent"in window&&(this.renderer.domElement.removeEventListener("gesturestart",this.onGestureStart),this.renderer.domElement.removeEventListener("gesturechange",this.onGestureChange),this.renderer.domElement.removeEventListener("gestureend",this.onGestureEnd)),this.renderer.domElement.removeEventListener("wheel",this.onWheel),this.config.responsive&&this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.renderer.dispose(),this.container.removeChild(this.renderer.domElement)),this.wheelGestureTimeout&&clearTimeout(this.wheelGestureTimeout),this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.texture&&this.texture.dispose(),this.isInitialized=!1}}])}();function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function Gn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Yn(i.key),i)}}function Un(t,e,n){return(e=Yn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yn(t){var e=function(t){if("object"!=qn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qn(e)?e:e+""}var Xn=function(){return t=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Un(this,"handleWheel",(function(t){t.preventDefault(),t.stopPropagation();var n=t.deltaY;e.physics.velocity+=.1*n,Math.abs(e.physics.velocity)>e.physics.maxVelocity&&(e.physics.velocity=Math.sign(e.physics.velocity)*e.physics.maxVelocity),e.isMoving=!0})),Un(this,"handleTouchStart",(function(t){t.preventDefault();var n=t.touches[0];e.physics.lastY=n.clientY,e.physics.isDragging=!0,e.physics.velocity=0,e.physics.lastTime=Date.now()})),Un(this,"handleTouchMove",(function(t){if(e.physics.isDragging){t.preventDefault();var n=t.touches[0],i=e.physics.lastY-n.clientY,o=Date.now(),r=o-e.physics.lastTime,s=i/e.drum.itemHeight*e.drum.panelAngle;e.drum.rotation+=s,r>0&&(e.physics.velocity=s/r*1e3*e.physics.touchVelocityScale),e.physics.lastY=n.clientY,e.physics.lastTime=o,e.drumEl.style.transform="translateZ(-".concat(e.drum.cylinderRadius,"px) rotateX(").concat(e.drum.rotation,"deg)"),e.updatePanelContent()}})),Un(this,"handleTouchEnd",(function(t){e.physics.isDragging&&(t.preventDefault(),e.physics.isDragging=!1,e.isMoving=!0)})),Un(this,"handleMouseDown",(function(t){t.preventDefault(),e.physics.lastY=t.clientY,e.physics.isDragging=!0,e.physics.velocity=0,e.physics.lastTime=Date.now(),document.addEventListener("mousemove",e.handleMouseMove),document.addEventListener("mouseup",e.handleMouseUp)})),Un(this,"handleMouseMove",(function(t){if(e.physics.isDragging){t.preventDefault();var n=e.physics.lastY-t.clientY,i=Date.now(),o=i-e.physics.lastTime,r=n/e.drum.itemHeight*e.drum.panelAngle;e.drum.rotation+=r,o>0&&(e.physics.velocity=r/o*1e3*e.physics.touchVelocityScale),e.physics.lastY=t.clientY,e.physics.lastTime=i,e.drumEl.style.transform="translateZ(-".concat(e.drum.cylinderRadius,"px) rotateX(").concat(e.drum.rotation,"deg)"),e.updatePanelContent()}})),Un(this,"handleMouseUp",(function(t){e.physics.isDragging&&(t.preventDefault(),e.physics.isDragging=!1,e.isMoving=!0,document.removeEventListener("mousemove",e.handleMouseMove),document.removeEventListener("mouseup",e.handleMouseUp))})),Un(this,"animate",(function(){var t=Date.now(),n=(t-e.physics.lastTime)/1e3;if(e.physics.lastTime=t,!e.physics.isDragging&&e.isMoving)if(Math.abs(e.physics.velocity)>.1)e.drum.rotation+=e.physics.velocity*n,e.physics.velocity*=e.physics.friction,e.drumEl.style.transform="translateZ(-".concat(e.drum.cylinderRadius,"px) rotateX(").concat(e.drum.rotation,"deg)"),e.updatePanelContent();else{var i=e.drum.rotation/e.drum.panelAngle,o=Math.round(i)*e.drum.panelAngle,r=o-e.drum.rotation;Math.abs(r)>.1?(e.drum.rotation+=.2*r,e.drumEl.style.transform="translateZ(-".concat(e.drum.cylinderRadius,"px) rotateX(").concat(e.drum.rotation,"deg)"),e.updatePanelContent()):(e.drum.rotation=o,e.drumEl.style.transform="translateZ(-".concat(e.drum.cylinderRadius,"px) rotateX(").concat(e.drum.rotation,"deg)"),e.updatePanelContent(),e.isMoving=!1,e.physics.velocity=0)}requestAnimationFrame(e.animate)})),this.options=this.normalizeOptions(n.options||[]),this.value=n.value||n.defaultValue||null,this.onChange=i||n.onChange||function(){},this.emptyText=n.emptyText||"No Options Available",this.currentIndex=this.findInitialIndex(),this.drum={panelCount:16,cylinderRadius:100,itemHeight:24,perspective:800,rotation:0,panelAngle:22.5,panels:[],panelContents:[]},this.POSITIONS={BACK_CENTER:1,UPDATE_UP:2,FRONT_CENTER:9,UPDATE_DOWN:16},this.physics={velocity:0,friction:.95,isDragging:!1,lastY:0,lastTime:Date.now(),touchVelocityScale:.5,maxVelocity:1500,lastDirection:0},this.element=this.createElement(),this.drumEl=this.element.querySelector(".ios-drum-cylinder"),this.initializePanelContent(),this.animationId=null,this.isMoving=!1,this.animate()},e=[{key:"normalizeOptions",value:function(t){return t.map((function(t){if(null===t)return{value:null,name:""};switch(qn(t)){case"string":return{value:t,name:t};case"number":case"boolean":return{value:t,name:"".concat(t)};default:return t}}))}},{key:"findInitialIndex",value:function(){var t=this,e=this.options.findIndex((function(e){return e.value==t.value}));return Math.max(e,0)}},{key:"createElement",value:function(){var t=document.createElement("div");t.className="ios-drum-wheel";var e=document.createElement("div");e.className="ios-drum-viewport";var n=document.createElement("div");n.className="ios-drum-cylinder";for(var i=0;i<this.drum.panelCount;i++){var o=document.createElement("div");o.className="ios-drum-panel";var r=i+1;o.setAttribute("data-panel-number",r);var s=this.calculatePanelRestAngle(r);o.style.transform="rotateX(".concat(s,"deg) translateZ(").concat(this.drum.cylinderRadius,"px)"),n.appendChild(o),this.drum.panels.push(o),this.drum.panelContents.push("")}var a=document.createElement("div");a.className="ios-drum-gradient ios-drum-gradient-top";var l=document.createElement("div");l.className="ios-drum-gradient ios-drum-gradient-bottom";var h=document.createElement("div");return h.className="ios-drum-indicator",e.appendChild(n),t.appendChild(e),t.appendChild(a),t.appendChild(l),t.appendChild(h),this.addStyles(),t.addEventListener("wheel",this.handleWheel,{passive:!1}),t.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),t.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),t.addEventListener("touchend",this.handleTouchEnd,{passive:!1}),t.addEventListener("mousedown",this.handleMouseDown,{passive:!1}),t}},{key:"calculatePanelRestAngle",value:function(t){return(t-this.POSITIONS.FRONT_CENTER)*this.drum.panelAngle}},{key:"getCurrentPanelAngle",value:function(t){return((this.calculatePanelRestAngle(t)-this.drum.rotation)%360%360+360)%360}},{key:"addStyles",value:function(){if(!document.getElementById("ios-drum-wheel-styles")){var t=document.createElement("style");t.id="ios-drum-wheel-styles",t.textContent="\n            .ios-drum-wheel {\n                position: relative;\n                width: 100%;\n                max-width: 300px;\n                height: 216px;  /* 9 items × 24px */\n                margin: 0 auto;\n                overflow: hidden;\n                user-select: none;\n                -webkit-user-select: none;\n                touch-action: none;\n                background: var(--component-background, #f2f2f2);\n                border-radius: 8px;\n            }\n            \n            .ios-drum-viewport {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                perspective: ".concat(this.drum.perspective,"px;\n                perspective-origin: center center;\n                overflow: hidden;\n            }\n            \n            .ios-drum-cylinder {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                transform-style: preserve-3d;\n                transform: translateZ(-").concat(this.drum.cylinderRadius,"px) rotateX(0deg);\n                transition: none; /* We handle animation in JS */\n            }\n            \n            .ios-drum-panel {\n                position: absolute;\n                width: 100%;\n                height: ").concat(this.drum.itemHeight,"px;\n                left: 0;\n                top: 50%;\n                margin-top: -").concat(this.drum.itemHeight/2,"px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 20px;\n                font-weight: 400;\n                color: var(--text-color, #000);\n                backface-visibility: hidden;\n                transform-origin: center center;\n                pointer-events: none;\n            }\n            \n            /* Gradient overlays for iOS-like depth effect */\n            .ios-drum-gradient {\n                position: absolute;\n                width: 100%;\n                pointer-events: none;\n                z-index: 10;\n            }\n            \n            .ios-drum-gradient-top {\n                top: 0;\n                height: 40%;\n                background: linear-gradient(\n                    to bottom,\n                    var(--component-background, #f2f2f2) 0%,\n                    var(--component-background, #f2f2f2) 20%,\n                    transparent 100%\n                );\n            }\n            \n            .ios-drum-gradient-bottom {\n                bottom: 0;\n                height: 40%;\n                background: linear-gradient(\n                    to top,\n                    var(--component-background, #f2f2f2) 0%,\n                    var(--component-background, #f2f2f2) 20%,\n                    transparent 100%\n                );\n            }\n            \n            /* Selection indicator */\n            .ios-drum-indicator {\n                position: absolute;\n                top: 50%;\n                left: 0;\n                right: 0;\n                height: ").concat(this.drum.itemHeight,"px;\n                margin-top: -").concat(this.drum.itemHeight/2,"px;\n                pointer-events: none;\n                z-index: 5;\n                border-top: 0.5px solid var(--indicator-color, rgba(0, 0, 0, 0.3));\n                border-bottom: 0.5px solid var(--indicator-color, rgba(0, 0, 0, 0.3));\n            }\n            \n            /* Panel visibility states */\n            .ios-drum-panel {\n                transition: font-weight 0.2s ease;\n            }\n            \n            .ios-drum-panel.hidden {\n                display: none;\n            }\n            \n            .ios-drum-panel.selected {\n                font-weight: 700;\n                color: var(--text-color-primary, #000);\n            }\n            \n            /* Dark mode support */\n            @media (prefers-color-scheme: dark) {\n                .ios-drum-wheel {\n                    --component-background: #1c1c1e;\n                    --text-color: #ffffff;\n                    --text-color-primary: #ffffff;\n                    --indicator-color: rgba(255, 255, 255, 0.3);\n                }\n            }\n        "),document.head.appendChild(t)}}},{key:"initializePanelContent",value:function(){console.log("[ios_drum] Initializing ".concat(this.drum.panelCount," panels with ").concat(this.options.length," options"));for(var t=1;t<=this.drum.panelCount;t++){var e=t-1,n=this.drum.panels[e],i=t-9,o=this.currentIndex+i;if(this.options.length>0&&(o=(o%this.options.length+this.options.length)%this.options.length),o>=0&&o<this.options.length){var r=this.options[o];n.textContent=r.name,this.drum.panelContents[e]=r.name,n.setAttribute("data-value",r.value),n.setAttribute("data-item-index",o),console.log("[ios_drum] Panel ".concat(t,': "').concat(r.name,'" (item index: ').concat(o,")"))}}this.updatePanelVisibility(),this.updateSelection()}},{key:"updatePanelContent",value:function(){for(var t=Math.round(this.drum.rotation/this.drum.panelAngle),e=(this.currentIndex-t+1e3*this.options.length)%this.options.length,n=1;n<=this.drum.panelCount;n++){var i=n-1,o=this.drum.panels[i],r=(e+(n-9)+1e3*this.options.length)%this.options.length;if(r>=0&&r<this.options.length){var s=this.options[r];o.textContent!==s.name&&(o.textContent=s.name,this.drum.panelContents[i]=s.name,o.setAttribute("data-value",s.value),o.setAttribute("data-item-index",r))}}this.updatePanelVisibility(),this.updateSelection()}},{key:"updatePanelVisibility",value:function(){var t=this;this.drum.panels.forEach((function(e,n){var i=n+1,o=(t.getCurrentPanelAngle(i)%360+360)%360;o>=270||o<=90?(e.classList.remove("hidden"),e.style.opacity=1):(e.classList.add("hidden"),e.style.opacity=0)}))}},{key:"updateSelection",value:function(){var t=this.drum.panels[8];this.drum.panels.forEach((function(t,e){t.classList.toggle("selected",8===e)}));var e=parseInt(t.getAttribute("data-item-index"));if(!isNaN(e)&&e>=0&&e<this.options.length){var n=this.options[e];this.value!==n.value&&(this.value=n.value,this.onChange(this.value),console.log("[Progress View] Year selected: ".concat(n.name)))}}},{key:"setValue",value:function(t){var e=this.options.findIndex((function(e){return e.value==t}));e>=0&&e!==this.currentIndex&&(this.currentIndex=e,this.value=t,this.initializePanelContent())}},{key:"getValue",value:function(){return this.value}},{key:"render",value:function(t){var e="string"==typeof t?document.getElementById(t):t;return e?(e.appendChild(this.element),console.log("[ios_drum_wheel] Rendered in container:",t),this.element):(console.error("[ios_drum_wheel] Container not found:",t),null)}},{key:"destroy",value:function(){this.element.removeEventListener("wheel",this.handleWheel),this.element.removeEventListener("touchstart",this.handleTouchStart),this.element.removeEventListener("touchmove",this.handleTouchMove),this.element.removeEventListener("touchend",this.handleTouchEnd),this.element.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),console.log("[ios_drum_wheel] Destroyed")}}],e&&Gn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),Zn=n(832);function Jn(t){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(t)}function Qn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Kn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qn(Object(n),!0).forEach((function(e){$n(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $n(t,e,n){return(e=ei(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ei(i.key),i)}}function ei(t){var e=function(t){if("object"!=Jn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jn(e)?e:e+""}var ni=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sliderInstances=new Map,this.textInputInstances=new Map,this.buttonInstances=new Map,this.multiSelectInstances=new Map,this.fileUploadInstances=new Map,this.wheelTimeInstances=new Map,this.wheelDateInstances=new Map,this.calendarInstances=new Map,this.wheelSelectorInstances=new Map,this.customWheelInstances=new Map,this.threeDDrumInstances=new Map,this.initialized=!1,console.log("[ComponentFactory] Factory initialized for engine-based components")},e=[{key:"create3DObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.getElementById(t);if(!n)return console.error("[ComponentFactory] Container ".concat(t," not found")),null;if("undefined"==typeof THREE)return console.error("[ComponentFactory] Three.js not loaded. Add Three.js script before using 3D components."),null;console.log("[ComponentFactory] Creating 3D object with config:",e);var i=new en(n,e);return i.init(),i}},{key:"createThreeDDrumSelector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.getElementById(t);if(!n)return console.error("[ComponentFactory] Container ".concat(t," not found")),null;if("undefined"==typeof THREE)return console.error("[ComponentFactory] Three.js not loaded. Add Three.js script before using 3D components."),null;var i=new Zn.ThreeD_Drum_Selector(n,e);return i.init(),this.threeDDrumInstances.set(t,i),console.log("[ComponentFactory] ThreeD drum selector created in ".concat(t)),i}},{key:"createDrumSelector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.getElementById(t);if(!n)return console.error("[ComponentFactory] Container ".concat(t," not found")),null;if("undefined"==typeof THREE)return console.error("[ComponentFactory] Three.js not loaded. Add Three.js script before using 3D components."),null;var i=new jn(n,e);return i.init(),console.log("[ComponentFactory] Drum selector created in ".concat(t)),i}},{key:"createSlider",value:function(t,e){if(console.log("[ComponentFactory] STEP 1: Creating slider: ".concat(t.sliderClass)),console.log("[ComponentFactory] STEP 2: Container ID: ".concat(t.containerId)),console.log("[ComponentFactory] STEP 3: Options count: ".concat(t.options?t.options.length:0)),!T)return console.error("[ComponentFactory] ERROR: slider_component_engine not available"),null;console.log("[ComponentFactory] STEP 4: slider_component_engine is available");try{console.log("[ComponentFactory] STEP 5: Creating new slider_component_engine instance...");var n=new T(t,e);console.log("[ComponentFactory] STEP 6: Engine instance created successfully"),console.log("[ComponentFactory] STEP 7: Calling engine.init()...");var i=n.init();return console.log("[ComponentFactory] STEP 8: engine.init() returned: ".concat(i)),i?(console.log("[ComponentFactory] STEP 9: Adding to sliderInstances map..."),this.sliderInstances.set(t.sliderClass,n),console.log("[ComponentFactory] STEP 10: Slider created successfully: ".concat(t.sliderClass)),n):(console.error("[ComponentFactory] ERROR: engine.init() returned false for: ".concat(t.sliderClass)),null)}catch(t){return console.error("[ComponentFactory] ERROR: Exception during slider creation:",t),console.error("[ComponentFactory] Stack trace:",t.stack),null}}},{key:"createThemeSelector",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"theme-selector-container";console.log("[ComponentFactory] createThemeSelector called with containerId: ".concat(e));var n=document.getElementById(e);if(!n)return console.error("[ComponentFactory] ERROR: Container '".concat(e,"' not found in DOM")),null;console.log("[ComponentFactory] Container found. Current innerHTML length: ".concat(n.innerHTML.length));var i={containerId:e,sliderClass:"theme-selector",options:[{text:"Dark",value:"dark",position:1,dataAttributes:'data-theme="dark"',active:!0},{text:"System",value:"system",position:2,dataAttributes:'data-theme="system"'},{text:"Light",value:"light",position:3,dataAttributes:'data-theme="light"'}]};return this.createSlider(i,(function(e){var n=e.getAttribute("data-theme")||e.querySelector("h3").textContent.toLowerCase();console.log("[ComponentFactory] Theme selected: ".concat(n)),t.applyTheme(n),localStorage.setItem("userThemePreference",n)}))}},{key:"createTimeFormatSelector",value:function(){var t=this,e={containerId:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"time-format-selector-container",sliderClass:"time-format-selector",options:[{text:this.formatCurrentTime(!0),value:"24",position:1,dataAttributes:'data-format="24"'},{text:"System",value:"system",position:2,dataAttributes:'data-format="system"',active:!0},{text:this.formatCurrentTime(!1),value:"12",position:3,dataAttributes:'data-format="12"'}]},n=this.createSlider(e,(function(e){var n=e.getAttribute("data-format");console.log("[ComponentFactory] Time format selected: ".concat(n)),t.applyTimeFormat(n),localStorage.setItem("userTimeFormatPreference",n)}));return n&&this.setupLiveTimeUpdates(n),n}},{key:"formatCurrentTime",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new Date,n=e.getHours(),i=e.getMinutes().toString().padStart(2,"0");if(t)return n=n.toString().padStart(2,"0"),"24h ".concat(n,":").concat(i);var o=n>=12?"pm":"am";return"12h ".concat(n=(n%=12)||12,":").concat(i).concat(o)}},{key:"setupLiveTimeUpdates",value:function(t){var e=this;setInterval((function(){var t=document.querySelector(".time-format-selector");if(t){var n=t.querySelector('.option[data-format="24"] h3'),i=t.querySelector('.option[data-format="12"] h3');n&&(n.textContent=e.formatCurrentTime(!0)),i&&(i.textContent=e.formatCurrentTime(!1))}}),1e3),console.log("[ComponentFactory] Live time updates started for time format selector")}},{key:"applyTheme",value:function(t){console.log("[ComponentFactory] Applying theme: ".concat(t));var e=document.body;if("light"===t)e.setAttribute("data-theme","light");else if("dark"===t)e.setAttribute("data-theme","dark");else if("system"===t){var n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;this.applyTheme(n?"dark":"light")}}},{key:"applyTimeFormat",value:function(t){console.log("[ComponentFactory] Applying time format: ".concat(t)),"24"===t?console.log("[ComponentFactory] Using 24-hour time format"):"12"===t?console.log("[ComponentFactory] Using 12-hour time format"):"system"===t&&console.log("[ComponentFactory] Using system time format")}},{key:"createTextInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(console.log("[ComponentFactory] Creating text input in container: ".concat(t)),!R)return console.error("[ComponentFactory] ERROR: text_input_component_engine not available"),null;try{var i=n||e.onChange||null,o=Kn({},e);delete o.onChange;var r=new R(o,i);if(r.render(t)){var s=e.id||t;return this.textInputInstances.set(s,r),console.log("[ComponentFactory] Text input created successfully: ".concat(s)),r}return console.error("[ComponentFactory] Failed to render text input in: ".concat(t)),null}catch(t){return console.error("[ComponentFactory] Error creating text input:",t),null}}},{key:"createFirstNameInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first-name-container";return this.createTextInput(t,{id:"first-name",name:"firstName",placeholder:"Enter first name",storageKey:"userFirstName",required:!1,expandable:!0})}},{key:"createLastNameInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"last-name-container";return this.createTextInput(t,{id:"last-name",name:"lastName",placeholder:"Enter last name",storageKey:"userLastName",required:!1,expandable:!0})}},{key:"createNicknameInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nickname-container";return this.createTextInput(t,{id:"nickname",name:"nickname",placeholder:"Enter nickname (optional)",storageKey:"userNickname",required:!1,expandable:!0})}},{key:"createEmailInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"email-container";return this.createTextInput(t,{id:"email",name:"email",type:"email",placeholder:"Enter email",storageKey:"userEmail",required:!0})}},{key:"createPhoneInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"phone-container";return this.createTextInput(t,{id:"phone",name:"phone",type:"tel",placeholder:"Enter phone number",storageKey:"userPhone",required:!1})}},{key:"createNotesInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"notes-container";return this.createTextInput(t,{id:"notes",name:"notes",placeholder:"Enter notes or bio...",storageKey:"userNotes",required:!1,expandable:!0,multiline:!0,minHeight:"80px",maxHeight:"300px"})}},{key:"createButton",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(console.log("[ComponentFactory] Creating button in container: ".concat(t)),!H)return console.error("[ComponentFactory] ERROR: button_component_engine not available"),null;try{var i=n||e.onClick||null,o=Kn({},e);delete o.onClick;var r=new H(o,i);if(r.render(t)){var s=e.id||t;return this.buttonInstances.set(s,r),console.log("[ComponentFactory] Button created successfully: ".concat(s)),r}return console.error("[ComponentFactory] Failed to render button in: ".concat(t)),null}catch(t){return console.error("[ComponentFactory] Error creating button:",t),null}}},{key:"createSubmitButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"submit-button-container",e=arguments.length>1?arguments[1]:void 0;return this.createButton(t,{id:"submit-button",text:"Submit",value:"submit",type:"primary",active:!1},e)}},{key:"createCancelButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cancel-button-container",e=arguments.length>1?arguments[1]:void 0;return this.createButton(t,{id:"cancel-button",text:"Cancel",value:"cancel",type:"secondary",active:!1},e)}},{key:"createDeleteButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"delete-button-container",e=arguments.length>1?arguments[1]:void 0;return this.createButton(t,{id:"delete-button",text:"Delete",value:"delete",type:"danger",active:!1},e)}},{key:"createSaveButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"save-button-container",e=arguments.length>1?arguments[1]:void 0;return this.createButton(t,{id:"save-button",text:"Save",value:"save",type:"primary",icon:"💾",active:!1},e)}},{key:"createMultiSelect",value:function(t,e,n){if(console.log("[ComponentFactory] Creating multi-select in container: ".concat(t)),!U)return console.error("[ComponentFactory] ERROR: multi_select_component_engine not available"),null;try{var i=new U(e,n);if(i.init(t)){var o=e.id||e.containerClass||t;return this.multiSelectInstances.set(o,i),console.log("[ComponentFactory] Multi-select created successfully: ".concat(o)),i}return console.error("[ComponentFactory] Failed to initialize multi-select in: ".concat(t)),null}catch(t){return console.error("[ComponentFactory] Error creating multi-select:",t),null}}},{key:"createNotificationPreferences",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"notification-preferences-container";return this.createMultiSelect(t,{id:"notification-preferences",containerClass:"notification-selector",options:[{value:"email",text:"Email",icon:"📧"},{value:"phone",text:"Phone",icon:"📱"},{value:"sms",text:"SMS",icon:"💬"},{value:"push",text:"Push",icon:"🔔"}],selectedValues:["email"],storageKey:"userNotificationPreferences",minSelection:1},(function(t,e,n){console.log("[ComponentFactory] Notification preferences updated:",t),e&&console.log("[ComponentFactory] ".concat(e," ").concat(n?"enabled":"disabled"))}))}},{key:"createDaysOfWeek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"days-of-week-container";return this.createMultiSelect(t,{id:"days-of-week",containerClass:"days-selector",options:[{value:"mon",text:"Mon"},{value:"tue",text:"Tue"},{value:"wed",text:"Wed"},{value:"thu",text:"Thu"},{value:"fri",text:"Fri"},{value:"sat",text:"Sat"},{value:"sun",text:"Sun"}],selectedValues:["mon","tue","wed","thu","fri"],storageKey:"userWorkDays"},(function(t){console.log("[ComponentFactory] Work days updated:",t)}))}},{key:"initializeAll",value:function(){console.log("[ComponentFactory] Initializing all available slider components");var t=[];if(document.getElementById("theme-selector-container")){var e=this.createThemeSelector();t.push({type:"theme",success:!!e})}if(document.getElementById("time-format-selector-container")){var n=this.createTimeFormatSelector();t.push({type:"time-format",success:!!n})}return this.initialized=!0,console.log("[ComponentFactory] Initialization complete. Results:",t),t}},{key:"getSlider",value:function(t){return this.sliderInstances.get(t)}},{key:"destroyAll",value:function(){console.log("[ComponentFactory] Destroying all slider instances"),this.sliderInstances.forEach((function(t,e){t.destroy()})),this.sliderInstances.clear(),this.initialized=!1}},{key:"getStatus",value:function(){return{initialized:this.initialized,sliderCount:this.sliderInstances.size,sliders:Array.from(this.sliderInstances.keys())}}},{key:"createFileUpload",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(console.log("[ComponentFactory] Creating file upload in container: ".concat(t)),!gn)return console.error("[ComponentFactory] ERROR: file_upload_input_component_engine not available"),null;try{var i=new gn(e,n);if(i.render(t)){var o=e.id||t;return this.fileUploadInstances.set(o,i),console.log("[ComponentFactory] File upload created successfully: ".concat(o)),i}return console.error("[ComponentFactory] Failed to render file upload in: ".concat(t)),null}catch(t){return console.error("[ComponentFactory] Error creating file upload:",t),null}}},{key:"createProfilePictureUpload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"profile-picture-container",e=arguments.length>1?arguments[1]:void 0;return this.createFileUpload(t,{id:"profile-picture",text:"Upload Profile Picture",acceptedFiles:"image/*",multiple:!1,maxSize:5242880,icon:"📷"},e)}},{key:"createDocumentUpload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document-upload-container",e=arguments.length>1?arguments[1]:void 0;return this.createFileUpload(t,{id:"document-upload",text:"Drag & Drop Documents or Click to Browse",acceptedFiles:".pdf,.doc,.docx,.txt",multiple:!0,maxFiles:10,maxSize:10485760,icon:"📄"},e)}},{key:"createCSVUpload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv-upload-container",e=arguments.length>1?arguments[1]:void 0;return this.createFileUpload(t,{id:"csv-upload",text:"Upload CSV File",acceptedFiles:".csv,text/csv",multiple:!1,maxSize:52428800,icon:"📊"},e)}},{key:"createGeneralFileUpload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"file-upload-container",e=arguments.length>1?arguments[1]:void 0;return this.createFileUpload(t,{id:"general-upload",text:"Drag & Drop To Upload or Select to Browse",acceptedFiles:"*",multiple:!0,maxFiles:20,maxSize:104857600,icon:"📁"},e)}},{key:"createWheelTimeSelector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("[ComponentFactory] Creating wheel time selector in container: ".concat(t)),!En)return console.error("[ComponentFactory] ERROR: wheel_time_selector_component_engine not available"),null;try{var n=document.getElementById(t);if(!n)return console.error("[ComponentFactory] Container not found: ".concat(t)),null;var i=new En(n,e.id||t,e),o=e.id||t;return this.wheelTimeInstances.set(o,i),console.log("[ComponentFactory] Wheel time selector created successfully: ".concat(o)),i}catch(t){return console.error("[ComponentFactory] Error creating wheel time selector:",t),null}}},{key:"createMorningHoursSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"morning-hours-container";return this.createWheelTimeSelector(t,{id:"morning-hours",label:"Morning Hours",defaultTime:{hours:9,minutes:0},onChange:function(t){console.log("[ComponentFactory] Morning hours selected:",t),localStorage.setItem("userMorningStartTime",JSON.stringify(t))}})}},{key:"createAfternoonHoursSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"afternoon-hours-container";return this.createWheelTimeSelector(t,{id:"afternoon-hours",label:"Afternoon Hours",defaultTime:{hours:17,minutes:0},onChange:function(t){console.log("[ComponentFactory] Afternoon hours selected:",t),localStorage.setItem("userAfternoonEndTime",JSON.stringify(t))}})}},{key:"createMeetingTimeSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"meeting-time-container";return this.createWheelTimeSelector(t,{id:"meeting-time",label:"Meeting Time",minuteInterval:15,onChange:function(t){console.log("[ComponentFactory] Meeting time selected:",t)}})}},{key:"createWheelDatePicker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("[ComponentFactory] Creating wheel date picker in container: ".concat(t)),!Dn)return console.error("[ComponentFactory] ERROR: wheel_date_picker_component_engine not available"),null;try{var n=document.getElementById(t);if(!n)return console.error("[ComponentFactory] Container not found: ".concat(t)),null;var i=new Dn(n,e.id||t,e),o=e.id||t;return this.wheelDateInstances.set(o,i),console.log("[ComponentFactory] Wheel date picker created successfully: ".concat(o)),i}catch(t){return console.error("[ComponentFactory] Error creating wheel date picker:",t),null}}},{key:"createBirthdatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"birthdate-container",e=new Date,n=e.getFullYear()-100,i=e.getFullYear()-13;return this.createWheelDatePicker(t,{id:"birthdate",label:"Date of Birth",format:"DD-MMM-YYYY",yearRange:{min:n,max:i},defaultDate:new Date(i-25,0,1),onChange:function(t){console.log("[ComponentFactory] Birthdate selected:",t),localStorage.setItem("userBirthdate",t.toISOString())}})}},{key:"createDeadlinePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"deadline-container";return this.createWheelDatePicker(t,{id:"deadline",label:"Project Deadline",format:"YYYY-MM-DD",minDate:new Date,onChange:function(t){console.log("[ComponentFactory] Deadline selected:",t)}})}},{key:"createExpiryDatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"expiry-date-container";return this.createWheelDatePicker(t,{id:"expiry-date",label:"Expiry Date",format:"DD-MM-YYYY",minDate:new Date,onChange:function(t){console.log("[ComponentFactory] Expiry date selected:",t)}})}},{key:"createCalendarPicker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("[ComponentFactory] Creating calendar picker in container: ".concat(t)),!In)return console.error("[ComponentFactory] ERROR: calendar_picker_component_engine not available"),null;try{var n=document.getElementById(t);if(!n)return console.error("[ComponentFactory] Container not found: ".concat(t)),null;var i=new In(n,e.id||t,e),o=e.id||t;return this.calendarInstances.set(o,i),console.log("[ComponentFactory] Calendar picker created successfully: ".concat(o)),i}catch(t){return console.error("[ComponentFactory] Error creating calendar picker:",t),null}}},{key:"createAppointmentPicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"appointment-container";return this.createCalendarPicker(t,{id:"appointment-date",label:"Select Appointment Date",minDate:new Date,expandable:!0,onChange:function(t){console.log("[ComponentFactory] Appointment date selected:",t),localStorage.setItem("selectedAppointmentDate",t.toISOString())},onExpand:function(t){console.log("[ComponentFactory] Calendar expanded:",t)}})}},{key:"createVacationPicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vacation-container";return this.createCalendarPicker(t,{id:"vacation-dates",label:"Vacation Dates",expandable:!0,monthsToShow:3,onChange:function(t){console.log("[ComponentFactory] Vacation date selected:",t)}})}},{key:"createTaskDueDatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"task-due-date-container";return this.createCalendarPicker(t,{id:"task-due-date",label:"Task Due Date",minDate:new Date,expandable:!1,onChange:function(t){console.log("[ComponentFactory] Task due date selected:",t)}})}},{key:"createWheelSelector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("[ComponentFactory] Creating iOS drum wheel selector in container: ".concat(t)),!Xn)return console.error("[ComponentFactory] ERROR: ios_drum_wheel_engine not available"),null;try{var n=e.onChange||null,i=Kn({},e);delete i.onChange;var o=new Xn(i,n);if(o.render(t)){var r=e.id||t;return this.customWheelInstances.set(r,o),console.log("[ComponentFactory] iOS drum wheel selector created successfully: ".concat(r)),o}return console.error("[ComponentFactory] Failed to render iOS drum wheel selector in: ".concat(t)),null}catch(t){return console.error("[ComponentFactory] Error creating iOS drum wheel selector:",t),null}}},{key:"createLanguageSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"language-selector-container";return this.createWheelSelector(t,{id:"language-selector",label:"Language",options:[{value:"en-UK",text:"UK English",icon:"🇬🇧"},{value:"en-US",text:"US English",icon:"🇺🇸"},{value:"es",text:"Español",icon:"🇪🇸"},{value:"fr",text:"Français",icon:"🇫🇷"},{value:"de",text:"Deutsch",icon:"🇩🇪"},{value:"it",text:"Italiano",icon:"🇮🇹"},{value:"pt",text:"Português",icon:"🇵🇹"},{value:"ja",text:"日本語",icon:"🇯🇵"},{value:"ko",text:"한국어",icon:"🇰🇷"},{value:"zh",text:"中文",icon:"🇨🇳"}],defaultValue:"en-UK",storageKey:"userLanguagePreference",onChange:function(t,e){console.log("[ComponentFactory] Language selected:",t)}})}},{key:"createTimezoneSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"timezone-selector-container";return this.createWheelSelector(t,{id:"timezone-selector",label:"Time Zone",icon:"🌍",options:[{value:"system",text:"System Time Zone"},{value:"UTC",text:"UTC (Coordinated Universal Time)"},{value:"America/New_York",text:"New York (EST/EDT)"},{value:"America/Chicago",text:"Chicago (CST/CDT)"},{value:"America/Denver",text:"Denver (MST/MDT)"},{value:"America/Los_Angeles",text:"Los Angeles (PST/PDT)"},{value:"Europe/London",text:"London (GMT/BST)"},{value:"Europe/Paris",text:"Paris (CET/CEST)"},{value:"Asia/Tokyo",text:"Tokyo (JST)"},{value:"Asia/Shanghai",text:"Shanghai (CST)"},{value:"Australia/Sydney",text:"Sydney (AEST/AEDT)"}],defaultValue:"system",storageKey:"userTimezonePreference",onChange:function(t){console.log("[ComponentFactory] Timezone selected:",t)}})}},{key:"createCurrencySelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"currency-selector-container";return this.createWheelSelector(t,{id:"currency-selector",label:"Default Currency",options:[{value:"system",text:"System Currency"},{value:"USD",text:"USD - US Dollar",icon:"$"},{value:"EUR",text:"EUR - Euro",icon:"€"},{value:"GBP",text:"GBP - British Pound",icon:"£"},{value:"JPY",text:"JPY - Japanese Yen",icon:"¥"},{value:"CHF",text:"CHF - Swiss Franc",icon:"₣"},{value:"CAD",text:"CAD - Canadian Dollar",icon:"C$"},{value:"AUD",text:"AUD - Australian Dollar",icon:"A$"},{value:"CNY",text:"CNY - Chinese Yuan",icon:"¥"}],defaultValue:"system",storageKey:"userCurrencyPreference",onChange:function(t,e){console.log("[ComponentFactory] Currency selected:",t)}})}},{key:"createFirstDayOfWeekSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first-day-selector-container";return this.createWheelSelector(t,{id:"first-day-selector",label:"First Day of Week",options:[{value:"monday",text:"Monday"},{value:"sunday",text:"Sunday"},{value:"saturday",text:"Saturday"}],defaultValue:"monday",storageKey:"userFirstDayOfWeek",onChange:function(t){console.log("[ComponentFactory] First day of week selected:",t)}})}},{key:"createDateFormatSelector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"date-format-selector-container",e=new Date,n=[{value:"dd-MMM-yyyy",text:e.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g,"-")},{value:"yyyy-mm-dd",text:e.toISOString().split("T")[0]},{value:"mm/dd/yyyy",text:e.toLocaleDateString("en-US")},{value:"dd/mm/yyyy",text:e.toLocaleDateString("en-GB")},{value:"dd.mm.yyyy",text:e.toLocaleDateString("de-DE")}];return this.createWheelSelector(t,{id:"date-format-selector",label:"Date Format",options:n,defaultValue:"dd-MMM-yyyy",storageKey:"userDateFormat",onChange:function(t){console.log("[ComponentFactory] Date format selected:",t)}})}}],e&&ti(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),ii=new ni;function oi(t){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(t)}function ri(){ri=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(t,e,n,i){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i})}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function h(e,n,i,o){var r=n&&n.prototype instanceof d?n:d,s=Object.create(r.prototype);return l(s,"_invoke",function(e,n,i){var o=1;return function(r,s){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===r)throw s;return{value:t,done:!0}}for(i.method=r,i.arg=s;;){var a=i.delegate;if(a){var l=w(a,i);if(l){if(l===u)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(1===o)throw o=4,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=3;var h=c(e,n,i);if("normal"===h.type){if(o=i.done?4:2,h.arg===u)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(o=4,i.method="throw",i.arg=h.arg)}}}(e,i,new T(o||[])),!0),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var u={};function d(){}function p(){}function m(){}var g={};l(g,r,(function(){return this}));var f=Object.getPrototypeOf,y=f&&f(f(k([])));y&&y!==n&&i.call(y,r)&&(g=y);var v=m.prototype=d.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,r,s,a){var l=c(t[o],t,r);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"==oi(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(u).then((function(t){h.value=t,s(h)}),(function(t){return n("throw",t,s,a)}))}a(l.arg)}var o;l(this,"_invoke",(function(t,i){function r(){return new e((function(e,o){n(t,i,e,o)}))}return o=o?o.then(r,r):r()}),!0)}function w(e,n){var i=n.method,o=e.i[i];if(o===t)return n.delegate=null,"throw"===i&&e.i.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var r=c(o,e.i,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;var s=r.arg;return s?s.done?(n[e.r]=s.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,u):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function E(t){this.tryEntries.push(t)}function S(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function T(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function k(e){if(null!=e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(oi(e)+" is not iterable")}return p.prototype=m,l(v,"constructor",m),l(m,"constructor",p),p.displayName=l(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},e.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var s=new x(h(t,n,i,o),r);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),l(v,a,"Generator"),l(v,r,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.unshift(i);return function t(){for(;n.length;)if((i=n.pop())in e)return t.value=i,t.done=!1,t;return t.done=!0,t}},e.values=k,T.prototype={constructor:T,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(t){s.type="throw",s.arg=e,n.next=t}for(var o=n.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r[4],a=this.prev,l=r[1],h=r[2];if(-1===r[0])return i("end"),!1;if(!l&&!h)throw Error("try statement without catch or finally");if(null!=r[0]&&r[0]<=a){if(a<l)return this.method="next",this.arg=t,i(l),!0;if(a<h)return i(h),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i[0]>-1&&i[0]<=this.prev&&this.prev<i[2]){var o=i;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var r=o?o[4]:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o[2],u):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),S(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var i=n[4];if("throw"===i.type){var o=i.arg;S(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={i:k(e),r:n,n:i},"next"===this.method&&(this.arg=t),u}},e}function si(t,e,n,i,o,r,s){try{var a=t[r](s),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,o)}console.log("[component-loader] Component loader initializing"),console.log("[component-loader] Component loader ready");var ai={home:"pages/home/index.html","vendor-request":"pages/vendor-request/index.html","data-entry":"pages/data-entry/index.html",engines:"pages/engines/index.html",settings:"pages/settings/index.html"},li=null;function hi(){return window.location.hash.substring(1)||null}function ci(t){return ui.apply(this,arguments)}function ui(){var t;return t=ri().mark((function t(e){var n,i,o,r,s,a=arguments;return ri().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!(a.length>1&&void 0!==a[1])||a[1],e&&e!==li){t.next=3;break}return t.abrupt("return");case 3:if(t.prev=3,document.querySelectorAll("[data-page]").forEach((function(t){t.getAttribute("data-page")===e?t.classList.add("active"):t.classList.remove("active")})),i=document.querySelector("#page-content")){t.next=9;break}return console.error("Content container not found"),t.abrupt("return");case 9:if(o=ai[e]){t.next=13;break}return console.error("No path defined for page: ".concat(e)),t.abrupt("return");case 13:return t.next=15,fetch(o);case 15:if((r=t.sent).ok){t.next=18;break}throw new Error("Failed to load page: ".concat(r.status," ").concat(r.statusText));case 18:return t.next=20,r.text();case 20:s=t.sent,i.innerHTML='<div class="content-isolation-container"><div class="content-flex-container">'.concat(s,"</div></div>"),li=e,n&&window.history.pushState({page:e},"","#".concat(e)),"function"==typeof window.initializePageComponents&&window.initializePageComponents(e),"function"==typeof window.updateMenuContent&&window.updateMenuContent(),document.dispatchEvent(new Event("pageLoaded")),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(3),console.error("Error loading page:",t.t0);case 32:case"end":return t.stop()}}),t,null,[[3,29]])})),ui=function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function s(t){si(r,i,o,s,a,"next",t)}function a(t){si(r,i,o,s,a,"throw",t)}s(void 0)}))},ui.apply(this,arguments)}var di=!1;function pi(){var t=document.querySelector(".collapsed-menu");t&&(t.innerHTML="",document.querySelector(".nav-container:nth-child(4)").querySelectorAll("button[data-page]:not(.collapsed-navbar)").forEach((function(e){if(!e.classList.contains("active")){var n=e.querySelector("h3").textContent,i=e.getAttribute("data-page"),o=document.createElement("button");o.setAttribute("data-page",i);var r=document.createElement("h3");r.textContent=n,o.appendChild(r),o.onclick=function(){ci(i),t.style.display="none",di=!1},t.appendChild(o)}})))}window.updateMenuContent=pi;var mi="202509182257";function gi(){if(console.log("[main.js] DOM ready, initializing application"),console.log("[main.js] Initializing layout system"),function(){var t=new ResizeObserver((function(t){t.forEach((function(t){var e=document.querySelector(".content-wrapper .content-buffer:first-child"),i=document.querySelector(".content-wrapper .content-buffer:last-child"),o=document.querySelector(".nav-bar .nav-container:nth-child(1)"),r=document.querySelector(".nav-bar .nav-container:nth-child(5)");e&&o&&(o.style.width=getComputedStyle(e).width),i&&r&&(r.style.width=getComputedStyle(i).width),n()}))})),e=new ResizeObserver((function(t){t.forEach((function(t){n(),i()}))}));function n(){var t=document.querySelector(".nav-bar"),e=t?t.offsetHeight:0,n=document.querySelector(".nav-bar .nav-container:nth-child(1)"),i=n?n.offsetWidth:e,o=Math.min(e,i);document.documentElement.style.setProperty("--navbar-height","".concat(o,"px"))}function i(){var t=document.getElementById("bottom-buffer-dimensions");if(t){var e=document.querySelector(".bottom-buffer-bar");if(e){var n=e.offsetWidth,i=e.offsetHeight;t.textContent="".concat(n,"px x ").concat(i,"px")}}}document.querySelectorAll(".content-wrapper .content-buffer").forEach((function(e){return t.observe(e)}));var o=document.querySelector(".nav-bar");o&&e.observe(o),n(),i()}(),x(),console.log("[main.js] Initializing navigation system"),e=document.querySelector(".collapsed-navbar"),n=document.querySelector(".collapsed-menu"),e&&n&&(e.addEventListener("mouseenter",(function(){di||(pi(),n.style.display="flex")})),e.addEventListener("mouseleave",(function(){di||setTimeout((function(){n.matches(":hover")||(n.style.display="none")}),100)})),n.addEventListener("mouseleave",(function(){di||(n.style.display="none")})),e.addEventListener("click",(function(t){t.stopPropagation(),di?(n.style.display="none",di=!1):(pi(),n.style.display="flex",di=!0)})),document.addEventListener("click",(function(t){di&&!t.target.closest(".collapsed-menu")&&(n.style.display="none",di=!1)})),window.addEventListener("resize",(function(){var t=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--collapse-breakpoint"));window.innerWidth>t&&(n.style.display="none",di=!1)}))),document.querySelectorAll(".nav-container button[data-page]:not(.collapsed-navbar)").forEach((function(t){t.addEventListener("click",(function(){ci(t.getAttribute("data-page"))}))})),pi(),document.querySelectorAll("[data-page]").forEach((function(t){t.addEventListener("click",(function(e){ci(t.getAttribute("data-page"))}))})),ci(hi()||"home"),window.addEventListener("popstate",(function(t){var e;ci((null===(e=t.state)||void 0===e?void 0:e.page)||hi()||"home",!1)})),"false"!==localStorage.getItem("showBorders")){console.log("[main.js] Borders should be enabled, waiting for toggleBorders function...");var t=setInterval((function(){window.toggleBorders&&(console.log("[main.js] toggleBorders function found, enabling borders"),window.toggleBorders(),clearInterval(t))}),100);setTimeout((function(){return clearInterval(t)}),5e3)}var e,n,i=localStorage.getItem("userThemePreference");i?document.body.setAttribute("data-theme",i):document.body.setAttribute("data-theme","dark"),window.addEventListener("resize",x),console.log("[main.js] Application initialized"),document.body.style.visibility="visible",document.body.style.opacity="1"}console.log("[main.js] Starting application initialization [Deployment: ".concat(mi,"]")),window.componentFactory=ii,console.log("[main.js] Global mouse tracker ready"),window.initializePageComponents=function(t){if(console.log("[main.js] Initializing components for page: ".concat(t)),"home"===t){console.log("[main.js] Initializing home page");var e=document.querySelector(".content-flex-container h1");if(console.log("[main.js] Found h1 element:",e),console.log("[main.js] h1 text content:",e?e.textContent:"null"),e){var i=document.createElement("h1");i.textContent=mi,i.style.marginBottom="10px",e.parentNode.insertBefore(i,e),console.log("[main.js] Build timestamp added:",mi)}else console.error("[main.js] No h1 element found on home page")}else"settings"===t?(console.log("[main.js] Initializing settings components"),function(){if(window.componentFactory){console.log("[Settings Page] Initializing User Settings components...");var t=localStorage.getItem("userThemePreference")||"dark";document.body.hasAttribute("data-theme")||document.body.setAttribute("data-theme",t);try{var e=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new Date,n=e.getHours(),i=e.getMinutes().toString().padStart(2,"0");if(t)return n=n.toString().padStart(2,"0"),"24h ".concat(n,":").concat(i);var o=n>=12?"pm":"am";return"12h ".concat(n=(n%=12)||12,":").concat(i).concat(o)},n=function(){var t=document.querySelector('.time-format-slider .option[data-format="12"] h3'),n=document.querySelector('.time-format-slider .option[data-format="24"] h3');t&&(t.textContent=e(!1)),n&&(n.textContent=e(!0))},i=function(t){console.log("[Theme] Applying theme:",t);var e=document.body;"light"===t?(console.log("[Theme] Setting light theme attributes"),e.setAttribute("data-theme","light"),e.style.removeProperty("background-image")):"dark"===t&&(console.log("[Theme] Setting dark theme attributes"),e.setAttribute("data-theme","dark"),e.style.removeProperty("background-image"))};console.log("[Settings Page] Initializing User Settings components...");var o=localStorage.getItem("userTimeFormatPreference")||"12";ii.createSlider({containerId:"time-format-slider-container",sliderClass:"time-format-slider",options:[{text:e(!0),value:"24",position:1,active:"24"===o,dataAttributes:'data-format="24"'},{text:e(!1),value:"12",position:2,active:"12"===o,dataAttributes:'data-format="12"'}]},(function(t){var e=t.getAttribute("data-format");console.log("[Time Format] Selected:",e),localStorage.setItem("userTimeFormatPreference",e)})),n(),setInterval(n,1e3),ii.createSlider({containerId:"theme-selector-slider-container",sliderClass:"theme-slider",options:[{text:"Dark Theme",value:"dark",position:1,active:"dark"===t,dataAttributes:'data-theme="dark"'},{text:"Light Theme",value:"light",position:2,active:"light"===t,dataAttributes:'data-theme="light"'}]},(function(t){var e=t.getAttribute("data-theme")||t.querySelector("h3").textContent.toLowerCase();console.log("[Theme] Selected:",e),i(e),localStorage.setItem("userThemePreference",e)})),i(t),ii.createButton("borders-toggle-button-container",{id:"borders-toggle-button",text:"Size Guides and Borders",value:"toggle-borders",onClick:function(){if(window.toggleBorders){window.toggleBorders();var t=document.querySelector(".site-container"),e=t&&t.classList.contains("borders-hidden");localStorage.setItem("showBorders",e?"false":"true"),console.log("[Borders Toggle] Borders are now:",e?"hidden":"visible")}else console.error("[Borders Toggle] toggleBorders function not found")}}),console.log("[Settings Page] All components initialized successfully")}catch(t){console.error("[Settings Page] Error initializing components:",t)}}else console.error("[Settings Page] ComponentFactory not available")}()):"engines"===t?(console.log("[main.js] Initializing engines components"),console.log("[Engines View] Initializing component engine demos"),function(){if(window.componentFactory){console.log("[Engines Page] Initializing component engine demos...");try{console.log("[Engines Page] Initializing demo components..."),ii.createSlider({containerId:"demo-slider-container",sliderClass:"demo-slider",options:[{text:"Option 1",value:"option1",position:1,active:!0},{text:"Option 2",value:"option2",position:2},{text:"Option 3",value:"option3",position:3}]},(function(t){console.log("[Demo] Slider selected:",t.querySelector("h3").textContent)})),ii.createTextInput("demo-text-input-container",{id:"demo-text-input",label:"Text Input",placeholder:"Text Input",expandable:!0,onChange:function(t){return console.log("[Demo] Text input:",t)}}),ii.createButton("demo-base-button-text-container",{id:"demo-base-button-text",text:"Click Me",active:!1,onClick:function(t,e){console.log("[Demo] Base button (text mode) clicked:",t,e)}}),ii.createButton("demo-base-button-circle-container",{id:"demo-base-button-circle",text:"•",active:!1,onClick:function(t,e){console.log("[Demo] Base button (circle mode) clicked:",t,e)}}),ii.createMultiSelect("demo-multi-select-container",{id:"demo-multi-select",label:"Multi Select",options:[{value:"check1",text:"Check 1"},{value:"check2",text:"Check 2"},{value:"check3",text:"Check 3"}],defaultValues:["check1"],onChange:function(t){return console.log("[Demo] Multi-select values:",t)}}),Promise.resolve().then(n.bind(n,832)).then((function(t){var e=new(0,t.default)("demo-threed-drum-selector-container",{responsive:!0,rotationSpeed:0,textDepth:0,addBlockingCylinder:!0,restrictRotationAxis:"x"});e.init(),console.log("[Demo] ThreeD_Drum_Selector initialized:",e),e.addEventListener("valueChange",(function(t){console.log("ThreeD_Drum_Selector value changed to:",t.detail.value)})),ii.createSlider({containerId:"demo-threed-drum-selector-rotation-slider-container",sliderClass:"demo-threed-drum-selector-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var n=parseFloat(t.getAttribute("data-value"));console.log("[Demo ThreeD_Drum_Selector Rotation Speed] Selected:",n),e&&e.setRotationSpeed&&e.setRotationSpeed(n)}))})).catch((function(t){console.error("Failed to load ThreeD_Drum_Selector:",t)}));var t=ii.create3DObject("demo-3d-container",{responsive:!0,geometry:"roundedBox",geometryParams:{width:1,height:1,depth:1,radius:.15,smoothness:32},texture:"animated",enableInteraction:!0,rotationSpeed:0});console.log("[Demo] 3D component initialized:",t),ii.createSlider({containerId:"demo-3d-rotation-slider-container",sliderClass:"demo-3d-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(e){var n=parseFloat(e.getAttribute("data-value")||e.querySelector("h3").textContent);console.log("[Demo 3D Rotation Speed] Selected:",n),t&&t.setRotationSpeed&&t.setRotationSpeed(n)}));var e=ii.create3DObject("demo-3d-cylinder-container",{responsive:!0,geometry:"cylinder",geometryParams:{cylinderRadiusTop:.5,cylinderRadiusBottom:.5,cylinderHeight:1,cylinderRadialSegments:32},texture:"animated",enableInteraction:!0,rotationSpeed:0});console.log("[Demo] 3D cylinder component initialized:",e),ii.createSlider({containerId:"demo-3d-cylinder-rotation-slider-container",sliderClass:"demo-3d-cylinder-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var n=parseFloat(t.getAttribute("data-value"));console.log("[Demo 3D Cylinder Rotation Speed] Selected:",n),e&&e.setRotationSpeed&&e.setRotationSpeed(n)}));var i=ii.create3DObject("demo-3d-cone-container",{responsive:!0,geometry:"cone",geometryParams:{coneRadius:.5,coneHeight:1,coneRadialSegments:32},texture:"animated",enableInteraction:!0,rotationSpeed:0});console.log("[Demo] 3D cone component initialized:",i),ii.createSlider({containerId:"demo-3d-cone-rotation-slider-container",sliderClass:"demo-3d-cone-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo 3D Cone Rotation Speed] Selected:",e),i&&i.setRotationSpeed&&i.setRotationSpeed(e)}));var o=ii.create3DObject("demo-3d-tube-container",{responsive:!0,geometry:"tube",geometryParams:{tubeRadius:.5,tubeLength:1,tubeRadialSegments:32},texture:"animated",enableInteraction:!0,rotationSpeed:0});console.log("[Demo] 3D tube component initialized:",o),ii.createSlider({containerId:"demo-3d-tube-rotation-slider-container",sliderClass:"demo-3d-tube-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo 3D Tube Rotation Speed] Selected:",e),o&&o.setRotationSpeed&&o.setRotationSpeed(e)}));var r=new an("demo-3d-textgeometry-container",{responsive:!0,rotationSpeed:0,restrictRotationAxis:"x"});r.init(),console.log("[Demo] ThreeD Component Engine TextGeometry initialized:",r),ii.createSlider({containerId:"demo-3d-textgeometry-rotation-slider-container",sliderClass:"demo-3d-textgeometry-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo ThreeD TextGeometry Rotation Speed] Selected:",e),r&&r.setRotationSpeed&&r.setRotationSpeed(e)}));var s=new an("demo-3d-textgeometry-09-container",{responsive:!0,rotationSpeed:0,textDepth:0,restrictRotationAxis:"x"});s.init(),console.log("[Demo] ThreeD Engine TextGeometry 0-9 initialized:",s),ii.createSlider({containerId:"demo-3d-textgeometry-09-rotation-slider-container",sliderClass:"demo-3d-textgeometry-09-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo ThreeD TextGeometry 0-9 Rotation Speed] Selected:",e),s&&s.setRotationSpeed&&s.setRotationSpeed(e)}));var a=new an("demo-3d-textgeometry-09-blocker-container",{responsive:!0,rotationSpeed:0,textDepth:0,addBlockingCylinder:!0,restrictRotationAxis:"x"});a.init(),console.log("[Demo] ThreeD Engine TextGeometry 0-9 with Black Blocker initialized:",a),ii.createSlider({containerId:"demo-3d-textgeometry-09-blocker-rotation-slider-container",sliderClass:"demo-3d-textgeometry-09-blocker-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo ThreeD TextGeometry 0-9 Black Blocker Rotation Speed] Selected:",e),a&&a.setRotationSpeed&&a.setRotationSpeed(e)}));var l=ii.create3DObject("demo-3d-decalgeometry-09-container",{responsive:!0,geometry:"cylinder",geometryParams:{cylinderRadiusTop:.5,cylinderRadiusBottom:.5,cylinderHeight:1,cylinderRadialSegments:32},texture:"solid",textureParams:{solidColor:3158064},materialParams:{color:4210752,metalness:.3,roughness:.7},enableInteraction:!0,rotationSpeed:0});setTimeout((function(){l&&l.isInitialized?(l.clearDecals&&l.clearDecals(),l.createCircularDecals(["0","1","2","3","4","5","6","7","8","9"],{radius:.52,textStyle:{fontSize:72,fontFamily:"Arial, sans-serif",color:"#ffffff",backgroundColor:"#000000",padding:15},decalSize:"undefined"!=typeof THREE&&THREE.Vector3?new THREE.Vector3(.2,.2,.1):{x:.2,y:.2,z:.1}}),console.log("[Demo] ThreeD Engine DecalGeometry 0-9 initialized with projected number decals")):console.warn("[Demo] ThreeD Engine DecalGeometry 0-9 not initialized yet")}),200),ii.createSlider({containerId:"demo-3d-decalgeometry-09-rotation-slider-container",sliderClass:"demo-3d-decalgeometry-09-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo ThreeD DecalGeometry 0-9 Rotation Speed] Selected:",e),l&&l.setRotationSpeed&&l.setRotationSpeed(e)}));var h=ii.create3DObject("demo-3d-sphere-container",{responsive:!0,geometry:"sphere",geometryParams:{sphereRadius:.5,sphereWidthSegments:32,sphereHeightSegments:16},texture:"animated",enableInteraction:!0,rotationSpeed:0});console.log("[Demo] 3D sphere component initialized:",h),ii.createSlider({containerId:"demo-3d-sphere-rotation-slider-container",sliderClass:"demo-3d-sphere-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo 3D Sphere Rotation Speed] Selected:",e),h&&h.setRotationSpeed&&h.setRotationSpeed(e)}));var c=ii.createDrumSelector("demo-drum-selector-container",{responsive:!0,geometry:"cylinder",geometryParams:{cylinderRadiusTop:.5,cylinderRadiusBottom:.5,cylinderHeight:1,cylinderRadialSegments:32},texture:"animated",enableInteraction:!0,rotationSpeed:0});console.log("[Demo] Drum_Selector_Engine initialized:",c),ii.createSlider({containerId:"demo-drum-selector-rotation-slider-container",sliderClass:"demo-drum-selector-rotation-slider",options:[{text:"Still",value:"0",position:1,active:!0,dataAttributes:'data-value="0"'},{text:"Slow",value:"0.25",position:2,dataAttributes:'data-value="0.25"'},{text:"Normal",value:"0.5",position:3,dataAttributes:'data-value="0.5"'},{text:"Fast",value:"0.75",position:4,dataAttributes:'data-value="0.75"'},{text:"Wild!",value:"1",position:5,dataAttributes:'data-value="1"'}]},(function(t){var e=parseFloat(t.getAttribute("data-value"));console.log("[Demo Drum Selector Rotation Speed] Selected:",e),c&&c.setRotationSpeed&&c.setRotationSpeed(e)})),ii.createWheelSelector("demo-wheel-selector-container",{id:"demo-wheel-selector",options:["1","2","3","4","5","6","7","8","9","10"],defaultValue:"1",placeholder:"Roll the wheel",showOnHover:!0,onChange:function(t){return console.log("[Demo] Wheel selected:",t)}}),ii.createCalendarPicker("demo-calendar-picker-container",{id:"demo-calendar-picker",label:"Calendar Picker",onChange:function(t){return console.log("[Demo] Calendar date selected:",t)}}),ii.createWheelTimeSelector("demo-wheel-time-selector-container",{id:"demo-wheel-time-selector",label:"Time Selector",defaultTime:"12:00",onChange:function(t){return console.log("[Demo] Time selected:",t)}}),ii.createWheelDatePicker("demo-wheel-date-picker-container",{id:"demo-wheel-date-picker",label:"Date Picker",format:"dd-mm-yyyy",onChange:function(t){return console.log("[Demo] Date selected:",t)}}),ii.createFileUpload("demo-file-upload-container",{id:"demo-file-upload",label:"File Upload",onChange:function(t){return console.log("[Demo] Files selected:",t)}}),console.log("[Engines Page] Demo components initialized")}catch(t){console.error("[Engines Page] Error initializing components:",t)}}else console.error("[Engines Page] ComponentFactory not available")}()):"data-entry"===t?(console.log("[main.js] Initializing data entry components"),console.log("[Data Entry] Page initialized with centered text only")):"vendor-request"===t&&(console.log("[main.js] Initializing vendor request components"),console.log("[Vendor Request] Initializing vendor request components..."),window.componentFactory?console.log("[Vendor Request] Page ready for vendor request form components"):console.error("[Vendor Request] ComponentFactory not available"))},console.log("[main.js] ES6 modules imported successfully"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",gi):gi(),window.addEventListener("load",(function(){x()})),document.addEventListener("pageLoaded",x),console.log("[main.js] Application setup complete [Deployment: ".concat(mi,"]"))})()})();