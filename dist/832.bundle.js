"use strict";(self.webpackChunkdynamicsite=self.webpackChunkdynamicsite||[]).push([[832],{832:(e,t,i)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}i.r(t),i.d(t,{ThreeD_Drum_Selector:()=>a});var a=function(){return e=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container="string"==typeof t?document.getElementById(t):t,this.container?(this.config=this.mergeConfig(i),this.renderer=null,this.scene=null,this.camera=null,this.raycaster=new THREE.Raycaster,this.numberGroup=null,this.numberMeshes=[],this.blockingCylinder=null,this.fogPlane=null,this.font=null,this.isLoading=!1,this.fogCanvas=null,this.fogContext=null,this.fogTexture=null,this.lights={},this.isDragging=!1,this.previousMousePosition={x:0,y:0},this.rotationVelocity=0,this.animationId=null,this.isInitialized=!1,this.currentValue=0,this.animate=this.animate.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onWheel=this.onWheel.bind(this),console.log("[ThreeD Drum Selector] Initialized with config:",this.config)):console.error("[ThreeD Drum Selector] Container not found")},(t=[{key:"mergeConfig",value:function(e){return Object.assign({textColor:16777215,textEmissive:4473924,textEmissiveIntensity:.2,cylinderColor:0,backgroundColor:1710618,textRadius:.3,cylinderRadius:.28,fontSize:"auto",textDepth:0,width:300,height:300,responsive:!0,enableInteraction:!0,enableZoom:!0,enableMomentum:!0,restrictRotation:"x",momentumDamping:.95,rotationSpeed:0,enableFog:!0,enableSnap:!1,snapStrength:.5,values:["0","1","2","3","4","5","6","7","8","9"],defaultValue:"0",onChange:null},e)}},{key:"init",value:function(){this.isInitialized?console.warn("[ThreeD Drum Selector] Already initialized"):(console.log("[ThreeD Drum Selector] Starting initialization..."),this.setupRenderer(),this.setupCamera(),this.setupScene(),this.setupLighting(),this.config.enableFog&&this.createFogPlane(),this.numberGroup=new THREE.Group,this.numberGroup.rotation.z=-Math.PI/2,this.scene.add(this.numberGroup),this.loadFont(),this.config.enableInteraction&&this.setupInteraction(),this.isInitialized=!0,this.animate(0),this.config.defaultValue&&this.setValue(this.config.defaultValue),console.log("[ThreeD Drum Selector] Initialization complete"))}},{key:"setupRenderer",value:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio);var e=this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width;this.renderer.setSize(e,e),this.container.appendChild(this.renderer.domElement),this.container.style.display="flex",this.container.style.justifyContent="center",this.container.style.alignItems="center",this.container.style.position="relative",this.container.style.overflow="hidden",this.config.responsive||(this.container.style.width="".concat(this.config.width,"px"),this.container.style.height="".concat(this.config.height,"px")),console.log("[ThreeD Drum Selector] Renderer setup complete")}},{key:"setupCamera",value:function(){this.config.responsive?Math.max(50,Math.min(500,.15*window.innerWidth)):this.config.width,this.camera=new THREE.PerspectiveCamera(50,1,.1,100),this.camera.position.set(0,0,1.9),this.camera.lookAt(0,0,0)}},{key:"setupScene",value:function(){this.scene=new THREE.Scene;var e=new THREE.PMREMGenerator(this.renderer);this.scene.environment=e.fromScene(this.createEnvironment()).texture}},{key:"createEnvironment",value:function(){var e=new THREE.Scene,t=new THREE.DirectionalLight(16777215,2);t.position.set(1,1,1),e.add(t);var i=new THREE.DirectionalLight(16777215,1);i.position.set(-1,1,-1),e.add(i);var n=new THREE.AmbientLight(16777215,1);return e.add(n),e}},{key:"setupLighting",value:function(){this.lights.main=new THREE.PointLight(16777215,2.5),this.lights.main.position.set(-1.5,1.7,2),this.scene.add(this.lights.main),this.lights.front=new THREE.DirectionalLight(16777215,.3),this.lights.front.position.set(.5,.5,3),this.lights.front.target.position.set(0,0,0),this.scene.add(this.lights.front),this.lights.leftFill=new THREE.DirectionalLight(16777215,.2),this.lights.leftFill.position.set(-3,0,1),this.lights.leftFill.target.position.set(0,0,0),this.scene.add(this.lights.leftFill),this.lights.rightFill=new THREE.DirectionalLight(16777215,.15),this.lights.rightFill.position.set(3,-.5,1),this.lights.rightFill.target.position.set(0,0,0),this.scene.add(this.lights.rightFill),this.lights.ambient=new THREE.AmbientLight(16777215,.15),this.scene.add(this.lights.ambient),this.lights.rim=new THREE.DirectionalLight(16777215,1.5),this.lights.rim.position.set(0,-2,-2),this.lights.rim.target.position.set(0,0,0),this.scene.add(this.lights.rim),console.log("[ThreeD Drum Selector] Lighting setup complete")}},{key:"createFogPlane",value:function(){var e=this.camera.position.z- -1.5,t=50*Math.PI/180,i=2*Math.tan(t/2)*e,n=1.05*i,o=1.05*i,r=new THREE.PlaneGeometry(n,o,32,32);this.fogCanvas=document.createElement("canvas"),this.fogCanvas.width=512,this.fogCanvas.height=512,this.fogContext=this.fogCanvas.getContext("2d"),this.fogTexture=new THREE.CanvasTexture(this.fogCanvas);var s=new THREE.MeshBasicMaterial({map:this.fogTexture,transparent:!0,opacity:.8,side:THREE.DoubleSide,blending:THREE.AdditiveBlending});this.fogPlane=new THREE.Mesh(r,s),this.fogPlane.position.set(0,0,-1.5),this.scene.add(this.fogPlane);var a=new THREE.EdgesGeometry(r),l=new THREE.LineBasicMaterial({color:65280}),h=new THREE.LineSegments(a,l);this.fogPlane.add(h),console.log("[ThreeD Drum Selector] Fog plane created")}},{key:"loadFont",value:function(){var e=this;if(!window.THREE||!window.THREE.FontLoader)return console.warn("[ThreeD Drum Selector] FontLoader not available, using fallback"),void this.createFallbackNumbers();var t=new THREE.FontLoader;this.isLoading=!0,t.load("https://cdn.jsdelivr.net/npm/three@0.128.0/examples/fonts/helvetiker_regular.typeface.json",(function(t){console.log("[ThreeD Drum Selector] Font loaded successfully"),e.font=t,e.createTextNumbers(),e.createBlockingCylinder(),e.isLoading=!1}),(function(e){console.log("[ThreeD Drum Selector] Loading font...",e)}),(function(t){console.error("[ThreeD Drum Selector] Error loading font:",t),e.createFallbackNumbers(),e.createBlockingCylinder(),e.isLoading=!1}))}},{key:"createTextNumbers",value:function(){if(this.font){this.clearNumbers();for(var e=this.config.values.length,t=2*Math.PI/e,i=this.config.textRadius,n=0;n<e;n++){var o=void 0;if("auto"===this.config.fontSize){var r=getComputedStyle(document.documentElement);o=parseFloat(r.fontSize)*(parseFloat(r.getPropertyValue("--component-font-size"))||.9)*(2.5/(this.container.clientHeight||300))*.4}else o=this.config.fontSize;var s=new THREE.TextGeometry(this.config.values[n],{font:this.font,size:o,height:this.config.textDepth,curveSegments:12,bevelEnabled:!1});s.center(),s.rotateZ(Math.PI/2);for(var a=s.attributes.position,l=new THREE.Vector3,h=0;h<a.count;h++){l.x=a.getX(h),l.y=a.getY(h),l.z=a.getZ(h);var c=n*t+-5*l.x*(.8*t),u=i+l.z;a.setX(h,Math.cos(c)*u),a.setZ(h,Math.sin(c)*u)}a.needsUpdate=!0,s.computeVertexNormals();var g=new THREE.MeshStandardMaterial({color:this.config.textColor,emissive:this.config.textEmissive,emissiveIntensity:this.config.textEmissiveIntensity,side:THREE.FrontSide}),d=new THREE.Mesh(s,g);this.numberGroup.add(d),this.numberMeshes.push(d)}console.log("[ThreeD Drum Selector] Created",e,"text numbers")}else console.error("[ThreeD Drum Selector] No font loaded")}},{key:"createBlockingCylinder",value:function(){var e,t=0,i=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return o(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw s}}}}(this.numberMeshes);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=(new THREE.Box3).setFromObject(n),s=r.max.y-r.min.y;t=Math.max(t,s)}}}catch(e){i.e(e)}finally{i.f()}var a=1.05*t;console.log("[ThreeD Drum Selector] Creating blocking cylinder with width:",a);var l=new THREE.CylinderGeometry(this.config.cylinderRadius,this.config.cylinderRadius,a,32,1,!0),h=new THREE.MeshPhysicalMaterial({color:this.config.cylinderColor,metalness:0,roughness:0,clearcoat:1,clearcoatRoughness:0,reflectivity:1,envMapIntensity:1.2,side:THREE.DoubleSide});this.blockingCylinder=new THREE.Mesh(l,h),this.numberGroup.add(this.blockingCylinder),console.log("[ThreeD Drum Selector] Blocking cylinder created")}},{key:"createFallbackNumbers",value:function(){console.log("[ThreeD Drum Selector] Creating fallback box placeholders"),this.clearNumbers();for(var e=this.config.values.length,t=2*Math.PI/e,i=this.config.textRadius,n=0;n<e;n++){var o=new THREE.BoxGeometry(.1,.15,.02),r=new THREE.MeshStandardMaterial({color:this.config.textColor,emissive:this.config.textEmissive,emissiveIntensity:this.config.textEmissiveIntensity,side:THREE.FrontSide}),s=new THREE.Mesh(o,r),a=n*t;s.position.x=Math.cos(a)*i,s.position.z=Math.sin(a)*i,s.position.y=0,s.rotation.y=a+Math.PI/2,s.rotation.z=Math.PI/2,this.numberGroup.add(s),this.numberMeshes.push(s)}console.log("[ThreeD Drum Selector] Fallback boxes created")}},{key:"clearNumbers",value:function(){var e=this;this.numberMeshes.forEach((function(t){t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach((function(e){return e.dispose()})):t.material.dispose()),e.numberGroup.remove(t)})),this.numberMeshes=[]}},{key:"setupInteraction",value:function(){var e=this.renderer.domElement;e.style.cursor="grab",e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),e.addEventListener("pointercancel",this.onPointerUp),e.addEventListener("pointerleave",this.onPointerUp),this.config.enableZoom&&e.addEventListener("wheel",this.onWheel,{passive:!1}),console.log("[ThreeD Drum Selector] Interaction setup complete")}},{key:"onPointerDown",value:function(e){if(this.config.enableInteraction){this.isDragging=!0,this.renderer.domElement.style.cursor="grabbing";var t=this.renderer.domElement.getBoundingClientRect();this.previousMousePosition={x:e.clientX-t.left,y:e.clientY-t.top},this.rotationVelocity=0,e.preventDefault()}}},{key:"onPointerMove",value:function(e){if(this.isDragging&&this.config.enableInteraction){var t=this.renderer.domElement.getBoundingClientRect(),i={x:e.clientX-t.left,y:e.clientY-t.top},n=.01*(i.x-this.previousMousePosition.x);"x"===this.config.restrictRotation&&(this.numberGroup.rotation.x-=n),this.config.enableMomentum&&(this.rotationVelocity=-n),this.previousMousePosition=i;var o=this.getCurrentValue();o!==this.currentValue&&(this.currentValue=o,this.config.onChange&&this.config.onChange(this.config.values[o]))}}},{key:"onPointerUp",value:function(e){this.isDragging=!1,this.renderer.domElement.style.cursor="grab"}},{key:"onWheel",value:function(e){if(this.config.enableZoom){var t=this.renderer.domElement.getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top;if(!(i<0||i>t.width||n<0||n>t.height)){e.preventDefault();var o=e.deltaY>0?1.1:.9;this.camera.position.z=Math.max(1,Math.min(3,this.camera.position.z*o))}}}},{key:"updateFogTexture",value:function(e){if(this.fogContext&&this.fogTexture){var t=this.fogContext,i=t.canvas.width,n=t.canvas.height;t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(0,0,i,n);for(var o=i/2,r=n/2,s=Math.sqrt(o*o+r*r),a=0;a<6;a++){var l=(.001*e+.5*a)%1,h=l*s,c=t.createRadialGradient(o,r,Math.max(0,h-15),o,r,h+15),u=.3*(1-l);c.addColorStop(0,"rgba(100, 100, 255, 0)"),c.addColorStop(.5,"rgba(100, 100, 255, ".concat(u,")")),c.addColorStop(1,"rgba(100, 100, 255, 0)"),t.fillStyle=c,t.fillRect(0,0,i,n)}this.fogTexture.needsUpdate=!0}}},{key:"animate",value:function(e){if(this.animationId=requestAnimationFrame(this.animate),this.config.enableFog&&this.fogTexture&&this.updateFogTexture(e),!this.isDragging&&this.config.enableMomentum&&Math.abs(this.rotationVelocity)>1e-4){this.numberGroup.rotation.x+=this.rotationVelocity,this.rotationVelocity*=this.config.momentumDamping;var t=this.getCurrentValue();t!==this.currentValue&&(this.currentValue=t,this.config.onChange&&this.config.onChange(this.config.values[t]))}this.config.rotationSpeed>0&&!this.isDragging&&(this.numberGroup.rotation.x+=.01*this.config.rotationSpeed),this.config.enableSnap&&!this.isDragging&&Math.abs(this.rotationVelocity)<.001&&this.snapToNearestValue(),this.renderer.render(this.scene,this.camera)}},{key:"getCurrentValue",value:function(){if(!this.numberGroup)return 0;var e=(this.numberGroup.rotation.x%(2*Math.PI)+2*Math.PI)%(2*Math.PI),t=2*Math.PI/this.config.values.length;return Math.round(e/t)%this.config.values.length}},{key:"setValue",value:function(e){var t=this.config.values.indexOf(e.toString());if(-1!==t){var i=2*Math.PI/this.config.values.length;this.numberGroup.rotation.x=t*i,this.currentValue=t,this.config.onChange&&this.config.onChange(e)}else console.warn("[ThreeD Drum Selector] Value not found:",e)}},{key:"snapToNearestValue",value:function(){var e=this.numberGroup.rotation.x,t=2*Math.PI/this.config.values.length,i=Math.round(e/t)*t-e;Math.abs(i)>.001&&(this.numberGroup.rotation.x+=i*this.config.snapStrength*.1)}},{key:"setRotationSpeed",value:function(e){this.config.rotationSpeed=Math.max(0,Math.min(1,e))}},{key:"dispose",value:function(){this.animationId&&cancelAnimationFrame(this.animationId);var e=this.renderer.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("pointerleave",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),this.clearNumbers(),this.blockingCylinder&&(this.blockingCylinder.geometry&&this.blockingCylinder.geometry.dispose(),this.blockingCylinder.material&&this.blockingCylinder.material.dispose(),this.numberGroup.remove(this.blockingCylinder)),this.fogPlane&&(this.fogPlane.geometry&&this.fogPlane.geometry.dispose(),this.fogPlane.material&&this.fogPlane.material.dispose(),this.scene.remove(this.fogPlane)),this.fogTexture&&this.fogTexture.dispose(),this.numberGroup&&this.scene.remove(this.numberGroup),this.renderer&&(this.renderer.dispose(),this.container.removeChild(this.renderer.domElement)),this.renderer=null,this.scene=null,this.camera=null,this.numberGroup=null,this.blockingCylinder=null,this.fogPlane=null,this.font=null,console.log("[ThreeD Drum Selector] Disposed")}}])&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()}}]);